{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":102,"index":102}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../utils/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":103},"end":{"line":2,"column":31,"index":134}}],"key":"XoJ+jbKCrEi38eKczMqtlbk+TCk=","exportNames":["*"],"imports":1}},{"name":"../store/authStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":135},"end":{"line":3,"column":50,"index":185}}],"key":"/4BDl/hqolvw7T4CXD8jWAtZK4M=","exportNames":["*"],"imports":1}},{"name":"../components/badges/MilestoneNotificationModal","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":186},"end":{"line":4,"column":89,"index":275}}],"key":"230mDBIqBRv6qbjH4fEZIfWjpvk=","exportNames":["*"],"imports":1}},{"name":"react/jsx-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"3suYSPX9nHbHZ1xNTsKXtKj0atE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,_m,_e,d){\"use strict\";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"default\",{enumerable:!0,get:function(){return h}}),Object.defineProperty(_e,\"useMilestones\",{enumerable:!0,get:function(){return c}}),Object.defineProperty(_e,\"MilestoneProvider\",{enumerable:!0,get:function(){return f}});var t=r(d[0]),s=e(r(d[1])),n=r(d[2]),l=e(r(d[3])),o=r(d[4]);const u=(0,t.createContext)(null),c=()=>{const e=(0,t.useContext)(u);if(!e)throw new Error('useMilestones must be used within a MilestoneProvider');return e},f=({children:e})=>{const{isAuthenticated:c,user:f}=(0,n.useAuthStore)(),[h,b]=(0,t.useState)([]),[m,w]=(0,t.useState)([]),[M,_]=(0,t.useState)([]),[k,v]=(0,t.useState)(0),[S,p]=(0,t.useState)(null),[y,C]=(0,t.useState)(!1),[P,j]=(0,t.useState)([]),x=(0,t.useCallback)(async()=>{if(c)try{const e=(await s.default.get('/badges/milestones')).data;v(e.total_badges||0),w(e.achieved_milestones||[]),_(e.pending_milestones||[]);const t=e.new_milestones||[];b(t),t.length>0&&j(e=>{const s=new Set(e.map(e=>e.id)),n=t.filter(e=>!s.has(e.id));return[...e,...n]})}catch(e){console.error('Failed to check milestones:',e)}},[c]),O=(0,t.useCallback)(async e=>{try{await s.default.post('/badges/milestones/acknowledge',{milestone_id:e}),b(t=>t.filter(t=>t.id!==e)),w(t=>t.map(t=>t.id===e?{...t,acknowledged:!0}:t))}catch(e){console.error('Failed to acknowledge milestone:',e)}},[]),A=(0,t.useCallback)(()=>{if(P.length>0){const[e,...t]=P;p(e),j(t),C(!0)}},[P]),E=(0,t.useCallback)(async()=>{S&&await O(S.id),C(!1),p(null),setTimeout(()=>{P.length>0&&A()},500)},[S,O,P,A]),F=(0,t.useCallback)(()=>{console.log('Achievement shared')},[]);return(0,t.useEffect)(()=>{c&&x()},[c,x]),(0,t.useEffect)(()=>{P.length>0&&!y&&!S&&A()},[P,y,S,A]),(0,o.jsxs)(u.Provider,{value:{newMilestones:h,achievedMilestones:m,pendingMilestones:M,totalBadges:k,checkForNewMilestones:x,acknowledgeMilestone:O,showNextMilestone:A},children:[e,(0,o.jsx)(l.default,{visible:y,milestone:S,onClose:E,onShare:F,userId:f?.user_id||''})]})};var h=u});","lineCount":1,"map":[[1,144,161,0,"Object"],[1,151,161,0,"defineProperty"],[1,166,161,0,"_e"],[1,169,161,0],[1,180,161,0,"enumerable"],[1,192,161,0],[1,194,161,0,"get"],[1,198,161,0],[1,216,161,0,"_default"],[1,217,161,0],[1,221,30,0,"Object"],[1,228,30,0,"defineProperty"],[1,243,30,0,"_e"],[1,246,30,0],[1,263,30,0,"enumerable"],[1,275,30,0],[1,277,30,0,"get"],[1,281,30,0],[1,299,30,0,"useMilestones"],[1,300,30,0],[1,304,42,0,"Object"],[1,311,42,0,"defineProperty"],[1,326,42,0,"_e"],[1,329,42,0],[1,350,42,0,"enumerable"],[1,362,42,0],[1,364,42,0,"get"],[1,368,42,0],[1,386,42,0,"MilestoneProvider"],[1,387,42,0],[1,391,1,0],[1,395,1,0,"_react"],[1,397,1,0,"r"],[1,399,1,0,"d"],[1,401,1,0],[1,405,2,0,"api"],[1,407,2,0,"_interopDefault"],[1,409,2,0,"r"],[1,411,2,0,"d"],[1,413,2,0],[1,418,3,0,"_storeAuthStore"],[1,420,3,0,"r"],[1,422,3,0,"d"],[1,424,3,0],[1,428,4,0,"MilestoneNotificationModal"],[1,430,4,0,"_interopDefault"],[1,432,4,0,"r"],[1,434,4,0,"d"],[1,436,4,0],[1,441,4,89,"_reactJsxRuntime"],[1,443,4,89,"r"],[1,445,4,89,"d"],[1,447,4,89],[1,451,28,0],[1,457,28,6,"MilestoneContext"],[1,460,28,25],[1,462,28,25,"createContext"],[1,464,28,38,"createContext"],[1,479,28,68],[1,485,30,13,"useMilestones"],[1,487,30,29,"useMilestones"],[1,492,31,2],[1,498,31,8,"context"],[1,501,31,18],[1,503,31,18,"useContext"],[1,505,31,28,"useContext"],[1,517,31,29,"MilestoneContext"],[1,520,32,2],[1,524,32,7,"context"],[1,526,33,4],[1,532,33,10],[1,536,33,14,"Error"],[1,542,33,20],[1,599,35,2],[1,606,35,9,"context"],[1,609,42,13,"MilestoneProvider"],[1,611,42,67,"MilestoneProvider"],[1,613,42,70,"children"],[1,628,43,2],[1,634,43,8,"isAuthenticated"],[1,650,43,10,"isAuthenticated"],[1,652,43,25,"user"],[1,657,43,27,"user"],[1,661,43,36],[1,663,43,36,"useAuthStore"],[1,665,43,48,"useAuthStore"],[1,682,44,9,"newMilestones"],[1,684,44,24,"setNewMilestones"],[1,688,44,44],[1,690,44,44,"useState"],[1,692,44,52,"useState"],[1,702,44,66],[1,707,45,9,"achievedMilestones"],[1,709,45,29,"setAchievedMilestones"],[1,713,45,54],[1,715,45,54,"useState"],[1,717,45,62,"useState"],[1,727,45,76],[1,732,46,9,"pendingMilestones"],[1,734,46,28,"setPendingMilestones"],[1,738,46,52],[1,740,46,52,"useState"],[1,742,46,60,"useState"],[1,752,46,74],[1,757,47,9,"totalBadges"],[1,759,47,22,"setTotalBadges"],[1,763,47,40],[1,765,47,40,"useState"],[1,767,47,48,"useState"],[1,777,47,49],[1,781,48,9,"currentMilestone"],[1,783,48,27,"setCurrentMilestone"],[1,787,48,50],[1,789,48,50,"useState"],[1,791,48,58,"useState"],[1,801,48,77],[1,808,49,9,"showModal"],[1,810,49,20,"setShowModal"],[1,814,49,36],[1,816,49,36,"useState"],[1,818,49,44,"useState"],[1,829,49,45],[1,833,50,9,"milestoneQueue"],[1,835,50,25,"setMilestoneQueue"],[1,839,50,46],[1,841,50,46,"useState"],[1,843,50,54,"useState"],[1,853,50,68],[1,857,52,8,"checkForNewMilestones"],[1,860,52,32],[1,862,52,32,"useCallback"],[1,864,52,43,"useCallback"],[1,877,52,44,"async"],[1,887,53,4],[1,890,53,9,"isAuthenticated"],[1,892,55,4],[1,896,56,6],[1,902,57,12,"data"],[1,911,56,29,"api"],[1,913,56,32,"default"],[1,921,56,33,"get"],[1,925,56,37],[1,948,57,28,"data"],[1,953,59,6,"setTotalBadges"],[1,955,59,21,"data"],[1,957,59,26,"total_badges"],[1,971,59,42],[1,974,60,6,"setAchievedMilestones"],[1,976,60,28,"data"],[1,978,60,33,"achieved_milestones"],[1,999,60,56],[1,1003,61,6,"setPendingMilestones"],[1,1005,61,27,"data"],[1,1007,61,32,"pending_milestones"],[1,1027,61,54],[1,1031,63,6],[1,1037,63,12,"newOnes"],[1,1039,63,22,"data"],[1,1041,63,27,"new_milestones"],[1,1057,63,45],[1,1060,64,6,"setNewMilestones"],[1,1062,64,23,"newOnes"],[1,1065,67,10,"newOnes"],[1,1067,67,18,"length"],[1,1074,67,27],[1,1077,68,8,"setMilestoneQueue"],[1,1079,68,26,"prev"],[1,1083,70,10],[1,1089,70,16,"existingIds"],[1,1091,70,30],[1,1095,70,34,"Set"],[1,1099,70,38,"prev"],[1,1101,70,43,"map"],[1,1105,70,47,"m"],[1,1108,70,52,"m"],[1,1110,70,54,"id"],[1,1115,71,16,"uniqueNew"],[1,1117,71,28,"newOnes"],[1,1119,71,36,"filter"],[1,1126,71,44,"m"],[1,1130,71,62,"existingIds"],[1,1132,71,74,"has"],[1,1136,71,78,"m"],[1,1138,71,80,"id"],[1,1143,72,10],[1,1149,72,17],[1,1153,72,21,"prev"],[1,1158,72,30,"uniqueNew"],[1,1162,75,4],[1,1163,75,6],[1,1169,75,13,"error"],[1,1172,76,6,"console"],[1,1180,76,14,"error"],[1,1186,76,20],[1,1216,76,51,"error"],[1,1218,77,4],[1,1221,78,5],[1,1222,78,6,"isAuthenticated"],[1,1226,80,8,"acknowledgeMilestone"],[1,1229,80,31],[1,1231,80,31,"useCallback"],[1,1233,80,42,"useCallback"],[1,1246,80,43,"async"],[1,1256,81,4],[1,1266,82,12,"api"],[1,1268,82,15,"default"],[1,1276,82,16,"post"],[1,1281,82,21],[1,1314,82,55],[1,1315,82,57,"milestone_id"],[1,1328,82,71,"milestoneId"],[1,1332,85,6,"setNewMilestones"],[1,1334,85,23,"prev"],[1,1337,85,31,"prev"],[1,1339,85,36,"filter"],[1,1346,85,43,"m"],[1,1349,85,48,"m"],[1,1351,85,50,"id"],[1,1356,85,57,"milestoneId"],[1,1360,86,6,"setAchievedMilestones"],[1,1362,86,28,"prev"],[1,1365,87,8,"prev"],[1,1367,87,13,"map"],[1,1371,87,17,"m"],[1,1374,87,22,"m"],[1,1376,87,24,"id"],[1,1381,87,31,"milestoneId"],[1,1383,87,45],[1,1387,87,50,"m"],[1,1389,87,53,"acknowledged"],[1,1403,87,67],[1,1406,87,76,"m"],[1,1409,89,4],[1,1410,89,6],[1,1416,89,13,"error"],[1,1419,90,6,"console"],[1,1427,90,14,"error"],[1,1433,90,20],[1,1468,90,56,"error"],[1,1470,91,4],[1,1473,92,5],[1,1477,94,8,"showNextMilestone"],[1,1480,94,28],[1,1482,94,28,"useCallback"],[1,1484,94,39,"useCallback"],[1,1497,94,40],[1,1502,95,4],[1,1505,95,8,"milestoneQueue"],[1,1507,95,23,"length"],[1,1514,95,32],[1,1516,95,35],[1,1517,96,6],[1,1523,96,13,"next"],[1,1528,96,22,"rest"],[1,1531,96,30,"milestoneQueue"],[1,1533,97,6,"setCurrentMilestone"],[1,1535,97,26,"next"],[1,1538,98,6,"setMilestoneQueue"],[1,1540,98,24,"rest"],[1,1543,99,6,"setShowModal"],[1,1546,99,19],[1,1548,100,4],[1,1551,101,5],[1,1552,101,6,"milestoneQueue"],[1,1556,103,8,"handleCloseModal"],[1,1559,103,27],[1,1561,103,27,"useCallback"],[1,1563,103,38,"useCallback"],[1,1576,103,39,"async"],[1,1586,104,8,"currentMilestone"],[1,1595,105,12,"acknowledgeMilestone"],[1,1597,105,33,"currentMilestone"],[1,1599,105,50,"id"],[1,1603,107,4,"setShowModal"],[1,1606,107,17],[1,1609,108,4,"setCurrentMilestone"],[1,1611,108,24],[1,1617,111,4,"setTimeout"],[1,1628,111,15],[1,1633,112,10,"milestoneQueue"],[1,1635,112,25,"length"],[1,1642,112,34],[1,1645,113,8,"showNextMilestone"],[1,1650,115,7],[1,1656,116,5],[1,1657,116,6,"currentMilestone"],[1,1659,116,24,"acknowledgeMilestone"],[1,1661,116,46,"milestoneQueue"],[1,1663,116,62,"showNextMilestone"],[1,1667,118,8,"handleShare"],[1,1670,118,22],[1,1672,118,22,"useCallback"],[1,1674,118,33,"useCallback"],[1,1687,118,34],[1,1692,120,4,"console"],[1,1700,120,12,"log"],[1,1704,120,16],[1,1727,121,5],[1,1731,137,2],[1,1738,124,2],[1,1740,124,2,"useEffect"],[1,1742,124,11,"useEffect"],[1,1753,124,12],[1,1758,125,8,"isAuthenticated"],[1,1761,126,6,"checkForNewMilestones"],[1,1766,128,5],[1,1767,128,6,"isAuthenticated"],[1,1769,128,23,"checkForNewMilestones"],[1,1774,131,2],[1,1776,131,2,"useEffect"],[1,1778,131,11,"useEffect"],[1,1789,131,12],[1,1794,132,8,"milestoneQueue"],[1,1796,132,23,"length"],[1,1803,132,32],[1,1807,132,38,"showModal"],[1,1811,132,52,"currentMilestone"],[1,1814,133,6,"showNextMilestone"],[1,1819,135,5],[1,1820,135,6,"milestoneQueue"],[1,1822,135,22,"showModal"],[1,1824,135,33,"currentMilestone"],[1,1826,135,51,"showNextMilestone"],[1,1831,138,4],[1,1833,138,4,"_reactJsxRuntime"],[1,1835,138,4,"jsxs"],[1,1841,138,5,"MilestoneContext"],[1,1843,138,22,"Provider"],[1,1852,138,30],[1,1853,139,6,"value"],[1,1859,139,13],[1,1860,140,8,"newMilestones"],[1,1876,141,8,"achievedMilestones"],[1,1897,142,8,"pendingMilestones"],[1,1917,143,8,"totalBadges"],[1,1931,144,8,"checkForNewMilestones"],[1,1955,145,8,"acknowledgeMilestone"],[1,1978,146,8,"showNextMilestone"],[1,1999,147,8,"children"],[1,2008,147,8],[1,2009,149,7,"children"],[1,2012,150,6],[1,2014,150,6,"_reactJsxRuntime"],[1,2016,150,6,"jsx"],[1,2021,150,7,"MilestoneNotificationModal"],[1,2023,150,33,"default"],[1,2031,150,33],[1,2032,151,8,"visible"],[1,2040,151,17,"showModal"],[1,2042,152,8,"milestone"],[1,2052,152,19,"currentMilestone"],[1,2054,153,8,"onClose"],[1,2062,153,17,"handleCloseModal"],[1,2064,154,8,"onShare"],[1,2072,154,17,"handleShare"],[1,2074,155,8,"userId"],[1,2081,155,16,"user"],[1,2084,155,22,"user_id"],[1,2093,155,33],[1,2102,161,0],[1,2106,161,0,"_default"],[1,2108,161,15,"MilestoneContext"],[1,2109,161,32],[1,2112]],"functionMap":{"names":["<global>","useMilestones","MilestoneProvider","checkForNewMilestones","setMilestoneQueue$argument_0","prev.map$argument_0","newOnes.filter$argument_0","acknowledgeMilestone","setNewMilestones$argument_0","prev.filter$argument_0","setAchievedMilestones$argument_0","showNextMilestone","handleCloseModal","setTimeout$argument_0","handleShare","useEffect$argument_0"],"mappings":"AAA;6BC6B;CDM;mEEM;4CCU;0BCgB;+CCE,SD;2CEC,wCF;SDE;GDK;2CKE;uBCK,oBC,yBD,CD;4BGC;iBLC,4DK,CH;GLK;wCSE;GTO;uCUE;eCQ;KDI;GVC;kCYE;GZG;YaG;GbI;YaG;GbI;CFwB"},"hasCjsExports":false},"type":"js/module"}]}