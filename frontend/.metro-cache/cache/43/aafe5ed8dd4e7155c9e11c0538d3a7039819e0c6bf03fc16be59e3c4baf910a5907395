{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"useFeatureSettingsStore\", {\n    enumerable: true,\n    get: function () {\n      return useFeatureSettingsStore;\n    }\n  });\n  Object.defineProperty(exports, \"useInitializeFeatureSettings\", {\n    enumerable: true,\n    get: function () {\n      return useInitializeFeatureSettings;\n    }\n  });\n  var _zustand = require(_dependencyMap[0], \"zustand\");\n  // Helper to get API URL at runtime\n  const getApiUrl = () => process.env.EXPO_PUBLIC_BACKEND_URL || '';\n\n  // Feature settings interface matching backend response\n\n  // Default settings (used as fallback)\n  const DEFAULT_SETTINGS = {\n    show_view_count: true,\n    show_save_count: true,\n    show_listing_stats: true,\n    show_seller_stats: true,\n    show_distance: true,\n    show_time_ago: true,\n    show_negotiable_badge: true,\n    show_featured_badge: true,\n    location_mode: 'region',\n    default_country: 'TZ',\n    allow_country_change: false,\n    currency: 'TZS',\n    currency_symbol: 'TSh',\n    currency_position: 'before'\n  };\n  // Cache duration: 2 minutes\n  const CACHE_DURATION = 2 * 60 * 1000;\n  const useFeatureSettingsStore = (0, _zustand.create)((set, get) => ({\n    settings: DEFAULT_SETTINGS,\n    isLoading: false,\n    error: null,\n    lastFetched: null,\n    fetchSettings: async () => {\n      const state = get();\n\n      // Don't fetch if already loading\n      if (state.isLoading) return;\n\n      // Check cache - don't refetch if recently fetched\n      if (state.lastFetched && Date.now() - state.lastFetched < CACHE_DURATION) {\n        return;\n      }\n      set({\n        isLoading: true,\n        error: null\n      });\n      try {\n        const response = await fetch(`${getApiUrl()}/api/feature-settings`);\n        if (!response.ok) {\n          throw new Error('Failed to fetch feature settings');\n        }\n        const data = await response.json();\n        console.log('[FeatureSettingsStore] Received data:', JSON.stringify(data));\n        console.log('[FeatureSettingsStore] location_mode:', data.location_mode);\n        const newSettings = {\n          ...DEFAULT_SETTINGS,\n          ...data\n        };\n        console.log('[FeatureSettingsStore] New settings:', JSON.stringify(newSettings));\n        set({\n          settings: newSettings,\n          isLoading: false,\n          lastFetched: Date.now()\n        });\n      } catch (error) {\n        console.error('Error fetching feature settings:', error);\n        set({\n          isLoading: false,\n          error: error instanceof Error ? error.message : 'Unknown error'\n          // Keep default settings on error\n        });\n      }\n    },\n    // Helper methods for common checks\n    shouldShowViewCount: () => get().settings.show_view_count,\n    shouldShowSaveCount: () => get().settings.show_save_count,\n    shouldShowDistance: () => get().settings.show_distance,\n    shouldShowTimeAgo: () => get().settings.show_time_ago,\n    shouldShowNegotiableBadge: () => get().settings.show_negotiable_badge,\n    shouldShowFeaturedBadge: () => get().settings.show_featured_badge,\n    formatPrice: price => {\n      const {\n        currency_symbol,\n        currency_position\n      } = get().settings;\n      const formattedNumber = price.toLocaleString();\n      if (currency_position === 'before') {\n        return `${currency_symbol} ${formattedNumber}`;\n      }\n      return `${formattedNumber} ${currency_symbol}`;\n    }\n  }));\n\n  // Export a hook for easy initialization\n  const useInitializeFeatureSettings = () => {\n    const fetchSettings = useFeatureSettingsStore(state => state.fetchSettings);\n    return fetchSettings;\n  };\n});","lineCount":115,"map":[[7,2,63,0,"Object"],[7,8,63,0],[7,9,63,0,"defineProperty"],[7,23,63,0],[7,24,63,0,"exports"],[7,31,63,0],[8,4,63,0,"enumerable"],[8,14,63,0],[9,4,63,0,"get"],[9,7,63,0],[9,18,63,0,"get"],[9,19,63,0],[10,6,63,0],[10,13,63,0,"useFeatureSettingsStore"],[10,36,63,0],[11,4,63,0],[12,2,63,0],[13,2,131,0,"Object"],[13,8,131,0],[13,9,131,0,"defineProperty"],[13,23,131,0],[13,24,131,0,"exports"],[13,31,131,0],[14,4,131,0,"enumerable"],[14,14,131,0],[15,4,131,0,"get"],[15,7,131,0],[15,18,131,0,"get"],[15,19,131,0],[16,6,131,0],[16,13,131,0,"useInitializeFeatureSettings"],[16,41,131,0],[17,4,131,0],[18,2,131,0],[19,2,1,0],[19,6,1,0,"_zustand"],[19,14,1,0],[19,17,1,0,"require"],[19,24,1,0],[19,25,1,0,"_dependencyMap"],[19,39,1,0],[20,2,3,0],[21,2,4,0],[21,8,4,6,"getApiUrl"],[21,17,4,15],[21,20,4,18,"getApiUrl"],[21,21,4,18],[21,26,4,24,"process"],[21,33,4,31],[21,34,4,32,"env"],[21,37,4,35],[21,38,4,36,"EXPO_PUBLIC_BACKEND_URL"],[21,61,4,59],[21,65,4,63],[21,67,4,65],[23,2,6,0],[25,2,25,0],[26,2,26,0],[26,8,26,6,"DEFAULT_SETTINGS"],[26,24,26,39],[26,27,26,42],[27,4,27,2,"show_view_count"],[27,19,27,17],[27,21,27,19],[27,25,27,23],[28,4,28,2,"show_save_count"],[28,19,28,17],[28,21,28,19],[28,25,28,23],[29,4,29,2,"show_listing_stats"],[29,22,29,20],[29,24,29,22],[29,28,29,26],[30,4,30,2,"show_seller_stats"],[30,21,30,19],[30,23,30,21],[30,27,30,25],[31,4,31,2,"show_distance"],[31,17,31,15],[31,19,31,17],[31,23,31,21],[32,4,32,2,"show_time_ago"],[32,17,32,15],[32,19,32,17],[32,23,32,21],[33,4,33,2,"show_negotiable_badge"],[33,25,33,23],[33,27,33,25],[33,31,33,29],[34,4,34,2,"show_featured_badge"],[34,23,34,21],[34,25,34,23],[34,29,34,27],[35,4,35,2,"location_mode"],[35,17,35,15],[35,19,35,17],[35,27,35,25],[36,4,36,2,"default_country"],[36,19,36,17],[36,21,36,19],[36,25,36,23],[37,4,37,2,"allow_country_change"],[37,24,37,22],[37,26,37,24],[37,31,37,29],[38,4,38,2,"currency"],[38,12,38,10],[38,14,38,12],[38,19,38,17],[39,4,39,2,"currency_symbol"],[39,19,39,17],[39,21,39,19],[39,26,39,24],[40,4,40,2,"currency_position"],[40,21,40,19],[40,23,40,21],[41,2,41,0],[41,3,41,1],[42,2,60,0],[43,2,61,0],[43,8,61,6,"CACHE_DURATION"],[43,22,61,20],[43,25,61,23],[43,26,61,24],[43,29,61,27],[43,31,61,29],[43,34,61,32],[43,38,61,36],[44,2,63,7],[44,8,63,13,"useFeatureSettingsStore"],[44,31,63,36],[44,34,63,39],[44,38,63,39,"create"],[44,46,63,45],[44,47,63,45,"create"],[44,53,63,45],[44,55,63,68],[44,56,63,69,"set"],[44,59,63,72],[44,61,63,74,"get"],[44,64,63,77],[44,70,63,83],[45,4,64,2,"settings"],[45,12,64,10],[45,14,64,12,"DEFAULT_SETTINGS"],[45,30,64,28],[46,4,65,2,"isLoading"],[46,13,65,11],[46,15,65,13],[46,20,65,18],[47,4,66,2,"error"],[47,9,66,7],[47,11,66,9],[47,15,66,13],[48,4,67,2,"lastFetched"],[48,15,67,13],[48,17,67,15],[48,21,67,19],[49,4,69,2,"fetchSettings"],[49,17,69,15],[49,19,69,17],[49,25,69,17,"fetchSettings"],[49,26,69,17],[49,31,69,29],[50,6,70,4],[50,12,70,10,"state"],[50,17,70,15],[50,20,70,18,"get"],[50,23,70,21],[50,24,70,22],[50,25,70,23],[52,6,72,4],[53,6,73,4],[53,10,73,8,"state"],[53,15,73,13],[53,16,73,14,"isLoading"],[53,25,73,23],[53,27,73,25],[55,6,75,4],[56,6,76,4],[56,10,76,8,"state"],[56,15,76,13],[56,16,76,14,"lastFetched"],[56,27,76,25],[56,31,76,29,"Date"],[56,35,76,33],[56,36,76,34,"now"],[56,39,76,37],[56,40,76,38],[56,41,76,39],[56,44,76,42,"state"],[56,49,76,47],[56,50,76,48,"lastFetched"],[56,61,76,59],[56,64,76,62,"CACHE_DURATION"],[56,78,76,76],[56,80,76,78],[57,8,77,6],[58,6,78,4],[59,6,80,4,"set"],[59,9,80,7],[59,10,80,8],[60,8,80,10,"isLoading"],[60,17,80,19],[60,19,80,21],[60,23,80,25],[61,8,80,27,"error"],[61,13,80,32],[61,15,80,34],[62,6,80,39],[62,7,80,40],[62,8,80,41],[63,6,82,4],[63,10,82,8],[64,8,83,6],[64,14,83,12,"response"],[64,22,83,20],[64,25,83,23],[64,31,83,29,"fetch"],[64,36,83,34],[64,37,83,35],[64,40,83,38,"getApiUrl"],[64,49,83,47],[64,50,83,48],[64,51,83,49],[64,74,83,72],[64,75,83,73],[65,8,85,6],[65,12,85,10],[65,13,85,11,"response"],[65,21,85,19],[65,22,85,20,"ok"],[65,24,85,22],[65,26,85,24],[66,10,86,8],[66,16,86,14],[66,20,86,18,"Error"],[66,25,86,23],[66,26,86,24],[66,60,86,58],[66,61,86,59],[67,8,87,6],[68,8,89,6],[68,14,89,12,"data"],[68,18,89,16],[68,21,89,19],[68,27,89,25,"response"],[68,35,89,33],[68,36,89,34,"json"],[68,40,89,38],[68,41,89,39],[68,42,89,40],[69,8,90,6,"console"],[69,15,90,13],[69,16,90,14,"log"],[69,19,90,17],[69,20,90,18],[69,59,90,57],[69,61,90,59,"JSON"],[69,65,90,63],[69,66,90,64,"stringify"],[69,75,90,73],[69,76,90,74,"data"],[69,80,90,78],[69,81,90,79],[69,82,90,80],[70,8,91,6,"console"],[70,15,91,13],[70,16,91,14,"log"],[70,19,91,17],[70,20,91,18],[70,59,91,57],[70,61,91,59,"data"],[70,65,91,63],[70,66,91,64,"location_mode"],[70,79,91,77],[70,80,91,78],[71,8,93,6],[71,14,93,12,"newSettings"],[71,25,93,23],[71,28,93,26],[72,10,93,28],[72,13,93,31,"DEFAULT_SETTINGS"],[72,29,93,47],[73,10,93,49],[73,13,93,52,"data"],[74,8,93,57],[74,9,93,58],[75,8,94,6,"console"],[75,15,94,13],[75,16,94,14,"log"],[75,19,94,17],[75,20,94,18],[75,58,94,56],[75,60,94,58,"JSON"],[75,64,94,62],[75,65,94,63,"stringify"],[75,74,94,72],[75,75,94,73,"newSettings"],[75,86,94,84],[75,87,94,85],[75,88,94,86],[76,8,96,6,"set"],[76,11,96,9],[76,12,96,10],[77,10,97,8,"settings"],[77,18,97,16],[77,20,97,18,"newSettings"],[77,31,97,29],[78,10,98,8,"isLoading"],[78,19,98,17],[78,21,98,19],[78,26,98,24],[79,10,99,8,"lastFetched"],[79,21,99,19],[79,23,99,21,"Date"],[79,27,99,25],[79,28,99,26,"now"],[79,31,99,29],[79,32,99,30],[80,8,100,6],[80,9,100,7],[80,10,100,8],[81,6,101,4],[81,7,101,5],[81,8,101,6],[81,15,101,13,"error"],[81,20,101,18],[81,22,101,20],[82,8,102,6,"console"],[82,15,102,13],[82,16,102,14,"error"],[82,21,102,19],[82,22,102,20],[82,56,102,54],[82,58,102,56,"error"],[82,63,102,61],[82,64,102,62],[83,8,103,6,"set"],[83,11,103,9],[83,12,103,10],[84,10,104,8,"isLoading"],[84,19,104,17],[84,21,104,19],[84,26,104,24],[85,10,105,8,"error"],[85,15,105,13],[85,17,105,15,"error"],[85,22,105,20],[85,34,105,32,"Error"],[85,39,105,37],[85,42,105,40,"error"],[85,47,105,45],[85,48,105,46,"message"],[85,55,105,53],[85,58,105,56],[86,10,106,8],[87,8,107,6],[87,9,107,7],[87,10,107,8],[88,6,108,4],[89,4,109,2],[89,5,109,3],[90,4,111,2],[91,4,112,2,"shouldShowViewCount"],[91,23,112,21],[91,25,112,23,"shouldShowViewCount"],[91,26,112,23],[91,31,112,29,"get"],[91,34,112,32],[91,35,112,33],[91,36,112,34],[91,37,112,35,"settings"],[91,45,112,43],[91,46,112,44,"show_view_count"],[91,61,112,59],[92,4,113,2,"shouldShowSaveCount"],[92,23,113,21],[92,25,113,23,"shouldShowSaveCount"],[92,26,113,23],[92,31,113,29,"get"],[92,34,113,32],[92,35,113,33],[92,36,113,34],[92,37,113,35,"settings"],[92,45,113,43],[92,46,113,44,"show_save_count"],[92,61,113,59],[93,4,114,2,"shouldShowDistance"],[93,22,114,20],[93,24,114,22,"shouldShowDistance"],[93,25,114,22],[93,30,114,28,"get"],[93,33,114,31],[93,34,114,32],[93,35,114,33],[93,36,114,34,"settings"],[93,44,114,42],[93,45,114,43,"show_distance"],[93,58,114,56],[94,4,115,2,"shouldShowTimeAgo"],[94,21,115,19],[94,23,115,21,"shouldShowTimeAgo"],[94,24,115,21],[94,29,115,27,"get"],[94,32,115,30],[94,33,115,31],[94,34,115,32],[94,35,115,33,"settings"],[94,43,115,41],[94,44,115,42,"show_time_ago"],[94,57,115,55],[95,4,116,2,"shouldShowNegotiableBadge"],[95,29,116,27],[95,31,116,29,"shouldShowNegotiableBadge"],[95,32,116,29],[95,37,116,35,"get"],[95,40,116,38],[95,41,116,39],[95,42,116,40],[95,43,116,41,"settings"],[95,51,116,49],[95,52,116,50,"show_negotiable_badge"],[95,73,116,71],[96,4,117,2,"shouldShowFeaturedBadge"],[96,27,117,25],[96,29,117,27,"shouldShowFeaturedBadge"],[96,30,117,27],[96,35,117,33,"get"],[96,38,117,36],[96,39,117,37],[96,40,117,38],[96,41,117,39,"settings"],[96,49,117,47],[96,50,117,48,"show_featured_badge"],[96,69,117,67],[97,4,119,2,"formatPrice"],[97,15,119,13],[97,17,119,16,"price"],[97,22,119,29],[97,26,119,34],[98,6,120,4],[98,12,120,10],[99,8,120,12,"currency_symbol"],[99,23,120,27],[100,8,120,29,"currency_position"],[101,6,120,47],[101,7,120,48],[101,10,120,51,"get"],[101,13,120,54],[101,14,120,55],[101,15,120,56],[101,16,120,57,"settings"],[101,24,120,65],[102,6,121,4],[102,12,121,10,"formattedNumber"],[102,27,121,25],[102,30,121,28,"price"],[102,35,121,33],[102,36,121,34,"toLocaleString"],[102,50,121,48],[102,51,121,49],[102,52,121,50],[103,6,123,4],[103,10,123,8,"currency_position"],[103,27,123,25],[103,32,123,30],[103,40,123,38],[103,42,123,40],[104,8,124,6],[104,15,124,13],[104,18,124,16,"currency_symbol"],[104,33,124,31],[104,37,124,35,"formattedNumber"],[104,52,124,50],[104,54,124,52],[105,6,125,4],[106,6,126,4],[106,13,126,11],[106,16,126,14,"formattedNumber"],[106,31,126,29],[106,35,126,33,"currency_symbol"],[106,50,126,48],[106,52,126,50],[107,4,127,2],[108,2,128,0],[108,3,128,1],[108,4,128,2],[108,5,128,3],[110,2,130,0],[111,2,131,7],[111,8,131,13,"useInitializeFeatureSettings"],[111,36,131,41],[111,39,131,44,"useInitializeFeatureSettings"],[111,40,131,44],[111,45,131,50],[112,4,132,2],[112,10,132,8,"fetchSettings"],[112,23,132,21],[112,26,132,24,"useFeatureSettingsStore"],[112,49,132,47],[112,50,132,48,"state"],[112,55,132,53],[112,59,132,57,"state"],[112,64,132,62],[112,65,132,63,"fetchSettings"],[112,78,132,76],[112,79,132,77],[113,4,133,2],[113,11,133,9,"fetchSettings"],[113,24,133,22],[114,2,134,0],[114,3,134,1],[115,0,134,2],[115,3]],"functionMap":{"names":["<global>","getApiUrl","create$argument_0","fetchSettings","shouldShowViewCount","shouldShowSaveCount","shouldShowDistance","shouldShowTimeAgo","shouldShowNegotiableBadge","shouldShowFeaturedBadge","formatPrice","useInitializeFeatureSettings","useFeatureSettingsStore$argument_0"],"mappings":"AAA;kBCG,+CD;oEE2D;iBCM;GDwC;uBEG,oCF;uBGC,oCH;sBIC,kCJ;qBKC,kCL;6BMC,0CN;2BOC,wCP;eQE;GRQ;EFC;4CWG;gDCC,4BD;CXE"},"hasCjsExports":false},"type":"js/module"}]}