{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":99,"index":99}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"./FavoriteToast","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":48,"index":197}}],"key":"xYPiZoHK+oqpu496SQT38VyFnFw=","exportNames":["*"],"imports":1}},{"name":"../../store/authStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":198},"end":{"line":4,"column":53,"index":251}}],"key":"aoBrQ2CVE08dxj8z0PDidiMd4q8=","exportNames":["*"],"imports":1}},{"name":"../../utils/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":252},"end":{"line":5,"column":42,"index":294}}],"key":"bGlpsacChrXhWbF62SpuR7l8qe0=","exportNames":["*"],"imports":1}},{"name":"react/jsx-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"3suYSPX9nHbHZ1xNTsKXtKj0atE=","exportNames":["*"],"imports":1}},{"name":"socket.io-client","data":{"asyncType":"async","isESMImport":true,"locs":[{"start":{"line":72,"column":29,"index":2269},"end":{"line":72,"column":55,"index":2295}}],"key":"UJ9VmRh2XYK4rFw9lJWeAuuA6e0=","exportNames":["*"],"imports":1,"isOptional":true}},{"name":"expo/internal/async-require-module","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":72,"column":23,"index":2263},"end":{"line":72,"column":55,"index":2295}}],"key":"y8mhXL4zKvSVvgnacXXOn0UU+QQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){\"use strict\";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,\"default\",{enumerable:!0,get:function(){return b}}),Object.defineProperty(e,\"useFavoriteNotification\",{enumerable:!0,get:function(){return l}}),Object.defineProperty(e,\"FavoriteNotificationProvider\",{enumerable:!0,get:function(){return f}});var t=r(d[0]),n=r(d[1]),o=r(d[2]),s=r(d[3]),c=r(d[4]);const u=(0,t.createContext)({showNotification:()=>{}}),l=()=>(0,t.useContext)(u),f=({children:l})=>{const{isAuthenticated:f,user:b,token:v}=(0,o.useAuthStore)(),[_,h]=(0,t.useState)(null),[N,k]=(0,t.useState)(!1),p=(0,t.useRef)(null),F=(0,t.useRef)([]),P=(0,t.useCallback)(()=>{if(F.current.length>0&&!N){const t=F.current.shift();t&&(h(t),k(!0))}},[N]),j=(0,t.useCallback)(t=>{N?F.current.push(t):(h(t),k(!0))},[N]),w=(0,t.useCallback)(()=>{k(!1),h(null),setTimeout(P,300)},[P]);return(0,t.useEffect)(()=>{if(!f||!b)return;return(async()=>{try{const{io:t}=await r(d[6])(d[5],d.paths,\"socket.io-client\"),n=t(s.API_URL,{transports:['websocket'],auth:{token:v}});n.on('connect',()=>{console.log('[FavoriteNotification] WebSocket connected'),n.emit('subscribe_stats',{user_id:b.user_id})}),n.on('new_favorite',t=>{console.log('[FavoriteNotification] Received new favorite:',t),j({userName:t.user_name,listingTitle:t.listing_title,listingId:t.listing_id})}),n.on('disconnect',()=>{console.log('[FavoriteNotification] WebSocket disconnected')}),p.current=n}catch(t){console.error('[FavoriteNotification] WebSocket connection error:',t)}})(),()=>{p.current&&(p.current.emit('unsubscribe_stats',{user_id:b.user_id}),p.current.disconnect(),p.current=null)}},[f,b,v,j]),(0,c.jsxs)(u.Provider,{value:{showNotification:j},children:[l,_&&(0,c.jsx)(n.FavoriteToast,{visible:N,userName:_.userName,listingTitle:_.listingTitle,onDismiss:w,duration:4e3})]})};var b=f});","lineCount":1,"map":[[1,90,133,0,"Object"],[1,97,133,0,"defineProperty"],[1,112,133,0,"e"],[1,114,133,0],[1,125,133,0,"enumerable"],[1,137,133,0],[1,139,133,0,"get"],[1,143,133,0],[1,161,133,0,"_default"],[1,162,133,0],[1,166,21,0,"Object"],[1,173,21,0,"defineProperty"],[1,188,21,0,"e"],[1,190,21,0],[1,217,21,0,"enumerable"],[1,229,21,0],[1,231,21,0,"get"],[1,235,21,0],[1,253,21,0,"useFavoriteNotification"],[1,254,21,0],[1,258,27,0,"Object"],[1,265,27,0,"defineProperty"],[1,280,27,0,"e"],[1,282,27,0],[1,314,27,0,"enumerable"],[1,326,27,0],[1,328,27,0,"get"],[1,332,27,0],[1,350,27,0,"FavoriteNotificationProvider"],[1,351,27,0],[1,355,1,0],[1,359,1,0,"_react"],[1,361,1,0,"r"],[1,363,1,0,"d"],[1,365,1,0],[1,369,3,0,"_FavoriteToast"],[1,371,3,0,"r"],[1,373,3,0,"d"],[1,375,3,0],[1,379,4,0,"_storeAuthStore"],[1,381,4,0,"r"],[1,383,4,0,"d"],[1,385,4,0],[1,389,5,0,"_utilsApi"],[1,391,5,0,"r"],[1,393,5,0,"d"],[1,395,5,0],[1,399,5,42,"_reactJsxRuntime"],[1,401,5,42,"r"],[1,403,5,42,"d"],[1,405,5,42],[1,409,17,0],[1,415,17,6,"FavoriteNotificationContext"],[1,418,17,36],[1,420,17,36,"createContext"],[1,422,17,49,"createContext"],[1,437,17,83],[1,438,18,2,"showNotification"],[1,455,18,20,"showNotification"],[1,464,21,13,"useFavoriteNotification"],[1,466,21,39,"useFavoriteNotification"],[1,471,21,45],[1,473,21,45,"useContext"],[1,475,21,55,"useContext"],[1,487,21,56,"FavoriteNotificationContext"],[1,490,27,13,"FavoriteNotificationProvider"],[1,492,27,61,"FavoriteNotificationProvider"],[1,494,27,64,"children"],[1,509,28,2],[1,515,28,8,"isAuthenticated"],[1,531,28,10,"isAuthenticated"],[1,533,28,25,"user"],[1,538,28,27,"user"],[1,540,28,31,"token"],[1,546,28,33,"token"],[1,550,28,43],[1,552,28,43,"useAuthStore"],[1,554,28,55,"useAuthStore"],[1,571,29,9,"notification"],[1,573,29,23,"setNotification"],[1,577,29,42],[1,579,29,42,"useState"],[1,581,29,50,"useState"],[1,591,29,80],[1,598,30,9,"visible"],[1,600,30,18,"setVisible"],[1,604,30,32],[1,606,30,32,"useState"],[1,608,30,40,"useState"],[1,619,30,41],[1,622,31,8,"socketRef"],[1,625,31,20],[1,627,31,20,"useRef"],[1,629,31,26,"useRef"],[1,637,31,32],[1,643,32,8,"notificationQueue"],[1,646,32,28],[1,648,32,28,"useRef"],[1,650,32,34,"useRef"],[1,658,32,59],[1,662,35,8,"processQueue"],[1,665,35,23],[1,667,35,23,"useCallback"],[1,669,35,34,"useCallback"],[1,682,35,35],[1,687,36,4],[1,690,36,8,"notificationQueue"],[1,692,36,26,"current"],[1,700,36,34,"length"],[1,707,36,43],[1,711,36,49,"visible"],[1,713,36,58],[1,714,37,6],[1,720,37,12,"nextNotification"],[1,722,37,31,"notificationQueue"],[1,724,37,49,"current"],[1,732,37,57,"shift"],[1,740,38,10,"nextNotification"],[1,744,39,8,"setNotification"],[1,746,39,24,"nextNotification"],[1,749,40,8,"setVisible"],[1,752,40,19],[1,755,42,4],[1,758,43,5],[1,759,43,6,"visible"],[1,763,46,8,"showNotification"],[1,766,46,27],[1,768,46,27,"useCallback"],[1,770,46,38,"useCallback"],[1,783,46,40,"newNotification"],[1,787,47,8,"visible"],[1,789,49,6,"notificationQueue"],[1,791,49,24,"current"],[1,799,49,32,"push"],[1,804,49,37,"newNotification"],[1,808,51,6,"setNotification"],[1,810,51,22,"newNotification"],[1,813,52,6,"setVisible"],[1,816,52,17],[1,821,54,5],[1,822,54,6,"visible"],[1,826,57,8,"handleDismiss"],[1,829,57,24],[1,831,57,24,"useCallback"],[1,833,57,35,"useCallback"],[1,846,57,36],[1,851,58,4,"setVisible"],[1,854,58,15],[1,857,59,4,"setNotification"],[1,859,59,20],[1,865,61,4,"setTimeout"],[1,876,61,15,"processQueue"],[1,878,61,29],[1,884,62,5],[1,885,62,6,"processQueue"],[1,889,117,2],[1,896,65,2],[1,898,65,2,"useEffect"],[1,900,65,11,"useEffect"],[1,911,65,12],[1,916,66,4],[1,920,66,9,"isAuthenticated"],[1,924,66,29,"user"],[1,926,67,6],[1,933,108,4],[1,939,70,29,"async"],[1,950,71,6],[1,954,72,8],[1,960,72,14,"io"],[1,963,72,16,"io"],[1,972,72,23,"r"],[1,974,72,23,"d"],[1,976,72,23],[1,979,72,23,"r"],[1,980,72,23,"d"],[1,982,72,23],[1,985,72,23,"d"],[1,987,72,23,"paths"],[1,993,72,23],[1,1013,75,14,"socket"],[1,1015,75,23,"io"],[1,1017,73,28,"API_URL"],[1,1019,73,35,"API_URL"],[1,1027,75,39],[1,1028,76,10,"transports"],[1,1039,76,22],[1,1040,76,23],[1,1053,77,10,"auth"],[1,1058,77,16],[1,1059,77,18,"token"],[1,1070,80,8,"socket"],[1,1072,80,15,"on"],[1,1075,80,18],[1,1085,80,29],[1,1090,81,10,"console"],[1,1098,81,18,"log"],[1,1102,81,22],[1,1148,83,10,"socket"],[1,1150,83,17,"emit"],[1,1155,83,22],[1,1173,83,41],[1,1174,83,43,"user_id"],[1,1182,83,52,"user"],[1,1184,83,57,"user_id"],[1,1196,86,8,"socket"],[1,1198,86,15,"on"],[1,1201,86,18],[1,1216,86,35,"data"],[1,1220,87,10,"console"],[1,1228,87,18,"log"],[1,1232,87,22],[1,1280,87,71,"data"],[1,1283,88,10,"showNotification"],[1,1285,88,27],[1,1286,89,12,"userName"],[1,1295,89,22,"data"],[1,1297,89,27,"user_name"],[1,1307,90,12,"listingTitle"],[1,1320,90,26,"data"],[1,1322,90,31,"listing_title"],[1,1336,91,12,"listingId"],[1,1346,91,23,"data"],[1,1348,91,28,"listing_id"],[1,1363,95,8,"socket"],[1,1365,95,15,"on"],[1,1368,95,18],[1,1381,95,32],[1,1386,96,10,"console"],[1,1394,96,18,"log"],[1,1398,96,22],[1,1449,99,8,"socketRef"],[1,1451,99,18,"current"],[1,1459,99,28,"socket"],[1,1460,100,6],[1,1461,100,8],[1,1467,100,15,"error"],[1,1470,101,8,"console"],[1,1478,101,16,"error"],[1,1484,101,22],[1,1537,101,76,"error"],[1,1539,102,6],[1,1542,105,4,"connectWebSocket"],[1,1545,108,11],[1,1550,109,10,"socketRef"],[1,1552,109,20,"current"],[1,1562,110,8,"socketRef"],[1,1564,110,18,"current"],[1,1572,110,26,"emit"],[1,1577,110,31],[1,1597,110,52],[1,1598,110,54,"user_id"],[1,1606,110,63,"user"],[1,1608,110,68,"user_id"],[1,1618,111,8,"socketRef"],[1,1620,111,18,"current"],[1,1628,111,26,"disconnect"],[1,1641,112,8,"socketRef"],[1,1643,112,18,"current"],[1,1651,112,28],[1,1659,115,5],[1,1660,115,6,"isAuthenticated"],[1,1662,115,23,"user"],[1,1664,115,29,"token"],[1,1666,115,36,"showNotification"],[1,1671,118,4],[1,1673,118,4,"_reactJsxRuntime"],[1,1675,118,4,"jsxs"],[1,1681,118,5,"FavoriteNotificationContext"],[1,1683,118,33,"Provider"],[1,1692,118,41],[1,1693,118,42,"value"],[1,1699,118,49],[1,1700,118,51,"showNotification"],[1,1720,118,70,"children"],[1,1729,118,70],[1,1730,119,7,"children"],[1,1732,120,7,"notification"],[1,1736,121,8],[1,1738,121,8,"_reactJsxRuntime"],[1,1740,121,8,"jsx"],[1,1745,121,9,"_FavoriteToast"],[1,1747,121,22,"FavoriteToast"],[1,1761,121,22],[1,1762,122,10,"visible"],[1,1770,122,19,"visible"],[1,1772,123,10,"userName"],[1,1781,123,20,"notification"],[1,1783,123,33,"userName"],[1,1792,124,10,"listingTitle"],[1,1805,124,24,"notification"],[1,1807,124,37,"listingTitle"],[1,1820,125,10,"onDismiss"],[1,1830,125,21,"handleDismiss"],[1,1832,126,10,"duration"],[1,1841,126,20],[1,1851,133,0],[1,1855,133,0,"_default"],[1,1857,133,15,"FavoriteNotificationProvider"],[1,1858,133,44],[1,1861]],"functionMap":{"names":["<global>","createContext$argument_0.showNotification","useFavoriteNotification","FavoriteNotificationProvider","processQueue","showNotification","handleDismiss","useEffect$argument_0","connectWebSocket","socket.on$argument_1","<anonymous>"],"mappings":"AAA;oBCiB,QD;uCEG,6CF;6DGM;mCCQ;GDQ;uCEG;GFQ;oCGG;GHK;YIG;6BCK;6BCU;SDI;kCCE;SDO;gCCE;SDE;KDM;WGK;KHM;GJC;CHgB"},"hasCjsExports":false},"type":"js/module"}]}