{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":115},"end":{"line":6,"column":91,"index":206}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-location","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":207},"end":{"line":7,"column":42,"index":249}}],"key":"GNP7AGCKsBRUhlnTZ4lIPpbkT9E=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":250},"end":{"line":8,"column":69,"index":319}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Alert","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"PEUC6jrQVoAGZ2qYkvimljMOyJI=","exportNames":["*"],"imports":1}},{"name":"react/jsx-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"3suYSPX9nHbHZ1xNTsKXtKj0atE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,_d){\"use strict\";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"default\",{enumerable:!0,get:function(){return b}}),Object.defineProperty(_e,\"LocationProvider\",{enumerable:!0,get:function(){return f}}),Object.defineProperty(_e,\"useUserLocation\",{enumerable:!0,get:function(){return y}});var t=r(_d[0]),o=(function(e){if(e&&e.__esModule)return e;var t={};return e&&Object.keys(e).forEach(function(o){var n=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(t,o,n.get?n:{enumerable:!0,get:function(){return e[o]}})}),t.default=e,t})(r(_d[1])),n=e(r(_d[2])),s=e(r(_d[3])),c=r(_d[4]);const u=(0,t.createContext)(void 0),l='@user_location',d='@search_radius',f=({children:e})=>{const[f,y]=(0,t.useState)(null),[b,v]=(0,t.useState)(!1),[h,w]=(0,t.useState)(null),[P,p]=(0,t.useState)(null),[L,O]=(0,t.useState)(!1),[S,_]=(0,t.useState)(50);(0,t.useEffect)(()=>{C(),j()},[]);const j=async()=>{try{const e=await n.default.getItem(d);e&&_(parseInt(e,10))}catch(e){console.log('Failed to load cached radius:',e)}},F=(0,t.useCallback)(async e=>{_(e);try{await n.default.setItem(d,e.toString())}catch(e){console.log('Failed to save radius:',e)}},[]),C=async()=>{try{const e=await n.default.getItem(l);if(e){const t=JSON.parse(e);Date.now()-t.timestamp<18e5&&y(t)}}catch(e){console.log('Failed to load cached location:',e)}},E=async e=>{try{await n.default.setItem(l,JSON.stringify(e))}catch(e){console.log('Failed to save location:',e)}},I=(0,t.useCallback)(async()=>{v(!0),w(null);try{const{status:e}=await o.getForegroundPermissionsAsync();let t=e;if('granted'!==e){const{status:e}=await o.requestForegroundPermissionsAsync();t=e}if(p('granted'===t),'granted'!==t)return w('Location permission denied'),s.default.alert('Location Permission Required','To use \"Near Me\" feature, please enable location access in your device settings.',[{text:'OK'}]),v(!1),null;const n=await o.getCurrentPositionAsync({accuracy:o.Accuracy.Balanced}),c={lat:n.coords.latitude,lng:n.coords.longitude,timestamp:Date.now()};try{const[e]=await o.reverseGeocodeAsync({latitude:n.coords.latitude,longitude:n.coords.longitude});e&&(c.city=e.city||e.subregion||void 0,c.country=e.country||void 0)}catch(e){console.log('Reverse geocoding failed:',e)}return y(c),await E(c),v(!1),c}catch(e){return console.error('Location error:',e),w(e.message||'Failed to get location'),v(!1),null}},[]),M=(0,t.useCallback)(()=>{y(null),O(!1),n.default.removeItem(l)},[]);return(0,t.useEffect)(()=>{!L||f||b||I()},[L,f,b,I]),(0,c.jsx)(u.Provider,{value:{userLocation:f,isLoading:b,error:h,hasPermission:P,requestLocation:I,clearLocation:M,nearMeEnabled:L,setNearMeEnabled:O,searchRadius:S,setSearchRadius:F},children:e})},y=()=>{const e=(0,t.useContext)(u);if(void 0===e)throw new Error('useUserLocation must be used within a LocationProvider');return e};var b=u});","lineCount":1,"map":[[1,144,205,0,"Object"],[1,151,205,0,"defineProperty"],[1,166,205,0,"_e"],[1,169,205,0],[1,180,205,0,"enumerable"],[1,192,205,0],[1,194,205,0,"get"],[1,198,205,0],[1,216,205,0,"_default"],[1,217,205,0],[1,221,39,0,"Object"],[1,228,39,0,"defineProperty"],[1,243,39,0,"_e"],[1,246,39,0],[1,266,39,0,"enumerable"],[1,278,39,0],[1,280,39,0,"get"],[1,284,39,0],[1,302,39,0,"LocationProvider"],[1,303,39,0],[1,307,197,0,"Object"],[1,314,197,0,"defineProperty"],[1,329,197,0,"_e"],[1,332,197,0],[1,351,197,0,"enumerable"],[1,363,197,0],[1,365,197,0,"get"],[1,369,197,0],[1,387,197,0,"useUserLocation"],[1,388,197,0],[1,392,6,0],[1,396,6,0,"_react"],[1,398,6,0,"r"],[1,400,6,0,"_d"],[1,403,6,0],[1,407,7,0,"Location"],[1,410],[1,643,7,0,"_interopNamespace"],[1,644,7,0,"r"],[1,646,7,0,"_d"],[1,649,7,0],[1,654,8,0,"AsyncStorage"],[1,656,8,0,"_interopDefault"],[1,658,8,0,"r"],[1,660,8,0,"_d"],[1,663,8,0],[1,668,8,69,"Alert"],[1,670,8,69,"_interopDefault"],[1,672,8,69,"r"],[1,674,8,69,"_d"],[1,677,8,69],[1,682,8,69,"_reactJsxRuntime"],[1,684,8,69,"r"],[1,686,8,69,"_d"],[1,689,8,69],[1,693,32,0],[1,699,32,6,"LocationContext"],[1,702,32,24],[1,704,32,24,"createContext"],[1,706,32,37,"createContext"],[1,726,32,71,"undefined"],[1,729,34,6,"LOCATION_STORAGE_KEY"],[1,731,34,29],[1,748,35,6,"RADIUS_STORAGE_KEY"],[1,750,35,27],[1,767,39,13,"LocationProvider"],[1,769,39,73,"LocationProvider"],[1,771,39,76,"children"],[1,786,40,2],[1,792,40,9,"userLocation"],[1,794,40,23,"setUserLocation"],[1,798,40,42],[1,800,40,42,"useState"],[1,802,40,50,"useState"],[1,812,40,72],[1,819,41,9,"isLoading"],[1,821,41,20,"setIsLoading"],[1,825,41,36],[1,827,41,36,"useState"],[1,829,41,44,"useState"],[1,840,41,45],[1,844,42,9,"error"],[1,846,42,16,"setError"],[1,850,42,28],[1,852,42,28,"useState"],[1,854,42,36,"useState"],[1,864,42,52],[1,871,43,9,"hasPermission"],[1,873,43,24,"setHasPermission"],[1,877,43,44],[1,879,43,44,"useState"],[1,881,43,52,"useState"],[1,891,43,69],[1,898,44,9,"nearMeEnabled"],[1,900,44,24,"setNearMeEnabled"],[1,904,44,44],[1,906,44,44,"useState"],[1,908,44,52,"useState"],[1,919,44,53],[1,923,45,9,"searchRadius"],[1,925,45,23,"setSearchRadiusState"],[1,929,45,47],[1,931,45,47,"useState"],[1,933,45,55,"useState"],[1,943,37,23],[1,948,48,2],[1,950,48,2,"useEffect"],[1,952,48,11,"useEffect"],[1,963,48,12],[1,968,49,4,"loadCachedLocation"],[1,972,50,4,"loadCachedRadius"],[1,977,51,5],[1,981,53,2],[1,987,53,8,"loadCachedRadius"],[1,989,53,27,"async"],[1,999,54,4],[1,1003,55,6],[1,1009,55,12,"cached"],[1,1017,55,27,"AsyncStorage"],[1,1019,55,39,"default"],[1,1027,55,40,"getItem"],[1,1035,55,48,"RADIUS_STORAGE_KEY"],[1,1038,56,10,"cached"],[1,1041,57,8,"setSearchRadiusState"],[1,1043,57,29,"parseInt"],[1,1052,57,38,"cached"],[1,1054,57,46],[1,1058,59,4],[1,1059,59,6],[1,1065,59,13,"err"],[1,1068,60,6,"console"],[1,1076,60,14,"log"],[1,1080,60,18],[1,1112,60,51,"err"],[1,1114,61,4],[1,1117,64,8,"setSearchRadius"],[1,1120,64,26],[1,1122,64,26,"useCallback"],[1,1124,64,37,"useCallback"],[1,1137,64,38,"async"],[1,1147,65,4,"setSearchRadiusState"],[1,1149,65,25,"radius"],[1,1152,66,4],[1,1162,67,12,"AsyncStorage"],[1,1164,67,24,"default"],[1,1172,67,25,"setItem"],[1,1180,67,33,"RADIUS_STORAGE_KEY"],[1,1182,67,53,"radius"],[1,1184,67,60,"toString"],[1,1195,68,4],[1,1196,68,6],[1,1202,68,13,"err"],[1,1205,69,6,"console"],[1,1213,69,14,"log"],[1,1217,69,18],[1,1242,69,44,"err"],[1,1244,70,4],[1,1247,71,5],[1,1251,73,8,"loadCachedLocation"],[1,1253,73,29,"async"],[1,1263,74,4],[1,1267,75,6],[1,1273,75,12,"cached"],[1,1281,75,27,"AsyncStorage"],[1,1283,75,39,"default"],[1,1291,75,40,"getItem"],[1,1299,75,48,"LOCATION_STORAGE_KEY"],[1,1302,76,6],[1,1305,76,10,"cached"],[1,1307,76,18],[1,1308,77,8],[1,1314,77,14,"location"],[1,1316,77,25,"JSON"],[1,1321,77,30,"parse"],[1,1327,77,36,"cached"],[1,1330,79,12,"Date"],[1,1335,79,17,"now"],[1,1341,79,25,"location"],[1,1343,79,34,"timestamp"],[1,1353,36,24],[1,1359,80,10,"setUserLocation"],[1,1361,80,26,"location"],[1,1363,82,6],[1,1364,83,4],[1,1365,83,6],[1,1371,83,13,"err"],[1,1374,84,6,"console"],[1,1382,84,14,"log"],[1,1386,84,18],[1,1420,84,53,"err"],[1,1422,85,4],[1,1425,88,8,"saveLocation"],[1,1427,88,23,"async"],[1,1437,89,4],[1,1447,90,12,"AsyncStorage"],[1,1449,90,24,"default"],[1,1457,90,25,"setItem"],[1,1465,90,33,"LOCATION_STORAGE_KEY"],[1,1467,90,55,"JSON"],[1,1472,90,60,"stringify"],[1,1482,90,70,"location"],[1,1485,91,4],[1,1486,91,6],[1,1492,91,13,"err"],[1,1495,92,6,"console"],[1,1503,92,14,"log"],[1,1507,92,18],[1,1534,92,46,"err"],[1,1536,93,4],[1,1539,96,8,"requestLocation"],[1,1542,96,26],[1,1544,96,26,"useCallback"],[1,1546,96,37,"useCallback"],[1,1559,96,38,"async"],[1,1569,97,4,"setIsLoading"],[1,1572,97,17],[1,1575,98,4,"setError"],[1,1577,98,13],[1,1583,100,4],[1,1587,102,6],[1,1593,102,14,"status"],[1,1600,102,22,"existingStatus"],[1,1609,102,47,"Location"],[1,1611,102,56,"getForegroundPermissionsAsync"],[1,1643,104,6],[1,1647,104,10,"finalStatus"],[1,1649,104,24,"existingStatus"],[1,1651,107,6],[1,1654,107,29],[1,1666,107,10,"existingStatus"],[1,1668,107,40],[1,1669,108,8],[1,1675,108,14,"status"],[1,1682,108,16,"status"],[1,1691,108,33,"Location"],[1,1693,108,42,"requestForegroundPermissionsAsync"],[1,1729,109,8,"finalStatus"],[1,1731,109,22,"status"],[1,1732,110,6],[1,1733,114,6],[1,1736,112,6,"setHasPermission"],[1,1738,112,39],[1,1750,112,23,"finalStatus"],[1,1753,114,26],[1,1765,114,10,"finalStatus"],[1,1767,122,8],[1,1774,115,8,"setError"],[1,1776,115,17],[1,1806,116,8,"Alert"],[1,1808,116,13,"default"],[1,1816,116,14,"alert"],[1,1822,117,10],[1,1853,118,10],[1,1936,119,10],[1,1937,119,11],[1,1938,119,13,"text"],[1,1943,119,19],[1,1951,121,8,"setIsLoading"],[1,1954,121,21],[1,1957,122,15],[1,1962,126,6],[1,1968,126,12,"position"],[1,1976,126,29,"Location"],[1,1978,126,38,"getCurrentPositionAsync"],[1,2002,126,62],[1,2003,127,8,"accuracy"],[1,2012,127,18,"Location"],[1,2014,127,27,"Accuracy"],[1,2023,127,36,"Balanced"],[1,2034,130,12,"newLocation"],[1,2036,130,40],[1,2037,131,8,"lat"],[1,2041,131,13,"position"],[1,2043,131,22,"coords"],[1,2050,131,29,"latitude"],[1,2059,132,8,"lng"],[1,2063,132,13,"position"],[1,2065,132,22,"coords"],[1,2072,132,29,"longitude"],[1,2082,133,8,"timestamp"],[1,2092,133,19,"Date"],[1,2097,133,24,"now"],[1,2104,137,6],[1,2108,138,8],[1,2114,138,15,"geocode"],[1,2123,138,32,"Location"],[1,2125,138,41,"reverseGeocodeAsync"],[1,2145,138,61],[1,2146,139,10,"latitude"],[1,2155,139,20,"position"],[1,2157,139,29,"coords"],[1,2164,139,36,"latitude"],[1,2173,140,10,"longitude"],[1,2183,140,21,"position"],[1,2185,140,30,"coords"],[1,2192,140,37,"longitude"],[1,2204,143,12,"geocode"],[1,2208,144,10,"newLocation"],[1,2210,144,22,"city"],[1,2215,144,29,"geocode"],[1,2217,144,37,"city"],[1,2223,144,45,"geocode"],[1,2225,144,53,"subregion"],[1,2241,144,66,"undefined"],[1,2243,145,10,"newLocation"],[1,2245,145,22,"country"],[1,2253,145,32,"geocode"],[1,2255,145,40,"country"],[1,2269,145,51,"undefined"],[1,2271,147,6],[1,2272,147,8],[1,2278,147,15,"geoErr"],[1,2281,148,8,"console"],[1,2289,148,16,"log"],[1,2293,148,20],[1,2321,148,49,"geoErr"],[1,2323,149,6],[1,2324,154,6],[1,2331,151,6,"setUserLocation"],[1,2333,151,22,"newLocation"],[1,2342,152,12,"saveLocation"],[1,2344,152,25,"newLocation"],[1,2347,153,6,"setIsLoading"],[1,2350,153,19],[1,2353,154,13,"newLocation"],[1,2354,156,4],[1,2355,156,6],[1,2361,156,13,"err"],[1,2364,160,6],[1,2371,157,6,"console"],[1,2379,157,14,"error"],[1,2385,157,20],[1,2403,157,39,"err"],[1,2406,158,6,"setError"],[1,2408,158,15,"err"],[1,2410,158,19,"message"],[1,2419,158,30],[1,2445,159,6,"setIsLoading"],[1,2448,159,19],[1,2451,160,13],[1,2455,161,4],[1,2458,162,5],[1,2462,164,8,"clearLocation"],[1,2465,164,24],[1,2467,164,24,"useCallback"],[1,2469,164,35,"useCallback"],[1,2482,164,36],[1,2487,165,4,"setUserLocation"],[1,2489,165,20],[1,2495,166,4,"setNearMeEnabled"],[1,2498,166,21],[1,2501,167,4,"AsyncStorage"],[1,2503,167,16,"default"],[1,2511,167,17,"removeItem"],[1,2522,167,28,"LOCATION_STORAGE_KEY"],[1,2526,168,5],[1,2530,177,2],[1,2537,171,2],[1,2539,171,2,"useEffect"],[1,2541,171,11,"useEffect"],[1,2552,171,12],[1,2558,172,8,"nearMeEnabled"],[1,2561,172,26,"userLocation"],[1,2564,172,43,"isLoading"],[1,2567,173,6,"requestLocation"],[1,2572,175,5],[1,2573,175,6,"nearMeEnabled"],[1,2575,175,21,"userLocation"],[1,2577,175,35,"isLoading"],[1,2579,175,46,"requestLocation"],[1,2584,178,4],[1,2586,178,4,"_reactJsxRuntime"],[1,2588,178,4,"jsx"],[1,2593,178,5,"LocationContext"],[1,2595,178,21,"Provider"],[1,2604,178,29],[1,2605,179,6,"value"],[1,2611,179,13],[1,2612,180,8,"userLocation"],[1,2627,181,8,"isLoading"],[1,2639,182,8,"error"],[1,2647,183,8,"hasPermission"],[1,2663,184,8,"requestLocation"],[1,2681,185,8,"clearLocation"],[1,2697,186,8,"nearMeEnabled"],[1,2713,187,8,"setNearMeEnabled"],[1,2732,188,8,"searchRadius"],[1,2747,189,8,"setSearchRadius"],[1,2766,190,8,"children"],[1,2775,192,7,"children"],[1,2780,197,13,"useUserLocation"],[1,2782,197,31,"useUserLocation"],[1,2787,198,2],[1,2793,198,8,"context"],[1,2796,198,18],[1,2798,198,18,"useContext"],[1,2800,198,28,"useContext"],[1,2812,198,29,"LocationContext"],[1,2815,199,2],[1,2823,199,18,"undefined"],[1,2827,199,6,"context"],[1,2829,200,4],[1,2835,200,10],[1,2839,200,14,"Error"],[1,2845,200,20],[1,2903,202,2],[1,2910,202,9,"context"],[1,2913,205,0],[1,2917,205,0,"_default"],[1,2919,205,15,"LocationContext"],[1,2920,205,31],[1,2923]],"functionMap":{"names":["<global>","LocationProvider","useEffect$argument_0","loadCachedRadius","setSearchRadius","loadCachedLocation","saveLocation","requestLocation","clearLocation","useUserLocation"],"mappings":"AAA;yECsC;YCS;GDG;2BEE;GFS;sCGE;GHO;6BIE;GJa;uBKE;GLM;sCME;GNkE;oCOE;GPI;YCG;GDI;CDoB;+BSE;CTM"},"hasCjsExports":false},"type":"js/module"}]}