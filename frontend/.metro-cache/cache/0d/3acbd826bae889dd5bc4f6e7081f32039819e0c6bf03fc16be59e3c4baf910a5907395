{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useFeatureSettingsStore\", {\n    enumerable: true,\n    get: function () {\n      return useFeatureSettingsStore;\n    }\n  });\n  Object.defineProperty(exports, \"useInitializeFeatureSettings\", {\n    enumerable: true,\n    get: function () {\n      return useInitializeFeatureSettings;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _expoVirtualEnv = require(_dependencyMap[1], \"expo/virtual/env\");\n  var _zustand = require(_dependencyMap[2], \"zustand\");\n  // Helper to get API URL at runtime\n  var getApiUrl = () => _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || '';\n\n  // Feature settings interface matching backend response\n\n  // Default settings (used as fallback)\n  var DEFAULT_SETTINGS = {\n    show_view_count: true,\n    show_save_count: true,\n    show_listing_stats: true,\n    show_seller_stats: true,\n    show_distance: true,\n    show_time_ago: true,\n    show_negotiable_badge: true,\n    show_featured_badge: true,\n    location_mode: 'region',\n    default_country: 'TZ',\n    allow_country_change: false,\n    currency: 'TZS',\n    currency_symbol: 'TSh',\n    currency_position: 'before'\n  };\n  // Cache duration: 2 minutes\n  var CACHE_DURATION = 2 * 60 * 1000;\n  var useFeatureSettingsStore = (0, _zustand.create)((set, get) => ({\n    settings: DEFAULT_SETTINGS,\n    isLoading: false,\n    error: null,\n    lastFetched: null,\n    fetchSettings: function () {\n      var _ref = (0, _asyncToGenerator.default)(function* () {\n        var state = get();\n\n        // Don't fetch if already loading\n        if (state.isLoading) return;\n\n        // Check cache - don't refetch if recently fetched\n        if (state.lastFetched && Date.now() - state.lastFetched < CACHE_DURATION) {\n          return;\n        }\n        set({\n          isLoading: true,\n          error: null\n        });\n        try {\n          var response = yield fetch(`${getApiUrl()}/api/feature-settings`);\n          if (!response.ok) {\n            throw new Error('Failed to fetch feature settings');\n          }\n          var data = yield response.json();\n          console.log('[FeatureSettingsStore] Received data:', JSON.stringify(data));\n          console.log('[FeatureSettingsStore] location_mode:', data.location_mode);\n          var newSettings = {\n            ...DEFAULT_SETTINGS,\n            ...data\n          };\n          console.log('[FeatureSettingsStore] New settings:', JSON.stringify(newSettings));\n          set({\n            settings: newSettings,\n            isLoading: false,\n            lastFetched: Date.now()\n          });\n        } catch (error) {\n          console.error('Error fetching feature settings:', error);\n          set({\n            isLoading: false,\n            error: error instanceof Error ? error.message : 'Unknown error'\n            // Keep default settings on error\n          });\n        }\n      });\n      return function fetchSettings() {\n        return _ref.apply(this, arguments);\n      };\n    }(),\n    // Helper methods for common checks\n    shouldShowViewCount: () => get().settings.show_view_count,\n    shouldShowSaveCount: () => get().settings.show_save_count,\n    shouldShowDistance: () => get().settings.show_distance,\n    shouldShowTimeAgo: () => get().settings.show_time_ago,\n    shouldShowNegotiableBadge: () => get().settings.show_negotiable_badge,\n    shouldShowFeaturedBadge: () => get().settings.show_featured_badge,\n    formatPrice: price => {\n      var _get$settings = get().settings,\n        currency_symbol = _get$settings.currency_symbol,\n        currency_position = _get$settings.currency_position;\n      var formattedNumber = price.toLocaleString();\n      if (currency_position === 'before') {\n        return `${currency_symbol} ${formattedNumber}`;\n      }\n      return `${formattedNumber} ${currency_symbol}`;\n    }\n  }));\n\n  // Export a hook for easy initialization\n  var useInitializeFeatureSettings = () => {\n    _s();\n    var fetchSettings = useFeatureSettingsStore(state => state.fetchSettings);\n    return fetchSettings;\n  };\n  _s(useInitializeFeatureSettings, \"e86dPHIW+8oHDQAi8m7qymTgkxY=\", false, function () {\n    return [useFeatureSettingsStore];\n  });\n});","lineCount":132,"map":[[13,2,63,0,"Object"],[13,8,63,0],[13,9,63,0,"defineProperty"],[13,23,63,0],[13,24,63,0,"exports"],[13,31,63,0],[14,4,63,0,"enumerable"],[14,14,63,0],[15,4,63,0,"get"],[15,7,63,0],[15,18,63,0,"get"],[15,19,63,0],[16,6,63,0],[16,13,63,0,"useFeatureSettingsStore"],[16,36,63,0],[17,4,63,0],[18,2,63,0],[19,2,131,0,"Object"],[19,8,131,0],[19,9,131,0,"defineProperty"],[19,23,131,0],[19,24,131,0,"exports"],[19,31,131,0],[20,4,131,0,"enumerable"],[20,14,131,0],[21,4,131,0,"get"],[21,7,131,0],[21,18,131,0,"get"],[21,19,131,0],[22,6,131,0],[22,13,131,0,"useInitializeFeatureSettings"],[22,41,131,0],[23,4,131,0],[24,2,131,0],[25,2,134,2],[25,6,134,2,"_babelRuntimeHelpersAsyncToGenerator"],[25,42,134,2],[25,45,134,2,"require"],[25,52,134,2],[25,53,134,2,"_dependencyMap"],[25,67,134,2],[26,2,134,2],[26,6,134,2,"_asyncToGenerator"],[26,23,134,2],[26,26,134,2,"_interopDefault"],[26,41,134,2],[26,42,134,2,"_babelRuntimeHelpersAsyncToGenerator"],[26,78,134,2],[27,2,134,2],[27,6,134,2,"_expoVirtualEnv"],[27,21,134,2],[27,24,134,2,"require"],[27,31,134,2],[27,32,134,2,"_dependencyMap"],[27,46,134,2],[28,2,1,0],[28,6,1,0,"_zustand"],[28,14,1,0],[28,17,1,0,"require"],[28,24,1,0],[28,25,1,0,"_dependencyMap"],[28,39,1,0],[29,2,3,0],[30,2,4,0],[30,6,4,6,"getApiUrl"],[30,15,4,15],[30,18,4,18,"getApiUrl"],[30,19,4,18],[30,24,4,24,"_expoVirtualEnv"],[30,39,4,24],[30,40,4,24,"env"],[30,43,4,24],[30,44,4,24,"EXPO_PUBLIC_BACKEND_URL"],[30,67,4,24],[30,71,4,63],[30,73,4,65],[32,2,6,0],[34,2,25,0],[35,2,26,0],[35,6,26,6,"DEFAULT_SETTINGS"],[35,22,26,39],[35,25,26,42],[36,4,27,2,"show_view_count"],[36,19,27,17],[36,21,27,19],[36,25,27,23],[37,4,28,2,"show_save_count"],[37,19,28,17],[37,21,28,19],[37,25,28,23],[38,4,29,2,"show_listing_stats"],[38,22,29,20],[38,24,29,22],[38,28,29,26],[39,4,30,2,"show_seller_stats"],[39,21,30,19],[39,23,30,21],[39,27,30,25],[40,4,31,2,"show_distance"],[40,17,31,15],[40,19,31,17],[40,23,31,21],[41,4,32,2,"show_time_ago"],[41,17,32,15],[41,19,32,17],[41,23,32,21],[42,4,33,2,"show_negotiable_badge"],[42,25,33,23],[42,27,33,25],[42,31,33,29],[43,4,34,2,"show_featured_badge"],[43,23,34,21],[43,25,34,23],[43,29,34,27],[44,4,35,2,"location_mode"],[44,17,35,15],[44,19,35,17],[44,27,35,25],[45,4,36,2,"default_country"],[45,19,36,17],[45,21,36,19],[45,25,36,23],[46,4,37,2,"allow_country_change"],[46,24,37,22],[46,26,37,24],[46,31,37,29],[47,4,38,2,"currency"],[47,12,38,10],[47,14,38,12],[47,19,38,17],[48,4,39,2,"currency_symbol"],[48,19,39,17],[48,21,39,19],[48,26,39,24],[49,4,40,2,"currency_position"],[49,21,40,19],[49,23,40,21],[50,2,41,0],[50,3,41,1],[51,2,60,0],[52,2,61,0],[52,6,61,6,"CACHE_DURATION"],[52,20,61,20],[52,23,61,23],[52,24,61,24],[52,27,61,27],[52,29,61,29],[52,32,61,32],[52,36,61,36],[53,2,63,7],[53,6,63,13,"useFeatureSettingsStore"],[53,29,63,36],[53,32,63,39],[53,36,63,39,"create"],[53,44,63,45],[53,45,63,45,"create"],[53,51,63,45],[53,53,63,68],[53,54,63,69,"set"],[53,57,63,72],[53,59,63,74,"get"],[53,62,63,77],[53,68,63,83],[54,4,64,2,"settings"],[54,12,64,10],[54,14,64,12,"DEFAULT_SETTINGS"],[54,30,64,28],[55,4,65,2,"isLoading"],[55,13,65,11],[55,15,65,13],[55,20,65,18],[56,4,66,2,"error"],[56,9,66,7],[56,11,66,9],[56,15,66,13],[57,4,67,2,"lastFetched"],[57,15,67,13],[57,17,67,15],[57,21,67,19],[58,4,69,2,"fetchSettings"],[58,17,69,15],[59,6,69,15],[59,10,69,15,"_ref"],[59,14,69,15],[59,21,69,15,"_asyncToGenerator"],[59,38,69,15],[59,39,69,15,"default"],[59,46,69,15],[59,48,69,17],[59,61,69,29],[60,8,70,4],[60,12,70,10,"state"],[60,17,70,15],[60,20,70,18,"get"],[60,23,70,21],[60,24,70,22],[60,25,70,23],[62,8,72,4],[63,8,73,4],[63,12,73,8,"state"],[63,17,73,13],[63,18,73,14,"isLoading"],[63,27,73,23],[63,29,73,25],[65,8,75,4],[66,8,76,4],[66,12,76,8,"state"],[66,17,76,13],[66,18,76,14,"lastFetched"],[66,29,76,25],[66,33,76,29,"Date"],[66,37,76,33],[66,38,76,34,"now"],[66,41,76,37],[66,42,76,38],[66,43,76,39],[66,46,76,42,"state"],[66,51,76,47],[66,52,76,48,"lastFetched"],[66,63,76,59],[66,66,76,62,"CACHE_DURATION"],[66,80,76,76],[66,82,76,78],[67,10,77,6],[68,8,78,4],[69,8,80,4,"set"],[69,11,80,7],[69,12,80,8],[70,10,80,10,"isLoading"],[70,19,80,19],[70,21,80,21],[70,25,80,25],[71,10,80,27,"error"],[71,15,80,32],[71,17,80,34],[72,8,80,39],[72,9,80,40],[72,10,80,41],[73,8,82,4],[73,12,82,8],[74,10,83,6],[74,14,83,12,"response"],[74,22,83,20],[74,31,83,29,"fetch"],[74,36,83,34],[74,37,83,35],[74,40,83,38,"getApiUrl"],[74,49,83,47],[74,50,83,48],[74,51,83,49],[74,74,83,72],[74,75,83,73],[75,10,85,6],[75,14,85,10],[75,15,85,11,"response"],[75,23,85,19],[75,24,85,20,"ok"],[75,26,85,22],[75,28,85,24],[76,12,86,8],[76,18,86,14],[76,22,86,18,"Error"],[76,27,86,23],[76,28,86,24],[76,62,86,58],[76,63,86,59],[77,10,87,6],[78,10,89,6],[78,14,89,12,"data"],[78,18,89,16],[78,27,89,25,"response"],[78,35,89,33],[78,36,89,34,"json"],[78,40,89,38],[78,41,89,39],[78,42,89,40],[79,10,90,6,"console"],[79,17,90,13],[79,18,90,14,"log"],[79,21,90,17],[79,22,90,18],[79,61,90,57],[79,63,90,59,"JSON"],[79,67,90,63],[79,68,90,64,"stringify"],[79,77,90,73],[79,78,90,74,"data"],[79,82,90,78],[79,83,90,79],[79,84,90,80],[80,10,91,6,"console"],[80,17,91,13],[80,18,91,14,"log"],[80,21,91,17],[80,22,91,18],[80,61,91,57],[80,63,91,59,"data"],[80,67,91,63],[80,68,91,64,"location_mode"],[80,81,91,77],[80,82,91,78],[81,10,93,6],[81,14,93,12,"newSettings"],[81,25,93,23],[81,28,93,26],[82,12,93,28],[82,15,93,31,"DEFAULT_SETTINGS"],[82,31,93,47],[83,12,93,49],[83,15,93,52,"data"],[84,10,93,57],[84,11,93,58],[85,10,94,6,"console"],[85,17,94,13],[85,18,94,14,"log"],[85,21,94,17],[85,22,94,18],[85,60,94,56],[85,62,94,58,"JSON"],[85,66,94,62],[85,67,94,63,"stringify"],[85,76,94,72],[85,77,94,73,"newSettings"],[85,88,94,84],[85,89,94,85],[85,90,94,86],[86,10,96,6,"set"],[86,13,96,9],[86,14,96,10],[87,12,97,8,"settings"],[87,20,97,16],[87,22,97,18,"newSettings"],[87,33,97,29],[88,12,98,8,"isLoading"],[88,21,98,17],[88,23,98,19],[88,28,98,24],[89,12,99,8,"lastFetched"],[89,23,99,19],[89,25,99,21,"Date"],[89,29,99,25],[89,30,99,26,"now"],[89,33,99,29],[89,34,99,30],[90,10,100,6],[90,11,100,7],[90,12,100,8],[91,8,101,4],[91,9,101,5],[91,10,101,6],[91,17,101,13,"error"],[91,22,101,18],[91,24,101,20],[92,10,102,6,"console"],[92,17,102,13],[92,18,102,14,"error"],[92,23,102,19],[92,24,102,20],[92,58,102,54],[92,60,102,56,"error"],[92,65,102,61],[92,66,102,62],[93,10,103,6,"set"],[93,13,103,9],[93,14,103,10],[94,12,104,8,"isLoading"],[94,21,104,17],[94,23,104,19],[94,28,104,24],[95,12,105,8,"error"],[95,17,105,13],[95,19,105,15,"error"],[95,24,105,20],[95,36,105,32,"Error"],[95,41,105,37],[95,44,105,40,"error"],[95,49,105,45],[95,50,105,46,"message"],[95,57,105,53],[95,60,105,56],[96,12,106,8],[97,10,107,6],[97,11,107,7],[97,12,107,8],[98,8,108,4],[99,6,109,2],[99,7,109,3],[100,6,109,3],[100,22,69,2,"fetchSettings"],[100,35,69,15,"fetchSettings"],[100,36,69,15],[101,8,69,15],[101,15,69,15,"_ref"],[101,19,69,15],[101,20,69,15,"apply"],[101,25,69,15],[101,32,69,15,"arguments"],[101,41,69,15],[102,6,69,15],[103,4,69,15],[103,7,109,3],[104,4,111,2],[105,4,112,2,"shouldShowViewCount"],[105,23,112,21],[105,25,112,23,"shouldShowViewCount"],[105,26,112,23],[105,31,112,29,"get"],[105,34,112,32],[105,35,112,33],[105,36,112,34],[105,37,112,35,"settings"],[105,45,112,43],[105,46,112,44,"show_view_count"],[105,61,112,59],[106,4,113,2,"shouldShowSaveCount"],[106,23,113,21],[106,25,113,23,"shouldShowSaveCount"],[106,26,113,23],[106,31,113,29,"get"],[106,34,113,32],[106,35,113,33],[106,36,113,34],[106,37,113,35,"settings"],[106,45,113,43],[106,46,113,44,"show_save_count"],[106,61,113,59],[107,4,114,2,"shouldShowDistance"],[107,22,114,20],[107,24,114,22,"shouldShowDistance"],[107,25,114,22],[107,30,114,28,"get"],[107,33,114,31],[107,34,114,32],[107,35,114,33],[107,36,114,34,"settings"],[107,44,114,42],[107,45,114,43,"show_distance"],[107,58,114,56],[108,4,115,2,"shouldShowTimeAgo"],[108,21,115,19],[108,23,115,21,"shouldShowTimeAgo"],[108,24,115,21],[108,29,115,27,"get"],[108,32,115,30],[108,33,115,31],[108,34,115,32],[108,35,115,33,"settings"],[108,43,115,41],[108,44,115,42,"show_time_ago"],[108,57,115,55],[109,4,116,2,"shouldShowNegotiableBadge"],[109,29,116,27],[109,31,116,29,"shouldShowNegotiableBadge"],[109,32,116,29],[109,37,116,35,"get"],[109,40,116,38],[109,41,116,39],[109,42,116,40],[109,43,116,41,"settings"],[109,51,116,49],[109,52,116,50,"show_negotiable_badge"],[109,73,116,71],[110,4,117,2,"shouldShowFeaturedBadge"],[110,27,117,25],[110,29,117,27,"shouldShowFeaturedBadge"],[110,30,117,27],[110,35,117,33,"get"],[110,38,117,36],[110,39,117,37],[110,40,117,38],[110,41,117,39,"settings"],[110,49,117,47],[110,50,117,48,"show_featured_badge"],[110,69,117,67],[111,4,119,2,"formatPrice"],[111,15,119,13],[111,17,119,16,"price"],[111,22,119,29],[111,26,119,34],[112,6,120,4],[112,10,120,4,"_get$settings"],[112,23,120,4],[112,26,120,51,"get"],[112,29,120,54],[112,30,120,55],[112,31,120,56],[112,32,120,57,"settings"],[112,40,120,65],[113,8,120,12,"currency_symbol"],[113,23,120,27],[113,26,120,27,"_get$settings"],[113,39,120,27],[113,40,120,12,"currency_symbol"],[113,55,120,27],[114,8,120,29,"currency_position"],[114,25,120,46],[114,28,120,46,"_get$settings"],[114,41,120,46],[114,42,120,29,"currency_position"],[114,59,120,46],[115,6,121,4],[115,10,121,10,"formattedNumber"],[115,25,121,25],[115,28,121,28,"price"],[115,33,121,33],[115,34,121,34,"toLocaleString"],[115,48,121,48],[115,49,121,49],[115,50,121,50],[116,6,123,4],[116,10,123,8,"currency_position"],[116,27,123,25],[116,32,123,30],[116,40,123,38],[116,42,123,40],[117,8,124,6],[117,15,124,13],[117,18,124,16,"currency_symbol"],[117,33,124,31],[117,37,124,35,"formattedNumber"],[117,52,124,50],[117,54,124,52],[118,6,125,4],[119,6,126,4],[119,13,126,11],[119,16,126,14,"formattedNumber"],[119,31,126,29],[119,35,126,33,"currency_symbol"],[119,50,126,48],[119,52,126,50],[120,4,127,2],[121,2,128,0],[121,3,128,1],[121,4,128,2],[121,5,128,3],[123,2,130,0],[124,2,131,7],[124,6,131,13,"useInitializeFeatureSettings"],[124,34,131,41],[124,37,131,44,"useInitializeFeatureSettings"],[124,38,131,44],[124,43,131,50],[125,4,131,50,"_s"],[125,6,131,50],[126,4,132,2],[126,8,132,8,"fetchSettings"],[126,21,132,21],[126,24,132,24,"useFeatureSettingsStore"],[126,47,132,47],[126,48,132,48,"state"],[126,53,132,53],[126,57,132,57,"state"],[126,62,132,62],[126,63,132,63,"fetchSettings"],[126,76,132,76],[126,77,132,77],[127,4,133,2],[127,11,133,9,"fetchSettings"],[127,24,133,22],[128,2,134,0],[128,3,134,1],[129,2,134,2,"_s"],[129,4,134,2],[129,5,131,13,"useInitializeFeatureSettings"],[129,33,131,41],[130,4,131,41],[130,12,132,24,"useFeatureSettingsStore"],[130,35,132,47],[131,2,132,47],[132,0,132,47],[132,3]],"functionMap":{"names":["<global>","getApiUrl","create$argument_0","fetchSettings","shouldShowViewCount","shouldShowSaveCount","shouldShowDistance","shouldShowTimeAgo","shouldShowNegotiableBadge","shouldShowFeaturedBadge","formatPrice","useInitializeFeatureSettings","useFeatureSettingsStore$argument_0"],"mappings":"AAA;kBCG,+CD;oEE2D;iBCM;GDwC;uBEG,oCF;uBGC,oCH;sBIC,kCJ;qBKC,kCL;6BMC,0CN;2BOC,wCP;eQE;GRQ;EFC;4CWG;gDCC,4BD;CXE"},"hasCjsExports":false},"type":"js/module"}]}