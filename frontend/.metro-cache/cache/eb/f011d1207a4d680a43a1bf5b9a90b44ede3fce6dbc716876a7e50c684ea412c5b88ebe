{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":145},"end":{"line":7,"column":65,"index":210}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../utils/cacheManager","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":211},"end":{"line":8,"column":82,"index":293}}],"key":"khlnndGTcOlkIW6B06Jlcfzuf30=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  /**\n   * useCacheFirst Hook\n   * React hook for cache-first data fetching pattern\n   * Eliminates loading states by showing cached data instantly\n   */\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  exports.useCacheFirst = useCacheFirst;\n  exports.useCacheFirstList = useCacheFirstList;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _utilsCacheManager = require(_dependencyMap[1], \"../utils/cacheManager\");\n  function useCacheFirst({\n    cacheKey,\n    fetcher,\n    fallbackData,\n    deps = [],\n    enabled = true,\n    onFreshData\n  }) {\n    _s();\n    // Try to get cached data synchronously for instant render\n    const cachedData = (0, _utilsCacheManager.getCachedSync)(cacheKey);\n\n    // Initialize state with cached data or fallback\n    const [data, setDataState] = (0, _react.useState)(cachedData ?? fallbackData);\n    const [isFetching, setIsFetching] = (0, _react.useState)(false);\n    const [isFromCache, setIsFromCache] = (0, _react.useState)(cachedData !== null);\n    const [error, setError] = (0, _react.useState)(null);\n\n    // Track if component is mounted\n    const isMounted = (0, _react.useRef)(true);\n\n    // Track if initial fetch has been done\n    const hasInitialFetch = (0, _react.useRef)(false);\n\n    // Fetch fresh data\n    const fetchFreshData = (0, _react.useCallback)(async () => {\n      if (!enabled) return;\n      setIsFetching(true);\n      setError(null);\n      try {\n        const freshData = await fetcher();\n        if (isMounted.current) {\n          setDataState(freshData);\n          setIsFromCache(false);\n          // Update cache\n          (0, _utilsCacheManager.setCacheSync)(cacheKey, freshData);\n          // Also update async cache for native\n          _utilsCacheManager.CacheManager.setCache(cacheKey, freshData);\n          // Callback\n          onFreshData?.(freshData);\n        }\n      } catch (err) {\n        if (isMounted.current) {\n          setError(err);\n          // Don't clear data on error - keep showing cached/current data\n          console.warn('[useCacheFirst] Fetch error:', err);\n        }\n      } finally {\n        if (isMounted.current) {\n          setIsFetching(false);\n        }\n      }\n    }, [cacheKey, fetcher, enabled, onFreshData]);\n\n    // Manual refresh\n    const refresh = (0, _react.useCallback)(async () => {\n      await fetchFreshData();\n    }, [fetchFreshData]);\n\n    // Set data with optimistic update\n    const setData = (0, _react.useCallback)(update => {\n      setDataState(prev => {\n        const newData = typeof update === 'function' ? update(prev) : update;\n        // Update cache immediately\n        (0, _utilsCacheManager.setCacheSync)(cacheKey, newData);\n        _utilsCacheManager.CacheManager.setCache(cacheKey, newData);\n        return newData;\n      });\n    }, [cacheKey]);\n\n    // Initial fetch and refetch on deps change\n    (0, _react.useEffect)(() => {\n      isMounted.current = true;\n\n      // If we have cached data, fetch in background\n      // If no cached data, fetch immediately\n      if (enabled) {\n        fetchFreshData();\n      }\n      return () => {\n        isMounted.current = false;\n      };\n    }, [enabled, ...deps]);\n\n    // Load cached data on mount (for native where sync read doesn't work)\n    (0, _react.useEffect)(() => {\n      if (!cachedData && enabled) {\n        _utilsCacheManager.CacheManager.getCached(cacheKey, {}).then(result => {\n          if (result && isMounted.current && !hasInitialFetch.current) {\n            setDataState(result.data);\n            setIsFromCache(true);\n          }\n        });\n      }\n    }, []);\n    return {\n      data,\n      isFetching,\n      isFromCache,\n      error,\n      refresh,\n      setData\n    };\n  }\n\n  /**\n   * Simplified hook for common list data pattern\n   */\n  _s(useCacheFirst, \"ggLorxDKgBFXTMeB8NRBZ4sx5E4=\");\n  function useCacheFirstList({\n    cacheKey,\n    fetcher,\n    deps = [],\n    enabled = true\n  }) {\n    _s2();\n    return useCacheFirst({\n      cacheKey,\n      fetcher,\n      fallbackData: [],\n      deps,\n      enabled\n    });\n  }\n  _s2(useCacheFirstList, \"r04XSVzX2t/1VBRS7NdnIxEdQnM=\", false, function () {\n    return [useCacheFirst];\n  });\n  var _default = useCacheFirst;\n});","lineCount":152,"map":[[6,2,1,0],[7,0,2,0],[8,0,3,0],[9,0,4,0],[10,0,5,0],[11,2,1,0,"Object"],[11,8,1,0],[11,9,1,0,"defineProperty"],[11,23,1,0],[11,24,1,0,"exports"],[11,31,1,0],[12,4,1,0,"value"],[12,9,1,0],[13,2,1,0],[14,2,172,0,"Object"],[14,8,172,0],[14,9,172,0,"defineProperty"],[14,23,172,0],[14,24,172,0,"exports"],[14,31,172,0],[15,4,172,0,"enumerable"],[15,14,172,0],[16,4,172,0,"get"],[16,7,172,0],[16,18,172,0,"get"],[16,19,172,0],[17,6,172,0],[17,13,172,0,"_default"],[17,21,172,0],[18,4,172,0],[19,2,172,0],[20,2,40,0,"exports"],[20,9,40,0],[20,10,40,0,"useCacheFirst"],[20,23,40,0],[20,26,40,0,"useCacheFirst"],[20,39,40,0],[21,2,152,0,"exports"],[21,9,152,0],[21,10,152,0,"useCacheFirstList"],[21,27,152,0],[21,30,152,0,"useCacheFirstList"],[21,47,152,0],[22,2,7,0],[22,6,7,0,"_react"],[22,12,7,0],[22,15,7,0,"require"],[22,22,7,0],[22,23,7,0,"_dependencyMap"],[22,37,7,0],[23,2,8,0],[23,6,8,0,"_utilsCacheManager"],[23,24,8,0],[23,27,8,0,"require"],[23,34,8,0],[23,35,8,0,"_dependencyMap"],[23,49,8,0],[24,2,40,7],[24,11,40,16,"useCacheFirst"],[24,24,40,29,"useCacheFirst"],[24,25,40,33],[25,4,41,2,"cacheKey"],[25,12,41,10],[26,4,42,2,"fetcher"],[26,11,42,9],[27,4,43,2,"fallbackData"],[27,16,43,14],[28,4,44,2,"deps"],[28,8,44,6],[28,11,44,9],[28,13,44,11],[29,4,45,2,"enabled"],[29,11,45,9],[29,14,45,12],[29,18,45,16],[30,4,46,2,"onFreshData"],[31,2,47,25],[31,3,47,26],[31,5,47,52],[32,4,47,52,"_s"],[32,6,47,52],[33,4,48,2],[34,4,49,2],[34,10,49,8,"cachedData"],[34,20,49,18],[34,23,49,21],[34,27,49,21,"getCachedSync"],[34,45,49,34],[34,46,49,34,"getCachedSync"],[34,59,49,34],[34,61,49,38,"cacheKey"],[34,69,49,46],[34,70,49,47],[36,4,51,2],[37,4,52,2],[37,10,52,8],[37,11,52,9,"data"],[37,15,52,13],[37,17,52,15,"setDataState"],[37,29,52,27],[37,30,52,28],[37,33,52,31],[37,37,52,31,"useState"],[37,43,52,39],[37,44,52,39,"useState"],[37,52,52,39],[37,54,52,43,"cachedData"],[37,64,52,53],[37,68,52,57,"fallbackData"],[37,80,52,69],[37,81,52,70],[38,4,53,2],[38,10,53,8],[38,11,53,9,"isFetching"],[38,21,53,19],[38,23,53,21,"setIsFetching"],[38,36,53,34],[38,37,53,35],[38,40,53,38],[38,44,53,38,"useState"],[38,50,53,46],[38,51,53,46,"useState"],[38,59,53,46],[38,61,53,47],[38,66,53,52],[38,67,53,53],[39,4,54,2],[39,10,54,8],[39,11,54,9,"isFromCache"],[39,22,54,20],[39,24,54,22,"setIsFromCache"],[39,38,54,36],[39,39,54,37],[39,42,54,40],[39,46,54,40,"useState"],[39,52,54,48],[39,53,54,48,"useState"],[39,61,54,48],[39,63,54,49,"cachedData"],[39,73,54,59],[39,78,54,64],[39,82,54,68],[39,83,54,69],[40,4,55,2],[40,10,55,8],[40,11,55,9,"error"],[40,16,55,14],[40,18,55,16,"setError"],[40,26,55,24],[40,27,55,25],[40,30,55,28],[40,34,55,28,"useState"],[40,40,55,36],[40,41,55,36,"useState"],[40,49,55,36],[40,51,55,51],[40,55,55,55],[40,56,55,56],[42,4,57,2],[43,4,58,2],[43,10,58,8,"isMounted"],[43,19,58,17],[43,22,58,20],[43,26,58,20,"useRef"],[43,32,58,26],[43,33,58,26,"useRef"],[43,39,58,26],[43,41,58,27],[43,45,58,31],[43,46,58,32],[45,4,60,2],[46,4,61,2],[46,10,61,8,"hasInitialFetch"],[46,25,61,23],[46,28,61,26],[46,32,61,26,"useRef"],[46,38,61,32],[46,39,61,32,"useRef"],[46,45,61,32],[46,47,61,33],[46,52,61,38],[46,53,61,39],[48,4,63,2],[49,4,64,2],[49,10,64,8,"fetchFreshData"],[49,24,64,22],[49,27,64,25],[49,31,64,25,"useCallback"],[49,37,64,36],[49,38,64,36,"useCallback"],[49,49,64,36],[49,51,64,37],[49,63,64,49],[50,6,65,4],[50,10,65,8],[50,11,65,9,"enabled"],[50,18,65,16],[50,20,65,18],[51,6,67,4,"setIsFetching"],[51,19,67,17],[51,20,67,18],[51,24,67,22],[51,25,67,23],[52,6,68,4,"setError"],[52,14,68,12],[52,15,68,13],[52,19,68,17],[52,20,68,18],[53,6,70,4],[53,10,70,8],[54,8,71,6],[54,14,71,12,"freshData"],[54,23,71,21],[54,26,71,24],[54,32,71,30,"fetcher"],[54,39,71,37],[54,40,71,38],[54,41,71,39],[55,8,73,6],[55,12,73,10,"isMounted"],[55,21,73,19],[55,22,73,20,"current"],[55,29,73,27],[55,31,73,29],[56,10,74,8,"setDataState"],[56,22,74,20],[56,23,74,21,"freshData"],[56,32,74,30],[56,33,74,31],[57,10,75,8,"setIsFromCache"],[57,24,75,22],[57,25,75,23],[57,30,75,28],[57,31,75,29],[58,10,76,8],[59,10,77,8],[59,14,77,8,"setCacheSync"],[59,32,77,20],[59,33,77,20,"setCacheSync"],[59,45,77,20],[59,47,77,21,"cacheKey"],[59,55,77,29],[59,57,77,31,"freshData"],[59,66,77,40],[59,67,77,41],[60,10,78,8],[61,10,79,8,"CacheManager"],[61,28,79,20],[61,29,79,20,"CacheManager"],[61,41,79,20],[61,42,79,21,"setCache"],[61,50,79,29],[61,51,79,30,"cacheKey"],[61,59,79,38],[61,61,79,40,"freshData"],[61,70,79,49],[61,71,79,50],[62,10,80,8],[63,10,81,8,"onFreshData"],[63,21,81,19],[63,24,81,22,"freshData"],[63,33,81,31],[63,34,81,32],[64,8,82,6],[65,6,83,4],[65,7,83,5],[65,8,83,6],[65,15,83,13,"err"],[65,18,83,16],[65,20,83,18],[66,8,84,6],[66,12,84,10,"isMounted"],[66,21,84,19],[66,22,84,20,"current"],[66,29,84,27],[66,31,84,29],[67,10,85,8,"setError"],[67,18,85,16],[67,19,85,17,"err"],[67,22,85,29],[67,23,85,30],[68,10,86,8],[69,10,87,8,"console"],[69,17,87,15],[69,18,87,16,"warn"],[69,22,87,20],[69,23,87,21],[69,53,87,51],[69,55,87,53,"err"],[69,58,87,56],[69,59,87,57],[70,8,88,6],[71,6,89,4],[71,7,89,5],[71,16,89,14],[72,8,90,6],[72,12,90,10,"isMounted"],[72,21,90,19],[72,22,90,20,"current"],[72,29,90,27],[72,31,90,29],[73,10,91,8,"setIsFetching"],[73,23,91,21],[73,24,91,22],[73,29,91,27],[73,30,91,28],[74,8,92,6],[75,6,93,4],[76,4,94,2],[76,5,94,3],[76,7,94,5],[76,8,94,6,"cacheKey"],[76,16,94,14],[76,18,94,16,"fetcher"],[76,25,94,23],[76,27,94,25,"enabled"],[76,34,94,32],[76,36,94,34,"onFreshData"],[76,47,94,45],[76,48,94,46],[76,49,94,47],[78,4,96,2],[79,4,97,2],[79,10,97,8,"refresh"],[79,17,97,15],[79,20,97,18],[79,24,97,18,"useCallback"],[79,30,97,29],[79,31,97,29,"useCallback"],[79,42,97,29],[79,44,97,30],[79,56,97,42],[80,6,98,4],[80,12,98,10,"fetchFreshData"],[80,26,98,24],[80,27,98,25],[80,28,98,26],[81,4,99,2],[81,5,99,3],[81,7,99,5],[81,8,99,6,"fetchFreshData"],[81,22,99,20],[81,23,99,21],[81,24,99,22],[83,4,101,2],[84,4,102,2],[84,10,102,8,"setData"],[84,17,102,15],[84,20,102,18],[84,24,102,18,"useCallback"],[84,30,102,29],[84,31,102,29,"useCallback"],[84,42,102,29],[84,44,102,31,"update"],[84,50,102,59],[84,54,102,64],[85,6,103,4,"setDataState"],[85,18,103,16],[85,19,103,17,"prev"],[85,23,103,21],[85,27,103,25],[86,8,104,6],[86,14,104,12,"newData"],[86,21,104,19],[86,24,104,22],[86,31,104,29,"update"],[86,37,104,35],[86,42,104,40],[86,52,104,50],[86,55,104,54,"update"],[86,61,104,60],[86,62,104,80,"prev"],[86,66,104,84],[86,67,104,85],[86,70,104,88,"update"],[86,76,104,94],[87,8,105,6],[88,8,106,6],[88,12,106,6,"setCacheSync"],[88,30,106,18],[88,31,106,18,"setCacheSync"],[88,43,106,18],[88,45,106,19,"cacheKey"],[88,53,106,27],[88,55,106,29,"newData"],[88,62,106,36],[88,63,106,37],[89,8,107,6,"CacheManager"],[89,26,107,18],[89,27,107,18,"CacheManager"],[89,39,107,18],[89,40,107,19,"setCache"],[89,48,107,27],[89,49,107,28,"cacheKey"],[89,57,107,36],[89,59,107,38,"newData"],[89,66,107,45],[89,67,107,46],[90,8,108,6],[90,15,108,13,"newData"],[90,22,108,20],[91,6,109,4],[91,7,109,5],[91,8,109,6],[92,4,110,2],[92,5,110,3],[92,7,110,5],[92,8,110,6,"cacheKey"],[92,16,110,14],[92,17,110,15],[92,18,110,16],[94,4,112,2],[95,4,113,2],[95,8,113,2,"useEffect"],[95,14,113,11],[95,15,113,11,"useEffect"],[95,24,113,11],[95,26,113,12],[95,32,113,18],[96,6,114,4,"isMounted"],[96,15,114,13],[96,16,114,14,"current"],[96,23,114,21],[96,26,114,24],[96,30,114,28],[98,6,116,4],[99,6,117,4],[100,6,118,4],[100,10,118,8,"enabled"],[100,17,118,15],[100,19,118,17],[101,8,119,6,"fetchFreshData"],[101,22,119,20],[101,23,119,21],[101,24,119,22],[102,6,120,4],[103,6,122,4],[103,13,122,11],[103,19,122,17],[104,8,123,6,"isMounted"],[104,17,123,15],[104,18,123,16,"current"],[104,25,123,23],[104,28,123,26],[104,33,123,31],[105,6,124,4],[105,7,124,5],[106,4,125,2],[106,5,125,3],[106,7,125,5],[106,8,125,6,"enabled"],[106,15,125,13],[106,17,125,15],[106,20,125,18,"deps"],[106,24,125,22],[106,25,125,23],[106,26,125,24],[108,4,127,2],[109,4,128,2],[109,8,128,2,"useEffect"],[109,14,128,11],[109,15,128,11,"useEffect"],[109,24,128,11],[109,26,128,12],[109,32,128,18],[110,6,129,4],[110,10,129,8],[110,11,129,9,"cachedData"],[110,21,129,19],[110,25,129,23,"enabled"],[110,32,129,30],[110,34,129,32],[111,8,130,6,"CacheManager"],[111,26,130,18],[111,27,130,18,"CacheManager"],[111,39,130,18],[111,40,130,19,"getCached"],[111,49,130,28],[111,50,130,32,"cacheKey"],[111,58,130,40],[111,60,130,42],[111,61,130,43],[111,62,130,44],[111,63,130,45],[111,64,130,46,"then"],[111,68,130,50],[111,69,130,51,"result"],[111,75,130,57],[111,79,130,61],[112,10,131,8],[112,14,131,12,"result"],[112,20,131,18],[112,24,131,22,"isMounted"],[112,33,131,31],[112,34,131,32,"current"],[112,41,131,39],[112,45,131,43],[112,46,131,44,"hasInitialFetch"],[112,61,131,59],[112,62,131,60,"current"],[112,69,131,67],[112,71,131,69],[113,12,132,10,"setDataState"],[113,24,132,22],[113,25,132,23,"result"],[113,31,132,29],[113,32,132,30,"data"],[113,36,132,34],[113,37,132,35],[114,12,133,10,"setIsFromCache"],[114,26,133,24],[114,27,133,25],[114,31,133,29],[114,32,133,30],[115,10,134,8],[116,8,135,6],[116,9,135,7],[116,10,135,8],[117,6,136,4],[118,4,137,2],[118,5,137,3],[118,7,137,5],[118,9,137,7],[118,10,137,8],[119,4,139,2],[119,11,139,9],[120,6,140,4,"data"],[120,10,140,8],[121,6,141,4,"isFetching"],[121,16,141,14],[122,6,142,4,"isFromCache"],[122,17,142,15],[123,6,143,4,"error"],[123,11,143,9],[124,6,144,4,"refresh"],[124,13,144,11],[125,6,145,4,"setData"],[126,4,146,2],[126,5,146,3],[127,2,147,0],[129,2,149,0],[130,0,150,0],[131,0,151,0],[132,2,149,0,"_s"],[132,4,149,0],[132,5,40,16,"useCacheFirst"],[132,18,40,29],[133,2,152,7],[133,11,152,16,"useCacheFirstList"],[133,28,152,33,"useCacheFirstList"],[133,29,152,37],[134,4,153,2,"cacheKey"],[134,12,153,10],[135,4,154,2,"fetcher"],[135,11,154,9],[136,4,155,2,"deps"],[136,8,155,6],[136,11,155,9],[136,13,155,11],[137,4,156,2,"enabled"],[137,11,156,9],[137,14,156,12],[138,2,162,0],[138,3,162,1],[138,5,162,3],[139,4,162,3,"_s2"],[139,7,162,3],[140,4,163,2],[140,11,163,9,"useCacheFirst"],[140,24,163,22],[140,25,163,28],[141,6,164,4,"cacheKey"],[141,14,164,12],[142,6,165,4,"fetcher"],[142,13,165,11],[143,6,166,4,"fallbackData"],[143,18,166,16],[143,20,166,18],[143,22,166,20],[144,6,167,4,"deps"],[144,10,167,8],[145,6,168,4,"enabled"],[146,4,169,2],[146,5,169,3],[146,6,169,4],[147,2,170,0],[148,2,170,1,"_s2"],[148,5,170,1],[148,6,152,16,"useCacheFirstList"],[148,23,152,33],[149,4,152,33],[149,12,163,9,"useCacheFirst"],[149,25,163,22],[150,2,163,22],[151,2,172,0],[151,6,172,0,"_default"],[151,14,172,0],[151,17,172,15,"useCacheFirst"],[151,30,172,28],[152,0,172,29],[152,3]],"functionMap":{"names":["<global>","useCacheFirst","fetchFreshData","refresh","setData","setDataState$argument_0","useEffect$argument_0","<anonymous>","CacheManager.getCached.then$argument_0","useCacheFirstList"],"mappings":"AAA;OCuC;qCCwB;GD8B;8BEG;GFE;8BGG;iBCC;KDM;GHC;YKG;WCS;KDE;GLC;YKG;mDEE;OFK;GLE;CDU;OSK;CTkB"},"hasCjsExports":false},"type":"js/module"}]}