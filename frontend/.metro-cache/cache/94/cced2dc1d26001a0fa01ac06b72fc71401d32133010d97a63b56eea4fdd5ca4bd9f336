{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"expo-secure-store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":49,"index":83}}],"key":"BU2XtfznZ4PiVldqd/oueHCCaLo=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":125},"end":{"line":4,"column":69,"index":194}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../utils/api","data":{"asyncType":"async","isESMImport":true,"locs":[{"start":{"line":91,"column":39,"index":2598},"end":{"line":91,"column":61,"index":2620}}],"key":"RoBEA1PvFV6zRWDxBbgQRE0Ixsw=","exportNames":["*"],"imports":1}},{"name":"expo/internal/async-require-module","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":91,"column":33,"index":2592},"end":{"line":91,"column":61,"index":2620}}],"key":"y8mhXL4zKvSVvgnacXXOn0UU+QQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useAuthStore\", {\n    enumerable: true,\n    get: function () {\n      return useAuthStore;\n    }\n  });\n  Object.defineProperty(exports, \"saveUserData\", {\n    enumerable: true,\n    get: function () {\n      return saveUserData;\n    }\n  });\n  var _zustand = require(_dependencyMap[0], \"zustand\");\n  var _expoSecureStore = require(_dependencyMap[1], \"expo-secure-store\");\n  var SecureStore = _interopNamespace(_expoSecureStore);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[2], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[3], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  const TOKEN_KEY = 'session_token';\n  const USER_KEY = 'user_data';\n  const storage = {\n    async getItem(key) {\n      if (Platform.default.OS === 'web') {\n        return AsyncStorage.default.getItem(key);\n      }\n      return SecureStore.getItemAsync(key);\n    },\n    async setItem(key, value) {\n      if (Platform.default.OS === 'web') {\n        return AsyncStorage.default.setItem(key, value);\n      }\n      return SecureStore.setItemAsync(key, value);\n    },\n    async removeItem(key) {\n      if (Platform.default.OS === 'web') {\n        return AsyncStorage.default.removeItem(key);\n      }\n      return SecureStore.deleteItemAsync(key);\n    }\n  };\n  const useAuthStore = (0, _zustand.create)((set, get) => ({\n    user: null,\n    token: null,\n    isLoading: true,\n    isAuthenticated: false,\n    setUser: user => set({\n      user,\n      isAuthenticated: !!user\n    }),\n    setToken: async token => {\n      if (token) {\n        await storage.setItem(TOKEN_KEY, token);\n      } else {\n        await storage.removeItem(TOKEN_KEY);\n      }\n      // Also set isAuthenticated when we have a token\n      set({\n        token,\n        isAuthenticated: !!token\n      });\n    },\n    loadStoredAuth: async () => {\n      try {\n        // Add timeout to prevent hanging\n        const timeoutPromise = new Promise((_, reject) => setTimeout(() => reject(new Error('Timeout')), 3000));\n        const loadPromise = async () => {\n          const token = await storage.getItem(TOKEN_KEY);\n          const userJson = await storage.getItem(USER_KEY);\n          if (token && userJson) {\n            const user = JSON.parse(userJson);\n            set({\n              user,\n              token,\n              isAuthenticated: true,\n              isLoading: false\n            });\n          } else {\n            set({\n              isLoading: false\n            });\n          }\n        };\n        await Promise.race([loadPromise(), timeoutPromise]);\n      } catch (error) {\n        console.error('Error loading auth:', error);\n        set({\n          isLoading: false\n        });\n      }\n    },\n    logout: async () => {\n      try {\n        // Call backend logout API to clear server-side session\n        const token = get().token;\n        if (token) {\n          const {\n            default: api\n          } = await require(_dependencyMap[5], \"expo/internal/async-require-module\")(_dependencyMap[4], _dependencyMap.paths, \"../utils/api\");\n          await api.post('/auth/logout');\n        }\n      } catch (error) {\n        console.error('Error calling logout API:', error);\n        // Continue with local logout even if API call fails\n      }\n\n      // Clear local storage\n      await storage.removeItem(TOKEN_KEY);\n      await storage.removeItem(USER_KEY);\n      set({\n        user: null,\n        token: null,\n        isAuthenticated: false\n      });\n    }\n  }));\n  const saveUserData = async user => {\n    await storage.setItem(USER_KEY, JSON.stringify(user));\n  };\n});","lineCount":146,"map":[[27,2,42,0,"Object"],[27,8,42,0],[27,9,42,0,"defineProperty"],[27,23,42,0],[27,24,42,0,"exports"],[27,31,42,0],[28,4,42,0,"enumerable"],[28,14,42,0],[29,4,42,0,"get"],[29,7,42,0],[29,18,42,0,"get"],[29,19,42,0],[30,6,42,0],[30,13,42,0,"useAuthStore"],[30,25,42,0],[31,4,42,0],[32,2,42,0],[33,2,106,0,"Object"],[33,8,106,0],[33,9,106,0,"defineProperty"],[33,23,106,0],[33,24,106,0,"exports"],[33,31,106,0],[34,4,106,0,"enumerable"],[34,14,106,0],[35,4,106,0,"get"],[35,7,106,0],[35,18,106,0,"get"],[35,19,106,0],[36,6,106,0],[36,13,106,0,"saveUserData"],[36,25,106,0],[37,4,106,0],[38,2,106,0],[39,2,1,0],[39,6,1,0,"_zustand"],[39,14,1,0],[39,17,1,0,"require"],[39,24,1,0],[39,25,1,0,"_dependencyMap"],[39,39,1,0],[40,2,2,0],[40,6,2,0,"_expoSecureStore"],[40,22,2,0],[40,25,2,0,"require"],[40,32,2,0],[40,33,2,0,"_dependencyMap"],[40,47,2,0],[41,2,2,0],[41,6,2,0,"SecureStore"],[41,17,2,0],[41,20,2,0,"_interopNamespace"],[41,37,2,0],[41,38,2,0,"_expoSecureStore"],[41,54,2,0],[42,2,2,49],[42,6,2,49,"_reactNativeWebDistExportsPlatform"],[42,40,2,49],[42,43,2,49,"require"],[42,50,2,49],[42,51,2,49,"_dependencyMap"],[42,65,2,49],[43,2,2,49],[43,6,2,49,"Platform"],[43,14,2,49],[43,17,2,49,"_interopDefault"],[43,32,2,49],[43,33,2,49,"_reactNativeWebDistExportsPlatform"],[43,67,2,49],[44,2,4,0],[44,6,4,0,"_reactNativeAsyncStorageAsyncStorage"],[44,42,4,0],[44,45,4,0,"require"],[44,52,4,0],[44,53,4,0,"_dependencyMap"],[44,67,4,0],[45,2,4,0],[45,6,4,0,"AsyncStorage"],[45,18,4,0],[45,21,4,0,"_interopDefault"],[45,36,4,0],[45,37,4,0,"_reactNativeAsyncStorageAsyncStorage"],[45,73,4,0],[46,2,7,0],[46,8,7,6,"TOKEN_KEY"],[46,17,7,15],[46,20,7,18],[46,35,7,33],[47,2,8,0],[47,8,8,6,"USER_KEY"],[47,16,8,14],[47,19,8,17],[47,30,8,28],[48,2,21,0],[48,8,21,6,"storage"],[48,15,21,13],[48,18,21,16],[49,4,22,2],[49,10,22,8,"getItem"],[49,17,22,15,"getItem"],[49,18,22,16,"key"],[49,21,22,27],[49,23,22,53],[50,6,23,4],[50,10,23,8,"Platform"],[50,18,23,16],[50,19,23,16,"default"],[50,26,23,16],[50,27,23,17,"OS"],[50,29,23,19],[50,34,23,24],[50,39,23,29],[50,41,23,31],[51,8,24,6],[51,15,24,13,"AsyncStorage"],[51,27,24,25],[51,28,24,25,"default"],[51,35,24,25],[51,36,24,26,"getItem"],[51,43,24,33],[51,44,24,34,"key"],[51,47,24,37],[51,48,24,38],[52,6,25,4],[53,6,26,4],[53,13,26,11,"SecureStore"],[53,24,26,22],[53,25,26,23,"getItemAsync"],[53,37,26,35],[53,38,26,36,"key"],[53,41,26,39],[53,42,26,40],[54,4,27,2],[54,5,27,3],[55,4,28,2],[55,10,28,8,"setItem"],[55,17,28,15,"setItem"],[55,18,28,16,"key"],[55,21,28,27],[55,23,28,29,"value"],[55,28,28,42],[55,30,28,59],[56,6,29,4],[56,10,29,8,"Platform"],[56,18,29,16],[56,19,29,16,"default"],[56,26,29,16],[56,27,29,17,"OS"],[56,29,29,19],[56,34,29,24],[56,39,29,29],[56,41,29,31],[57,8,30,6],[57,15,30,13,"AsyncStorage"],[57,27,30,25],[57,28,30,25,"default"],[57,35,30,25],[57,36,30,26,"setItem"],[57,43,30,33],[57,44,30,34,"key"],[57,47,30,37],[57,49,30,39,"value"],[57,54,30,44],[57,55,30,45],[58,6,31,4],[59,6,32,4],[59,13,32,11,"SecureStore"],[59,24,32,22],[59,25,32,23,"setItemAsync"],[59,37,32,35],[59,38,32,36,"key"],[59,41,32,39],[59,43,32,41,"value"],[59,48,32,46],[59,49,32,47],[60,4,33,2],[60,5,33,3],[61,4,34,2],[61,10,34,8,"removeItem"],[61,20,34,18,"removeItem"],[61,21,34,19,"key"],[61,24,34,30],[61,26,34,47],[62,6,35,4],[62,10,35,8,"Platform"],[62,18,35,16],[62,19,35,16,"default"],[62,26,35,16],[62,27,35,17,"OS"],[62,29,35,19],[62,34,35,24],[62,39,35,29],[62,41,35,31],[63,8,36,6],[63,15,36,13,"AsyncStorage"],[63,27,36,25],[63,28,36,25,"default"],[63,35,36,25],[63,36,36,26,"removeItem"],[63,46,36,36],[63,47,36,37,"key"],[63,50,36,40],[63,51,36,41],[64,6,37,4],[65,6,38,4],[65,13,38,11,"SecureStore"],[65,24,38,22],[65,25,38,23,"deleteItemAsync"],[65,40,38,38],[65,41,38,39,"key"],[65,44,38,42],[65,45,38,43],[66,4,39,2],[67,2,40,0],[67,3,40,1],[68,2,42,7],[68,8,42,13,"useAuthStore"],[68,20,42,25],[68,23,42,28],[68,27,42,28,"create"],[68,35,42,34],[68,36,42,34,"create"],[68,42,42,34],[68,44,42,46],[68,45,42,47,"set"],[68,48,42,50],[68,50,42,52,"get"],[68,53,42,55],[68,59,42,61],[69,4,43,2,"user"],[69,8,43,6],[69,10,43,8],[69,14,43,12],[70,4,44,2,"token"],[70,9,44,7],[70,11,44,9],[70,15,44,13],[71,4,45,2,"isLoading"],[71,13,45,11],[71,15,45,13],[71,19,45,17],[72,4,46,2,"isAuthenticated"],[72,19,46,17],[72,21,46,19],[72,26,46,24],[73,4,48,2,"setUser"],[73,11,48,9],[73,13,48,12,"user"],[73,17,48,16],[73,21,48,21,"set"],[73,24,48,24],[73,25,48,25],[74,6,48,27,"user"],[74,10,48,31],[75,6,48,33,"isAuthenticated"],[75,21,48,48],[75,23,48,50],[75,24,48,51],[75,25,48,52,"user"],[76,4,48,57],[76,5,48,58],[76,6,48,59],[77,4,50,2,"setToken"],[77,12,50,10],[77,14,50,12],[77,20,50,19,"token"],[77,25,50,24],[77,29,50,29],[78,6,51,4],[78,10,51,8,"token"],[78,15,51,13],[78,17,51,15],[79,8,52,6],[79,14,52,12,"storage"],[79,21,52,19],[79,22,52,20,"setItem"],[79,29,52,27],[79,30,52,28,"TOKEN_KEY"],[79,39,52,37],[79,41,52,39,"token"],[79,46,52,44],[79,47,52,45],[80,6,53,4],[80,7,53,5],[80,13,53,11],[81,8,54,6],[81,14,54,12,"storage"],[81,21,54,19],[81,22,54,20,"removeItem"],[81,32,54,30],[81,33,54,31,"TOKEN_KEY"],[81,42,54,40],[81,43,54,41],[82,6,55,4],[83,6,56,4],[84,6,57,4,"set"],[84,9,57,7],[84,10,57,8],[85,8,57,10,"token"],[85,13,57,15],[86,8,57,17,"isAuthenticated"],[86,23,57,32],[86,25,57,34],[86,26,57,35],[86,27,57,36,"token"],[87,6,57,42],[87,7,57,43],[87,8,57,44],[88,4,58,2],[88,5,58,3],[89,4,60,2,"loadStoredAuth"],[89,18,60,16],[89,20,60,18],[89,26,60,18,"loadStoredAuth"],[89,27,60,18],[89,32,60,30],[90,6,61,4],[90,10,61,8],[91,8,62,6],[92,8,63,6],[92,14,63,12,"timeoutPromise"],[92,28,63,26],[92,31,63,29],[92,35,63,33,"Promise"],[92,42,63,40],[92,43,63,41],[92,44,63,42,"_"],[92,45,63,43],[92,47,63,45,"reject"],[92,53,63,51],[92,58,64,8,"setTimeout"],[92,68,64,18],[92,69,64,19],[92,75,64,25,"reject"],[92,81,64,31],[92,82,64,32],[92,86,64,36,"Error"],[92,91,64,41],[92,92,64,42],[92,101,64,51],[92,102,64,52],[92,103,64,53],[92,105,64,55],[92,109,64,59],[92,110,65,6],[92,111,65,7],[93,8,67,6],[93,14,67,12,"loadPromise"],[93,25,67,23],[93,28,67,26],[93,34,67,26,"loadPromise"],[93,35,67,26],[93,40,67,38],[94,10,68,8],[94,16,68,14,"token"],[94,21,68,19],[94,24,68,22],[94,30,68,28,"storage"],[94,37,68,35],[94,38,68,36,"getItem"],[94,45,68,43],[94,46,68,44,"TOKEN_KEY"],[94,55,68,53],[94,56,68,54],[95,10,69,8],[95,16,69,14,"userJson"],[95,24,69,22],[95,27,69,25],[95,33,69,31,"storage"],[95,40,69,38],[95,41,69,39,"getItem"],[95,48,69,46],[95,49,69,47,"USER_KEY"],[95,57,69,55],[95,58,69,56],[96,10,71,8],[96,14,71,12,"token"],[96,19,71,17],[96,23,71,21,"userJson"],[96,31,71,29],[96,33,71,31],[97,12,72,10],[97,18,72,16,"user"],[97,22,72,20],[97,25,72,23,"JSON"],[97,29,72,27],[97,30,72,28,"parse"],[97,35,72,33],[97,36,72,34,"userJson"],[97,44,72,42],[97,45,72,43],[98,12,73,10,"set"],[98,15,73,13],[98,16,73,14],[99,14,73,16,"user"],[99,18,73,20],[100,14,73,22,"token"],[100,19,73,27],[101,14,73,29,"isAuthenticated"],[101,29,73,44],[101,31,73,46],[101,35,73,50],[102,14,73,52,"isLoading"],[102,23,73,61],[102,25,73,63],[103,12,73,69],[103,13,73,70],[103,14,73,71],[104,10,74,8],[104,11,74,9],[104,17,74,15],[105,12,75,10,"set"],[105,15,75,13],[105,16,75,14],[106,14,75,16,"isLoading"],[106,23,75,25],[106,25,75,27],[107,12,75,33],[107,13,75,34],[107,14,75,35],[108,10,76,8],[109,8,77,6],[109,9,77,7],[110,8,79,6],[110,14,79,12,"Promise"],[110,21,79,19],[110,22,79,20,"race"],[110,26,79,24],[110,27,79,25],[110,28,79,26,"loadPromise"],[110,39,79,37],[110,40,79,38],[110,41,79,39],[110,43,79,41,"timeoutPromise"],[110,57,79,55],[110,58,79,56],[110,59,79,57],[111,6,80,4],[111,7,80,5],[111,8,80,6],[111,15,80,13,"error"],[111,20,80,18],[111,22,80,20],[112,8,81,6,"console"],[112,15,81,13],[112,16,81,14,"error"],[112,21,81,19],[112,22,81,20],[112,43,81,41],[112,45,81,43,"error"],[112,50,81,48],[112,51,81,49],[113,8,82,6,"set"],[113,11,82,9],[113,12,82,10],[114,10,82,12,"isLoading"],[114,19,82,21],[114,21,82,23],[115,8,82,29],[115,9,82,30],[115,10,82,31],[116,6,83,4],[117,4,84,2],[117,5,84,3],[118,4,86,2,"logout"],[118,10,86,8],[118,12,86,10],[118,18,86,10,"logout"],[118,19,86,10],[118,24,86,22],[119,6,87,4],[119,10,87,8],[120,8,88,6],[121,8,89,6],[121,14,89,12,"token"],[121,19,89,17],[121,22,89,20,"get"],[121,25,89,23],[121,26,89,24],[121,27,89,25],[121,28,89,26,"token"],[121,33,89,31],[122,8,90,6],[122,12,90,10,"token"],[122,17,90,15],[122,19,90,17],[123,10,91,8],[123,16,91,14],[124,12,91,16,"default"],[124,19,91,23],[124,21,91,25,"api"],[125,10,91,29],[125,11,91,30],[125,14,91,33],[125,20,91,33,"require"],[125,27,91,33],[125,28,91,33,"_dependencyMap"],[125,42,91,33],[125,85,91,33,"_dependencyMap"],[125,99,91,33],[125,104,91,33,"_dependencyMap"],[125,118,91,33],[125,119,91,33,"paths"],[125,124,91,33],[125,141,91,61],[126,10,92,8],[126,16,92,14,"api"],[126,19,92,17],[126,20,92,18,"post"],[126,24,92,22],[126,25,92,23],[126,39,92,37],[126,40,92,38],[127,8,93,6],[128,6,94,4],[128,7,94,5],[128,8,94,6],[128,15,94,13,"error"],[128,20,94,18],[128,22,94,20],[129,8,95,6,"console"],[129,15,95,13],[129,16,95,14,"error"],[129,21,95,19],[129,22,95,20],[129,49,95,47],[129,51,95,49,"error"],[129,56,95,54],[129,57,95,55],[130,8,96,6],[131,6,97,4],[133,6,99,4],[134,6,100,4],[134,12,100,10,"storage"],[134,19,100,17],[134,20,100,18,"removeItem"],[134,30,100,28],[134,31,100,29,"TOKEN_KEY"],[134,40,100,38],[134,41,100,39],[135,6,101,4],[135,12,101,10,"storage"],[135,19,101,17],[135,20,101,18,"removeItem"],[135,30,101,28],[135,31,101,29,"USER_KEY"],[135,39,101,37],[135,40,101,38],[136,6,102,4,"set"],[136,9,102,7],[136,10,102,8],[137,8,102,10,"user"],[137,12,102,14],[137,14,102,16],[137,18,102,20],[138,8,102,22,"token"],[138,13,102,27],[138,15,102,29],[138,19,102,33],[139,8,102,35,"isAuthenticated"],[139,23,102,50],[139,25,102,52],[140,6,102,58],[140,7,102,59],[140,8,102,60],[141,4,103,2],[142,2,104,0],[142,3,104,1],[142,4,104,2],[142,5,104,3],[143,2,106,7],[143,8,106,13,"saveUserData"],[143,20,106,25],[143,23,106,28],[143,29,106,35,"user"],[143,33,106,45],[143,37,106,50],[144,4,107,2],[144,10,107,8,"storage"],[144,17,107,15],[144,18,107,16,"setItem"],[144,25,107,23],[144,26,107,24,"USER_KEY"],[144,34,107,32],[144,36,107,34,"JSON"],[144,40,107,38],[144,41,107,39,"stringify"],[144,50,107,48],[144,51,107,49,"user"],[144,55,107,53],[144,56,107,54],[144,57,107,55],[145,2,108,0],[145,3,108,1],[146,0,108,2],[146,3]],"functionMap":{"names":["<global>","storage.getItem","storage.setItem","storage.removeItem","create$argument_0","setUser","setToken","loadStoredAuth","Promise$argument_0","setTimeout$argument_0","loadPromise","logout","saveUserData"],"mappings":"AAA;ECqB;GDK;EEC;GFK;EGC;GHK;8CIG;WCM,gDD;YEE;GFQ;kBGE;yCCG;mBCC,kCD,OD;0BGG;OHU;GHO;UOE;GPiB;EJC;4BYE;CZE"},"hasCjsExports":false},"type":"js/module"}]}