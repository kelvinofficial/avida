{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"../utils/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":39,"index":73}}],"key":"XoJ+jbKCrEi38eKczMqtlbk+TCk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"useFeatureSettingsStore\", {\n    enumerable: true,\n    get: function () {\n      return useFeatureSettingsStore;\n    }\n  });\n  Object.defineProperty(exports, \"useInitializeFeatureSettings\", {\n    enumerable: true,\n    get: function () {\n      return useInitializeFeatureSettings;\n    }\n  });\n  var _zustand = require(_dependencyMap[0], \"zustand\");\n  var _utilsApi = require(_dependencyMap[1], \"../utils/api\");\n  // Helper to get API URL at runtime - use centralized config\n  const getApiUrl = () => _utilsApi.API_URL;\n\n  // Feature settings interface matching backend response\n\n  // Default settings (used as fallback)\n  const DEFAULT_SETTINGS = {\n    show_view_count: true,\n    show_save_count: true,\n    show_listing_stats: true,\n    show_seller_stats: true,\n    show_distance: true,\n    show_time_ago: true,\n    show_negotiable_badge: true,\n    show_featured_badge: true,\n    location_mode: 'region',\n    default_country: 'TZ',\n    allow_country_change: false,\n    currency: 'TZS',\n    currency_symbol: 'TSh',\n    currency_position: 'before'\n  };\n  // Cache duration: 2 minutes\n  const CACHE_DURATION = 2 * 60 * 1000;\n  const useFeatureSettingsStore = (0, _zustand.create)((set, get) => ({\n    settings: DEFAULT_SETTINGS,\n    isLoading: false,\n    error: null,\n    lastFetched: null,\n    fetchSettings: async () => {\n      const state = get();\n\n      // Don't fetch if already loading\n      if (state.isLoading) return;\n\n      // Check cache - don't refetch if recently fetched\n      if (state.lastFetched && Date.now() - state.lastFetched < CACHE_DURATION) {\n        return;\n      }\n      set({\n        isLoading: true,\n        error: null\n      });\n      try {\n        const response = await fetch(`${getApiUrl()}/api/feature-settings`);\n        if (!response.ok) {\n          throw new Error('Failed to fetch feature settings');\n        }\n        const data = await response.json();\n        console.log('[FeatureSettingsStore] Received data:', JSON.stringify(data));\n        console.log('[FeatureSettingsStore] location_mode:', data.location_mode);\n        const newSettings = {\n          ...DEFAULT_SETTINGS,\n          ...data\n        };\n        console.log('[FeatureSettingsStore] New settings:', JSON.stringify(newSettings));\n        set({\n          settings: newSettings,\n          isLoading: false,\n          lastFetched: Date.now()\n        });\n      } catch (error) {\n        console.error('Error fetching feature settings:', error);\n        set({\n          isLoading: false,\n          error: error instanceof Error ? error.message : 'Unknown error'\n          // Keep default settings on error\n        });\n      }\n    },\n    // Helper methods for common checks\n    shouldShowViewCount: () => get().settings.show_view_count,\n    shouldShowSaveCount: () => get().settings.show_save_count,\n    shouldShowDistance: () => get().settings.show_distance,\n    shouldShowTimeAgo: () => get().settings.show_time_ago,\n    shouldShowNegotiableBadge: () => get().settings.show_negotiable_badge,\n    shouldShowFeaturedBadge: () => get().settings.show_featured_badge,\n    formatPrice: price => {\n      const {\n        currency_symbol,\n        currency_position\n      } = get().settings;\n      const formattedNumber = price.toLocaleString();\n      if (currency_position === 'before') {\n        return `${currency_symbol} ${formattedNumber}`;\n      }\n      return `${formattedNumber} ${currency_symbol}`;\n    }\n  }));\n\n  // Export a hook for easy initialization\n  const useInitializeFeatureSettings = () => {\n    const fetchSettings = useFeatureSettingsStore(state => state.fetchSettings);\n    return fetchSettings;\n  };\n});","lineCount":116,"map":[[7,2,64,0,"Object"],[7,8,64,0],[7,9,64,0,"defineProperty"],[7,23,64,0],[7,24,64,0,"exports"],[7,31,64,0],[8,4,64,0,"enumerable"],[8,14,64,0],[9,4,64,0,"get"],[9,7,64,0],[9,18,64,0,"get"],[9,19,64,0],[10,6,64,0],[10,13,64,0,"useFeatureSettingsStore"],[10,36,64,0],[11,4,64,0],[12,2,64,0],[13,2,132,0,"Object"],[13,8,132,0],[13,9,132,0,"defineProperty"],[13,23,132,0],[13,24,132,0,"exports"],[13,31,132,0],[14,4,132,0,"enumerable"],[14,14,132,0],[15,4,132,0,"get"],[15,7,132,0],[15,18,132,0,"get"],[15,19,132,0],[16,6,132,0],[16,13,132,0,"useInitializeFeatureSettings"],[16,41,132,0],[17,4,132,0],[18,2,132,0],[19,2,1,0],[19,6,1,0,"_zustand"],[19,14,1,0],[19,17,1,0,"require"],[19,24,1,0],[19,25,1,0,"_dependencyMap"],[19,39,1,0],[20,2,2,0],[20,6,2,0,"_utilsApi"],[20,15,2,0],[20,18,2,0,"require"],[20,25,2,0],[20,26,2,0,"_dependencyMap"],[20,40,2,0],[21,2,4,0],[22,2,5,0],[22,8,5,6,"getApiUrl"],[22,17,5,15],[22,20,5,18,"getApiUrl"],[22,21,5,18],[22,26,5,24,"API_URL"],[22,35,5,31],[22,36,5,31,"API_URL"],[22,43,5,31],[24,2,7,0],[26,2,26,0],[27,2,27,0],[27,8,27,6,"DEFAULT_SETTINGS"],[27,24,27,39],[27,27,27,42],[28,4,28,2,"show_view_count"],[28,19,28,17],[28,21,28,19],[28,25,28,23],[29,4,29,2,"show_save_count"],[29,19,29,17],[29,21,29,19],[29,25,29,23],[30,4,30,2,"show_listing_stats"],[30,22,30,20],[30,24,30,22],[30,28,30,26],[31,4,31,2,"show_seller_stats"],[31,21,31,19],[31,23,31,21],[31,27,31,25],[32,4,32,2,"show_distance"],[32,17,32,15],[32,19,32,17],[32,23,32,21],[33,4,33,2,"show_time_ago"],[33,17,33,15],[33,19,33,17],[33,23,33,21],[34,4,34,2,"show_negotiable_badge"],[34,25,34,23],[34,27,34,25],[34,31,34,29],[35,4,35,2,"show_featured_badge"],[35,23,35,21],[35,25,35,23],[35,29,35,27],[36,4,36,2,"location_mode"],[36,17,36,15],[36,19,36,17],[36,27,36,25],[37,4,37,2,"default_country"],[37,19,37,17],[37,21,37,19],[37,25,37,23],[38,4,38,2,"allow_country_change"],[38,24,38,22],[38,26,38,24],[38,31,38,29],[39,4,39,2,"currency"],[39,12,39,10],[39,14,39,12],[39,19,39,17],[40,4,40,2,"currency_symbol"],[40,19,40,17],[40,21,40,19],[40,26,40,24],[41,4,41,2,"currency_position"],[41,21,41,19],[41,23,41,21],[42,2,42,0],[42,3,42,1],[43,2,61,0],[44,2,62,0],[44,8,62,6,"CACHE_DURATION"],[44,22,62,20],[44,25,62,23],[44,26,62,24],[44,29,62,27],[44,31,62,29],[44,34,62,32],[44,38,62,36],[45,2,64,7],[45,8,64,13,"useFeatureSettingsStore"],[45,31,64,36],[45,34,64,39],[45,38,64,39,"create"],[45,46,64,45],[45,47,64,45,"create"],[45,53,64,45],[45,55,64,68],[45,56,64,69,"set"],[45,59,64,72],[45,61,64,74,"get"],[45,64,64,77],[45,70,64,83],[46,4,65,2,"settings"],[46,12,65,10],[46,14,65,12,"DEFAULT_SETTINGS"],[46,30,65,28],[47,4,66,2,"isLoading"],[47,13,66,11],[47,15,66,13],[47,20,66,18],[48,4,67,2,"error"],[48,9,67,7],[48,11,67,9],[48,15,67,13],[49,4,68,2,"lastFetched"],[49,15,68,13],[49,17,68,15],[49,21,68,19],[50,4,70,2,"fetchSettings"],[50,17,70,15],[50,19,70,17],[50,25,70,17,"fetchSettings"],[50,26,70,17],[50,31,70,29],[51,6,71,4],[51,12,71,10,"state"],[51,17,71,15],[51,20,71,18,"get"],[51,23,71,21],[51,24,71,22],[51,25,71,23],[53,6,73,4],[54,6,74,4],[54,10,74,8,"state"],[54,15,74,13],[54,16,74,14,"isLoading"],[54,25,74,23],[54,27,74,25],[56,6,76,4],[57,6,77,4],[57,10,77,8,"state"],[57,15,77,13],[57,16,77,14,"lastFetched"],[57,27,77,25],[57,31,77,29,"Date"],[57,35,77,33],[57,36,77,34,"now"],[57,39,77,37],[57,40,77,38],[57,41,77,39],[57,44,77,42,"state"],[57,49,77,47],[57,50,77,48,"lastFetched"],[57,61,77,59],[57,64,77,62,"CACHE_DURATION"],[57,78,77,76],[57,80,77,78],[58,8,78,6],[59,6,79,4],[60,6,81,4,"set"],[60,9,81,7],[60,10,81,8],[61,8,81,10,"isLoading"],[61,17,81,19],[61,19,81,21],[61,23,81,25],[62,8,81,27,"error"],[62,13,81,32],[62,15,81,34],[63,6,81,39],[63,7,81,40],[63,8,81,41],[64,6,83,4],[64,10,83,8],[65,8,84,6],[65,14,84,12,"response"],[65,22,84,20],[65,25,84,23],[65,31,84,29,"fetch"],[65,36,84,34],[65,37,84,35],[65,40,84,38,"getApiUrl"],[65,49,84,47],[65,50,84,48],[65,51,84,49],[65,74,84,72],[65,75,84,73],[66,8,86,6],[66,12,86,10],[66,13,86,11,"response"],[66,21,86,19],[66,22,86,20,"ok"],[66,24,86,22],[66,26,86,24],[67,10,87,8],[67,16,87,14],[67,20,87,18,"Error"],[67,25,87,23],[67,26,87,24],[67,60,87,58],[67,61,87,59],[68,8,88,6],[69,8,90,6],[69,14,90,12,"data"],[69,18,90,16],[69,21,90,19],[69,27,90,25,"response"],[69,35,90,33],[69,36,90,34,"json"],[69,40,90,38],[69,41,90,39],[69,42,90,40],[70,8,91,6,"console"],[70,15,91,13],[70,16,91,14,"log"],[70,19,91,17],[70,20,91,18],[70,59,91,57],[70,61,91,59,"JSON"],[70,65,91,63],[70,66,91,64,"stringify"],[70,75,91,73],[70,76,91,74,"data"],[70,80,91,78],[70,81,91,79],[70,82,91,80],[71,8,92,6,"console"],[71,15,92,13],[71,16,92,14,"log"],[71,19,92,17],[71,20,92,18],[71,59,92,57],[71,61,92,59,"data"],[71,65,92,63],[71,66,92,64,"location_mode"],[71,79,92,77],[71,80,92,78],[72,8,94,6],[72,14,94,12,"newSettings"],[72,25,94,23],[72,28,94,26],[73,10,94,28],[73,13,94,31,"DEFAULT_SETTINGS"],[73,29,94,47],[74,10,94,49],[74,13,94,52,"data"],[75,8,94,57],[75,9,94,58],[76,8,95,6,"console"],[76,15,95,13],[76,16,95,14,"log"],[76,19,95,17],[76,20,95,18],[76,58,95,56],[76,60,95,58,"JSON"],[76,64,95,62],[76,65,95,63,"stringify"],[76,74,95,72],[76,75,95,73,"newSettings"],[76,86,95,84],[76,87,95,85],[76,88,95,86],[77,8,97,6,"set"],[77,11,97,9],[77,12,97,10],[78,10,98,8,"settings"],[78,18,98,16],[78,20,98,18,"newSettings"],[78,31,98,29],[79,10,99,8,"isLoading"],[79,19,99,17],[79,21,99,19],[79,26,99,24],[80,10,100,8,"lastFetched"],[80,21,100,19],[80,23,100,21,"Date"],[80,27,100,25],[80,28,100,26,"now"],[80,31,100,29],[80,32,100,30],[81,8,101,6],[81,9,101,7],[81,10,101,8],[82,6,102,4],[82,7,102,5],[82,8,102,6],[82,15,102,13,"error"],[82,20,102,18],[82,22,102,20],[83,8,103,6,"console"],[83,15,103,13],[83,16,103,14,"error"],[83,21,103,19],[83,22,103,20],[83,56,103,54],[83,58,103,56,"error"],[83,63,103,61],[83,64,103,62],[84,8,104,6,"set"],[84,11,104,9],[84,12,104,10],[85,10,105,8,"isLoading"],[85,19,105,17],[85,21,105,19],[85,26,105,24],[86,10,106,8,"error"],[86,15,106,13],[86,17,106,15,"error"],[86,22,106,20],[86,34,106,32,"Error"],[86,39,106,37],[86,42,106,40,"error"],[86,47,106,45],[86,48,106,46,"message"],[86,55,106,53],[86,58,106,56],[87,10,107,8],[88,8,108,6],[88,9,108,7],[88,10,108,8],[89,6,109,4],[90,4,110,2],[90,5,110,3],[91,4,112,2],[92,4,113,2,"shouldShowViewCount"],[92,23,113,21],[92,25,113,23,"shouldShowViewCount"],[92,26,113,23],[92,31,113,29,"get"],[92,34,113,32],[92,35,113,33],[92,36,113,34],[92,37,113,35,"settings"],[92,45,113,43],[92,46,113,44,"show_view_count"],[92,61,113,59],[93,4,114,2,"shouldShowSaveCount"],[93,23,114,21],[93,25,114,23,"shouldShowSaveCount"],[93,26,114,23],[93,31,114,29,"get"],[93,34,114,32],[93,35,114,33],[93,36,114,34],[93,37,114,35,"settings"],[93,45,114,43],[93,46,114,44,"show_save_count"],[93,61,114,59],[94,4,115,2,"shouldShowDistance"],[94,22,115,20],[94,24,115,22,"shouldShowDistance"],[94,25,115,22],[94,30,115,28,"get"],[94,33,115,31],[94,34,115,32],[94,35,115,33],[94,36,115,34,"settings"],[94,44,115,42],[94,45,115,43,"show_distance"],[94,58,115,56],[95,4,116,2,"shouldShowTimeAgo"],[95,21,116,19],[95,23,116,21,"shouldShowTimeAgo"],[95,24,116,21],[95,29,116,27,"get"],[95,32,116,30],[95,33,116,31],[95,34,116,32],[95,35,116,33,"settings"],[95,43,116,41],[95,44,116,42,"show_time_ago"],[95,57,116,55],[96,4,117,2,"shouldShowNegotiableBadge"],[96,29,117,27],[96,31,117,29,"shouldShowNegotiableBadge"],[96,32,117,29],[96,37,117,35,"get"],[96,40,117,38],[96,41,117,39],[96,42,117,40],[96,43,117,41,"settings"],[96,51,117,49],[96,52,117,50,"show_negotiable_badge"],[96,73,117,71],[97,4,118,2,"shouldShowFeaturedBadge"],[97,27,118,25],[97,29,118,27,"shouldShowFeaturedBadge"],[97,30,118,27],[97,35,118,33,"get"],[97,38,118,36],[97,39,118,37],[97,40,118,38],[97,41,118,39,"settings"],[97,49,118,47],[97,50,118,48,"show_featured_badge"],[97,69,118,67],[98,4,120,2,"formatPrice"],[98,15,120,13],[98,17,120,16,"price"],[98,22,120,29],[98,26,120,34],[99,6,121,4],[99,12,121,10],[100,8,121,12,"currency_symbol"],[100,23,121,27],[101,8,121,29,"currency_position"],[102,6,121,47],[102,7,121,48],[102,10,121,51,"get"],[102,13,121,54],[102,14,121,55],[102,15,121,56],[102,16,121,57,"settings"],[102,24,121,65],[103,6,122,4],[103,12,122,10,"formattedNumber"],[103,27,122,25],[103,30,122,28,"price"],[103,35,122,33],[103,36,122,34,"toLocaleString"],[103,50,122,48],[103,51,122,49],[103,52,122,50],[104,6,124,4],[104,10,124,8,"currency_position"],[104,27,124,25],[104,32,124,30],[104,40,124,38],[104,42,124,40],[105,8,125,6],[105,15,125,13],[105,18,125,16,"currency_symbol"],[105,33,125,31],[105,37,125,35,"formattedNumber"],[105,52,125,50],[105,54,125,52],[106,6,126,4],[107,6,127,4],[107,13,127,11],[107,16,127,14,"formattedNumber"],[107,31,127,29],[107,35,127,33,"currency_symbol"],[107,50,127,48],[107,52,127,50],[108,4,128,2],[109,2,129,0],[109,3,129,1],[109,4,129,2],[109,5,129,3],[111,2,131,0],[112,2,132,7],[112,8,132,13,"useInitializeFeatureSettings"],[112,36,132,41],[112,39,132,44,"useInitializeFeatureSettings"],[112,40,132,44],[112,45,132,50],[113,4,133,2],[113,10,133,8,"fetchSettings"],[113,23,133,21],[113,26,133,24,"useFeatureSettingsStore"],[113,49,133,47],[113,50,133,48,"state"],[113,55,133,53],[113,59,133,57,"state"],[113,64,133,62],[113,65,133,63,"fetchSettings"],[113,78,133,76],[113,79,133,77],[114,4,134,2],[114,11,134,9,"fetchSettings"],[114,24,134,22],[115,2,135,0],[115,3,135,1],[116,0,135,2],[116,3]],"functionMap":{"names":["<global>","getApiUrl","create$argument_0","fetchSettings","shouldShowViewCount","shouldShowSaveCount","shouldShowDistance","shouldShowTimeAgo","shouldShowNegotiableBadge","shouldShowFeaturedBadge","formatPrice","useInitializeFeatureSettings","useFeatureSettingsStore$argument_0"],"mappings":"AAA;kBCI,aD;oEE2D;iBCM;GDwC;uBEG,oCF;uBGC,oCH;sBIC,kCJ;qBKC,kCL;6BMC,0CN;2BOC,wCP;eQE;GRQ;EFC;4CWG;gDCC,4BD;CXE"},"hasCjsExports":false},"type":"js/module"}]}