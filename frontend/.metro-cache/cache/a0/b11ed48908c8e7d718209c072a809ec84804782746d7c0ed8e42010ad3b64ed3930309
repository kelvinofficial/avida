{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"../utils/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":39,"index":73}}],"key":"XoJ+jbKCrEi38eKczMqtlbk+TCk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"useFeatureSettingsStore\", {\n    enumerable: true,\n    get: function () {\n      return useFeatureSettingsStore;\n    }\n  });\n  Object.defineProperty(exports, \"useInitializeFeatureSettings\", {\n    enumerable: true,\n    get: function () {\n      return useInitializeFeatureSettings;\n    }\n  });\n  var _zustand = require(_dependencyMap[0], \"zustand\");\n  var _utilsApi = require(_dependencyMap[1], \"../utils/api\");\n  // Helper to get API URL at runtime - use centralized config\n  const getApiUrl = () => _utilsApi.API_URL;\n\n  // Feature settings interface matching backend response\n\n  // Default settings (used as fallback)\n  const DEFAULT_SETTINGS = {\n    show_view_count: true,\n    show_save_count: true,\n    show_listing_stats: true,\n    show_seller_stats: true,\n    show_distance: true,\n    show_time_ago: true,\n    show_negotiable_badge: true,\n    show_featured_badge: true,\n    location_mode: 'region',\n    default_country: 'TZ',\n    allow_country_change: false,\n    currency: 'TZS',\n    currency_symbol: 'TSh',\n    currency_position: 'before'\n  };\n  // Cache duration: 2 minutes\n  const CACHE_DURATION = 2 * 60 * 1000;\n  const useFeatureSettingsStore = (0, _zustand.create)((set, get) => ({\n    settings: DEFAULT_SETTINGS,\n    isLoading: false,\n    error: null,\n    lastFetched: null,\n    fetchSettings: async () => {\n      const state = get();\n\n      // Don't fetch if already loading\n      if (state.isLoading) return;\n\n      // Check cache - don't refetch if recently fetched\n      if (state.lastFetched && Date.now() - state.lastFetched < CACHE_DURATION) {\n        return;\n      }\n      set({\n        isLoading: true,\n        error: null\n      });\n      try {\n        const response = await fetch(`${getApiUrl()}/api/feature-settings`);\n        if (!response.ok) {\n          throw new Error('Failed to fetch feature settings');\n        }\n        const data = await response.json();\n        console.log('[FeatureSettingsStore] Received data:', JSON.stringify(data));\n        console.log('[FeatureSettingsStore] location_mode:', data.location_mode);\n        const newSettings = Object.assign({}, DEFAULT_SETTINGS, data);\n        console.log('[FeatureSettingsStore] New settings:', JSON.stringify(newSettings));\n        set({\n          settings: newSettings,\n          isLoading: false,\n          lastFetched: Date.now()\n        });\n      } catch (error) {\n        console.error('Error fetching feature settings:', error);\n        set({\n          isLoading: false,\n          error: error instanceof Error ? error.message : 'Unknown error'\n          // Keep default settings on error\n        });\n      }\n    },\n    // Helper methods for common checks\n    shouldShowViewCount: () => get().settings.show_view_count,\n    shouldShowSaveCount: () => get().settings.show_save_count,\n    shouldShowDistance: () => get().settings.show_distance,\n    shouldShowTimeAgo: () => get().settings.show_time_ago,\n    shouldShowNegotiableBadge: () => get().settings.show_negotiable_badge,\n    shouldShowFeaturedBadge: () => get().settings.show_featured_badge,\n    formatPrice: price => {\n      const {\n        currency_symbol,\n        currency_position\n      } = get().settings;\n      const formattedNumber = price.toLocaleString();\n      if (currency_position === 'before') {\n        return `${currency_symbol} ${formattedNumber}`;\n      }\n      return `${formattedNumber} ${currency_symbol}`;\n    }\n  }));\n\n  // Export a hook for easy initialization\n  const useInitializeFeatureSettings = () => {\n    _s();\n    const fetchSettings = useFeatureSettingsStore(state => state.fetchSettings);\n    return fetchSettings;\n  };\n  _s(useInitializeFeatureSettings, \"e86dPHIW+8oHDQAi8m7qymTgkxY=\", false, function () {\n    return [useFeatureSettingsStore];\n  });\n});","lineCount":118,"map":[[8,2,64,0,"Object"],[8,8,64,0],[8,9,64,0,"defineProperty"],[8,23,64,0],[8,24,64,0,"exports"],[8,31,64,0],[9,4,64,0,"enumerable"],[9,14,64,0],[10,4,64,0,"get"],[10,7,64,0],[10,18,64,0,"get"],[10,19,64,0],[11,6,64,0],[11,13,64,0,"useFeatureSettingsStore"],[11,36,64,0],[12,4,64,0],[13,2,64,0],[14,2,132,0,"Object"],[14,8,132,0],[14,9,132,0,"defineProperty"],[14,23,132,0],[14,24,132,0,"exports"],[14,31,132,0],[15,4,132,0,"enumerable"],[15,14,132,0],[16,4,132,0,"get"],[16,7,132,0],[16,18,132,0,"get"],[16,19,132,0],[17,6,132,0],[17,13,132,0,"useInitializeFeatureSettings"],[17,41,132,0],[18,4,132,0],[19,2,132,0],[20,2,1,0],[20,6,1,0,"_zustand"],[20,14,1,0],[20,17,1,0,"require"],[20,24,1,0],[20,25,1,0,"_dependencyMap"],[20,39,1,0],[21,2,2,0],[21,6,2,0,"_utilsApi"],[21,15,2,0],[21,18,2,0,"require"],[21,25,2,0],[21,26,2,0,"_dependencyMap"],[21,40,2,0],[22,2,4,0],[23,2,5,0],[23,8,5,6,"getApiUrl"],[23,17,5,15],[23,20,5,18,"getApiUrl"],[23,21,5,18],[23,26,5,24,"API_URL"],[23,35,5,31],[23,36,5,31,"API_URL"],[23,43,5,31],[25,2,7,0],[27,2,26,0],[28,2,27,0],[28,8,27,6,"DEFAULT_SETTINGS"],[28,24,27,39],[28,27,27,42],[29,4,28,2,"show_view_count"],[29,19,28,17],[29,21,28,19],[29,25,28,23],[30,4,29,2,"show_save_count"],[30,19,29,17],[30,21,29,19],[30,25,29,23],[31,4,30,2,"show_listing_stats"],[31,22,30,20],[31,24,30,22],[31,28,30,26],[32,4,31,2,"show_seller_stats"],[32,21,31,19],[32,23,31,21],[32,27,31,25],[33,4,32,2,"show_distance"],[33,17,32,15],[33,19,32,17],[33,23,32,21],[34,4,33,2,"show_time_ago"],[34,17,33,15],[34,19,33,17],[34,23,33,21],[35,4,34,2,"show_negotiable_badge"],[35,25,34,23],[35,27,34,25],[35,31,34,29],[36,4,35,2,"show_featured_badge"],[36,23,35,21],[36,25,35,23],[36,29,35,27],[37,4,36,2,"location_mode"],[37,17,36,15],[37,19,36,17],[37,27,36,25],[38,4,37,2,"default_country"],[38,19,37,17],[38,21,37,19],[38,25,37,23],[39,4,38,2,"allow_country_change"],[39,24,38,22],[39,26,38,24],[39,31,38,29],[40,4,39,2,"currency"],[40,12,39,10],[40,14,39,12],[40,19,39,17],[41,4,40,2,"currency_symbol"],[41,19,40,17],[41,21,40,19],[41,26,40,24],[42,4,41,2,"currency_position"],[42,21,41,19],[42,23,41,21],[43,2,42,0],[43,3,42,1],[44,2,61,0],[45,2,62,0],[45,8,62,6,"CACHE_DURATION"],[45,22,62,20],[45,25,62,23],[45,26,62,24],[45,29,62,27],[45,31,62,29],[45,34,62,32],[45,38,62,36],[46,2,64,7],[46,8,64,13,"useFeatureSettingsStore"],[46,31,64,36],[46,34,64,39],[46,38,64,39,"create"],[46,46,64,45],[46,47,64,45,"create"],[46,53,64,45],[46,55,64,68],[46,56,64,69,"set"],[46,59,64,72],[46,61,64,74,"get"],[46,64,64,77],[46,70,64,83],[47,4,65,2,"settings"],[47,12,65,10],[47,14,65,12,"DEFAULT_SETTINGS"],[47,30,65,28],[48,4,66,2,"isLoading"],[48,13,66,11],[48,15,66,13],[48,20,66,18],[49,4,67,2,"error"],[49,9,67,7],[49,11,67,9],[49,15,67,13],[50,4,68,2,"lastFetched"],[50,15,68,13],[50,17,68,15],[50,21,68,19],[51,4,70,2,"fetchSettings"],[51,17,70,15],[51,19,70,17],[51,25,70,17,"fetchSettings"],[51,26,70,17],[51,31,70,29],[52,6,71,4],[52,12,71,10,"state"],[52,17,71,15],[52,20,71,18,"get"],[52,23,71,21],[52,24,71,22],[52,25,71,23],[54,6,73,4],[55,6,74,4],[55,10,74,8,"state"],[55,15,74,13],[55,16,74,14,"isLoading"],[55,25,74,23],[55,27,74,25],[57,6,76,4],[58,6,77,4],[58,10,77,8,"state"],[58,15,77,13],[58,16,77,14,"lastFetched"],[58,27,77,25],[58,31,77,29,"Date"],[58,35,77,33],[58,36,77,34,"now"],[58,39,77,37],[58,40,77,38],[58,41,77,39],[58,44,77,42,"state"],[58,49,77,47],[58,50,77,48,"lastFetched"],[58,61,77,59],[58,64,77,62,"CACHE_DURATION"],[58,78,77,76],[58,80,77,78],[59,8,78,6],[60,6,79,4],[61,6,81,4,"set"],[61,9,81,7],[61,10,81,8],[62,8,81,10,"isLoading"],[62,17,81,19],[62,19,81,21],[62,23,81,25],[63,8,81,27,"error"],[63,13,81,32],[63,15,81,34],[64,6,81,39],[64,7,81,40],[64,8,81,41],[65,6,83,4],[65,10,83,8],[66,8,84,6],[66,14,84,12,"response"],[66,22,84,20],[66,25,84,23],[66,31,84,29,"fetch"],[66,36,84,34],[66,37,84,35],[66,40,84,38,"getApiUrl"],[66,49,84,47],[66,50,84,48],[66,51,84,49],[66,74,84,72],[66,75,84,73],[67,8,86,6],[67,12,86,10],[67,13,86,11,"response"],[67,21,86,19],[67,22,86,20,"ok"],[67,24,86,22],[67,26,86,24],[68,10,87,8],[68,16,87,14],[68,20,87,18,"Error"],[68,25,87,23],[68,26,87,24],[68,60,87,58],[68,61,87,59],[69,8,88,6],[70,8,90,6],[70,14,90,12,"data"],[70,18,90,16],[70,21,90,19],[70,27,90,25,"response"],[70,35,90,33],[70,36,90,34,"json"],[70,40,90,38],[70,41,90,39],[70,42,90,40],[71,8,91,6,"console"],[71,15,91,13],[71,16,91,14,"log"],[71,19,91,17],[71,20,91,18],[71,59,91,57],[71,61,91,59,"JSON"],[71,65,91,63],[71,66,91,64,"stringify"],[71,75,91,73],[71,76,91,74,"data"],[71,80,91,78],[71,81,91,79],[71,82,91,80],[72,8,92,6,"console"],[72,15,92,13],[72,16,92,14,"log"],[72,19,92,17],[72,20,92,18],[72,59,92,57],[72,61,92,59,"data"],[72,65,92,63],[72,66,92,64,"location_mode"],[72,79,92,77],[72,80,92,78],[73,8,94,6],[73,14,94,12,"newSettings"],[73,25,94,23],[73,28,94,23,"Object"],[73,34,94,23],[73,35,94,23,"assign"],[73,41,94,23],[73,46,94,31,"DEFAULT_SETTINGS"],[73,62,94,47],[73,64,94,52,"data"],[73,68,94,56],[73,69,94,58],[74,8,95,6,"console"],[74,15,95,13],[74,16,95,14,"log"],[74,19,95,17],[74,20,95,18],[74,58,95,56],[74,60,95,58,"JSON"],[74,64,95,62],[74,65,95,63,"stringify"],[74,74,95,72],[74,75,95,73,"newSettings"],[74,86,95,84],[74,87,95,85],[74,88,95,86],[75,8,97,6,"set"],[75,11,97,9],[75,12,97,10],[76,10,98,8,"settings"],[76,18,98,16],[76,20,98,18,"newSettings"],[76,31,98,29],[77,10,99,8,"isLoading"],[77,19,99,17],[77,21,99,19],[77,26,99,24],[78,10,100,8,"lastFetched"],[78,21,100,19],[78,23,100,21,"Date"],[78,27,100,25],[78,28,100,26,"now"],[78,31,100,29],[78,32,100,30],[79,8,101,6],[79,9,101,7],[79,10,101,8],[80,6,102,4],[80,7,102,5],[80,8,102,6],[80,15,102,13,"error"],[80,20,102,18],[80,22,102,20],[81,8,103,6,"console"],[81,15,103,13],[81,16,103,14,"error"],[81,21,103,19],[81,22,103,20],[81,56,103,54],[81,58,103,56,"error"],[81,63,103,61],[81,64,103,62],[82,8,104,6,"set"],[82,11,104,9],[82,12,104,10],[83,10,105,8,"isLoading"],[83,19,105,17],[83,21,105,19],[83,26,105,24],[84,10,106,8,"error"],[84,15,106,13],[84,17,106,15,"error"],[84,22,106,20],[84,34,106,32,"Error"],[84,39,106,37],[84,42,106,40,"error"],[84,47,106,45],[84,48,106,46,"message"],[84,55,106,53],[84,58,106,56],[85,10,107,8],[86,8,108,6],[86,9,108,7],[86,10,108,8],[87,6,109,4],[88,4,110,2],[88,5,110,3],[89,4,112,2],[90,4,113,2,"shouldShowViewCount"],[90,23,113,21],[90,25,113,23,"shouldShowViewCount"],[90,26,113,23],[90,31,113,29,"get"],[90,34,113,32],[90,35,113,33],[90,36,113,34],[90,37,113,35,"settings"],[90,45,113,43],[90,46,113,44,"show_view_count"],[90,61,113,59],[91,4,114,2,"shouldShowSaveCount"],[91,23,114,21],[91,25,114,23,"shouldShowSaveCount"],[91,26,114,23],[91,31,114,29,"get"],[91,34,114,32],[91,35,114,33],[91,36,114,34],[91,37,114,35,"settings"],[91,45,114,43],[91,46,114,44,"show_save_count"],[91,61,114,59],[92,4,115,2,"shouldShowDistance"],[92,22,115,20],[92,24,115,22,"shouldShowDistance"],[92,25,115,22],[92,30,115,28,"get"],[92,33,115,31],[92,34,115,32],[92,35,115,33],[92,36,115,34,"settings"],[92,44,115,42],[92,45,115,43,"show_distance"],[92,58,115,56],[93,4,116,2,"shouldShowTimeAgo"],[93,21,116,19],[93,23,116,21,"shouldShowTimeAgo"],[93,24,116,21],[93,29,116,27,"get"],[93,32,116,30],[93,33,116,31],[93,34,116,32],[93,35,116,33,"settings"],[93,43,116,41],[93,44,116,42,"show_time_ago"],[93,57,116,55],[94,4,117,2,"shouldShowNegotiableBadge"],[94,29,117,27],[94,31,117,29,"shouldShowNegotiableBadge"],[94,32,117,29],[94,37,117,35,"get"],[94,40,117,38],[94,41,117,39],[94,42,117,40],[94,43,117,41,"settings"],[94,51,117,49],[94,52,117,50,"show_negotiable_badge"],[94,73,117,71],[95,4,118,2,"shouldShowFeaturedBadge"],[95,27,118,25],[95,29,118,27,"shouldShowFeaturedBadge"],[95,30,118,27],[95,35,118,33,"get"],[95,38,118,36],[95,39,118,37],[95,40,118,38],[95,41,118,39,"settings"],[95,49,118,47],[95,50,118,48,"show_featured_badge"],[95,69,118,67],[96,4,120,2,"formatPrice"],[96,15,120,13],[96,17,120,16,"price"],[96,22,120,29],[96,26,120,34],[97,6,121,4],[97,12,121,10],[98,8,121,12,"currency_symbol"],[98,23,121,27],[99,8,121,29,"currency_position"],[100,6,121,47],[100,7,121,48],[100,10,121,51,"get"],[100,13,121,54],[100,14,121,55],[100,15,121,56],[100,16,121,57,"settings"],[100,24,121,65],[101,6,122,4],[101,12,122,10,"formattedNumber"],[101,27,122,25],[101,30,122,28,"price"],[101,35,122,33],[101,36,122,34,"toLocaleString"],[101,50,122,48],[101,51,122,49],[101,52,122,50],[102,6,124,4],[102,10,124,8,"currency_position"],[102,27,124,25],[102,32,124,30],[102,40,124,38],[102,42,124,40],[103,8,125,6],[103,15,125,13],[103,18,125,16,"currency_symbol"],[103,33,125,31],[103,37,125,35,"formattedNumber"],[103,52,125,50],[103,54,125,52],[104,6,126,4],[105,6,127,4],[105,13,127,11],[105,16,127,14,"formattedNumber"],[105,31,127,29],[105,35,127,33,"currency_symbol"],[105,50,127,48],[105,52,127,50],[106,4,128,2],[107,2,129,0],[107,3,129,1],[107,4,129,2],[107,5,129,3],[109,2,131,0],[110,2,132,7],[110,8,132,13,"useInitializeFeatureSettings"],[110,36,132,41],[110,39,132,44,"useInitializeFeatureSettings"],[110,40,132,44],[110,45,132,50],[111,4,132,50,"_s"],[111,6,132,50],[112,4,133,2],[112,10,133,8,"fetchSettings"],[112,23,133,21],[112,26,133,24,"useFeatureSettingsStore"],[112,49,133,47],[112,50,133,48,"state"],[112,55,133,53],[112,59,133,57,"state"],[112,64,133,62],[112,65,133,63,"fetchSettings"],[112,78,133,76],[112,79,133,77],[113,4,134,2],[113,11,134,9,"fetchSettings"],[113,24,134,22],[114,2,135,0],[114,3,135,1],[115,2,135,2,"_s"],[115,4,135,2],[115,5,132,13,"useInitializeFeatureSettings"],[115,33,132,41],[116,4,132,41],[116,12,133,24,"useFeatureSettingsStore"],[116,35,133,47],[117,2,133,47],[118,0,133,47],[118,3]],"functionMap":{"names":["<global>","getApiUrl","create$argument_0","fetchSettings","shouldShowViewCount","shouldShowSaveCount","shouldShowDistance","shouldShowTimeAgo","shouldShowNegotiableBadge","shouldShowFeaturedBadge","formatPrice","useInitializeFeatureSettings","useFeatureSettingsStore$argument_0"],"mappings":"AAA;kBCI,aD;oEE2D;iBCM;GDwC;uBEG,oCF;uBGC,oCH;sBIC,kCJ;qBKC,kCL;6BMC,0CN;2BOC,wCP;eQE;GRQ;EFC;4CWG;gDCC,4BD;CXE"},"hasCjsExports":false},"type":"js/module"}]}