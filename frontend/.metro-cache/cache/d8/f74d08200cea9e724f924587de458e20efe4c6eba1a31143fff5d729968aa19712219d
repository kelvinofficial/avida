{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":189},"end":{"line":8,"column":102,"index":291}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":10,"column":0,"index":333},"end":{"line":10,"column":69,"index":402}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"./api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":403},"end":{"line":11,"column":24,"index":427}}],"key":"FbKPDeRJ9TF3vg1eKYKz12urgic=","exportNames":["*"],"imports":1}},{"name":"react/jsx-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"3suYSPX9nHbHZ1xNTsKXtKj0atE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){\"use strict\";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"default\",{enumerable:!0,get:function(){return f}}),_e.SandboxProvider=function({children:e}){const[f,b]=(0,t.useState)(!1),[x,w]=(0,t.useState)(null),[_,v]=(0,t.useState)(!0);(0,t.useEffect)(()=>{y()},[]);const y=async()=>{try{const e=await s.default.getItem(c);if(e){const t=await n.default.get(`/sandbox/session/active/${e}`);t.data.active&&t.data.session?(w(t.data.session),b(!0)):(await s.default.removeItem(u),await s.default.removeItem(c),w(null),b(!1))}}catch(e){console.log('Sandbox session check failed:',e)}finally{v(!1)}},h=(0,t.useCallback)(async e=>{try{v(!0);const t='admin',o=await n.default.post('/sandbox/session/start',{admin_id:t,role:e});return!!o.data.session&&(await s.default.setItem(c,t),await s.default.setItem(u,JSON.stringify(o.data.session)),w(o.data.session),b(!0),!0)}catch(e){return console.error('Failed to enter sandbox:',e),!1}finally{v(!1)}},[]),S=(0,t.useCallback)(async()=>{try{if(x){const e=await s.default.getItem(c);await n.default.post(`/sandbox/session/${x.id}/end`,{admin_id:e||'admin'})}}catch(e){console.error('Failed to end sandbox session:',e)}finally{await s.default.removeItem(u),await s.default.removeItem(c),w(null),b(!1)}},[x]),I=(0,t.useCallback)(async e=>{try{if(!x)return!1;const t=await s.default.getItem(c);return!!(await n.default.post(`/sandbox/session/${x.id}/switch-role`,{admin_id:t||'admin',new_role:e})).data.success&&(await y(),!0)}catch(e){return console.error('Failed to switch role:',e),!1}},[x]),C=(0,t.useCallback)(async()=>{await y()},[]),k={isSandboxMode:f,sandboxSession:x,sandboxRole:x?.role||null,sandboxUserId:x?.sandbox_user_id||null,timeOffset:x?.simulated_time_offset_hours||0,isLoading:_,enterSandbox:h,exitSandbox:S,switchRole:I,refreshSession:C};return(0,o.jsx)(l.Provider,{value:k,children:e})},_e.useSandbox=function(){const e=(0,t.useContext)(l);if(void 0===e)throw new Error('useSandbox must be used within a SandboxProvider');return e};var t=r(d[0]),s=e(r(d[1])),n=e(r(d[2])),o=r(d[3]);const l=(0,t.createContext)(void 0),u='sandbox_session',c='sandbox_admin_id';var f=l});","lineCount":1,"map":[[1,143,180,0,"Object"],[1,150,180,0,"defineProperty"],[1,165,180,0,"_e"],[1,168,180,0],[1,179,180,0,"enumerable"],[1,191,180,0],[1,193,180,0,"get"],[1,197,180,0],[1,215,180,0,"_default"],[1,216,180,0],[1,220,41,0,"_e"],[1,223,41,0,"SandboxProvider"],[1,239,41,7],[1,249,41,32,"children"],[1,258,41,34,"children"],[1,262,42,2],[1,268,42,9,"isSandboxMode"],[1,270,42,24,"setIsSandboxMode"],[1,274,42,44],[1,276,42,44,"useState"],[1,278,42,52,"useState"],[1,289,42,53],[1,293,43,9,"sandboxSession"],[1,295,43,25,"setSandboxSession"],[1,299,43,46],[1,301,43,46,"useState"],[1,303,43,54,"useState"],[1,313,43,78],[1,320,44,9,"isLoading"],[1,322,44,20,"setIsLoading"],[1,326,44,36],[1,328,44,36,"useState"],[1,330,44,44,"useState"],[1,341,44,45],[1,345,47,2],[1,347,47,2,"useEffect"],[1,349,47,11,"useEffect"],[1,360,47,12],[1,365,48,4,"checkSandboxSession"],[1,370,49,5],[1,374,51,2],[1,380,51,8,"checkSandboxSession"],[1,382,51,30,"async"],[1,392,52,4],[1,396,54,6],[1,402,54,12,"storedAdminId"],[1,410,54,34,"AsyncStorage"],[1,412,54,46,"default"],[1,420,54,47,"getItem"],[1,428,54,55,"SANDBOX_ADMIN_ID_KEY"],[1,431,56,6],[1,434,56,10,"storedAdminId"],[1,436,56,25],[1,437,58,8],[1,443,58,14,"response"],[1,451,58,31,"api"],[1,453,58,34,"default"],[1,461,58,35,"get"],[1,465,58,39],[1,492,58,66,"storedAdminId"],[1,497,60,12,"response"],[1,499,60,21,"data"],[1,504,60,26,"active"],[1,512,60,36,"response"],[1,514,60,45,"data"],[1,519,60,50,"session"],[1,528,61,10,"setSandboxSession"],[1,530,61,28,"response"],[1,532,61,37,"data"],[1,537,61,42,"session"],[1,546,62,10,"setIsSandboxMode"],[1,549,62,27],[1,560,65,16,"AsyncStorage"],[1,562,65,28,"default"],[1,570,65,29,"removeItem"],[1,581,65,40,"SANDBOX_SESSION_KEY"],[1,590,66,16,"AsyncStorage"],[1,592,66,28,"default"],[1,600,66,29,"removeItem"],[1,611,66,40,"SANDBOX_ADMIN_ID_KEY"],[1,614,67,10,"setSandboxSession"],[1,616,67,28],[1,622,68,10,"setIsSandboxMode"],[1,625,68,27],[1,628,70,6],[1,629,71,4],[1,630,71,6],[1,636,71,13,"error"],[1,639,72,6,"console"],[1,647,72,14,"log"],[1,651,72,18],[1,683,72,51,"error"],[1,685,73,4],[1,686,73,5],[1,694,74,6,"setIsLoading"],[1,697,74,19],[1,699,75,4],[1,702,78,8,"enterSandbox"],[1,705,78,23],[1,707,78,23,"useCallback"],[1,709,78,34,"useCallback"],[1,722,78,35,"async"],[1,732,79,4],[1,736,80,6,"setIsLoading"],[1,739,80,19],[1,742,84,6],[1,748,84,12,"adminId"],[1,750,84,22],[1,758,86,12,"response"],[1,766,86,29,"api"],[1,768,86,32,"default"],[1,776,86,33,"post"],[1,781,86,38],[1,806,86,64],[1,807,87,8,"admin_id"],[1,816,87,18,"adminId"],[1,818,88,8,"role"],[1,823,88,14,"role"],[1,827,91,6],[1,835,91,10,"response"],[1,837,91,19,"data"],[1,842,91,24,"session"],[1,858,92,14,"AsyncStorage"],[1,860,92,26,"default"],[1,868,92,27,"setItem"],[1,876,92,35,"SANDBOX_ADMIN_ID_KEY"],[1,878,92,57,"adminId"],[1,887,93,14,"AsyncStorage"],[1,889,93,26,"default"],[1,897,93,27,"setItem"],[1,905,93,35,"SANDBOX_SESSION_KEY"],[1,907,93,56,"JSON"],[1,912,93,61,"stringify"],[1,922,93,71,"response"],[1,924,93,80,"data"],[1,929,93,85,"session"],[1,939,94,8,"setSandboxSession"],[1,941,94,26,"response"],[1,943,94,35,"data"],[1,948,94,40,"session"],[1,957,95,8,"setIsSandboxMode"],[1,960,95,25],[1,964,96,15],[1,966,99,4],[1,967,99,6],[1,973,99,13,"error"],[1,976,101,6],[1,983,100,6,"console"],[1,991,100,14,"error"],[1,997,100,20],[1,1024,100,48,"error"],[1,1028,101,13],[1,1029,102,4],[1,1030,102,5],[1,1038,103,6,"setIsLoading"],[1,1041,103,19],[1,1043,104,4],[1,1046,105,5],[1,1050,107,8,"exitSandbox"],[1,1053,107,22],[1,1055,107,22,"useCallback"],[1,1057,107,33,"useCallback"],[1,1070,107,34,"async"],[1,1080,108,4],[1,1084,109,6],[1,1087,109,10,"sandboxSession"],[1,1089,109,26],[1,1090,110,8],[1,1096,110,14,"storedAdminId"],[1,1104,110,36,"AsyncStorage"],[1,1106,110,48,"default"],[1,1114,110,49,"getItem"],[1,1122,110,57,"SANDBOX_ADMIN_ID_KEY"],[1,1131,111,14,"api"],[1,1133,111,17,"default"],[1,1141,111,18,"post"],[1,1146,111,23],[1,1166,111,43,"sandboxSession"],[1,1168,111,58,"id"],[1,1177,111,68],[1,1178,112,10,"admin_id"],[1,1187,112,20,"storedAdminId"],[1,1190,112,37],[1,1199,114,6],[1,1200,115,4],[1,1201,115,6],[1,1207,115,13,"error"],[1,1210,116,6,"console"],[1,1218,116,14,"error"],[1,1224,116,20],[1,1257,116,54,"error"],[1,1259,117,4],[1,1260,117,5],[1,1274,118,12,"AsyncStorage"],[1,1276,118,24,"default"],[1,1284,118,25,"removeItem"],[1,1295,118,36,"SANDBOX_SESSION_KEY"],[1,1304,119,12,"AsyncStorage"],[1,1306,119,24,"default"],[1,1314,119,25,"removeItem"],[1,1325,119,36,"SANDBOX_ADMIN_ID_KEY"],[1,1328,120,6,"setSandboxSession"],[1,1330,120,24],[1,1336,121,6,"setIsSandboxMode"],[1,1339,121,23],[1,1341,122,4],[1,1344,123,5],[1,1345,123,6,"sandboxSession"],[1,1349,125,8,"switchRole"],[1,1352,125,21],[1,1354,125,21,"useCallback"],[1,1356,125,32,"useCallback"],[1,1369,125,33,"async"],[1,1379,126,4],[1,1383,127,6],[1,1387,127,11,"sandboxSession"],[1,1389,127,27],[1,1396,127,34],[1,1398,129,6],[1,1404,129,12,"storedAdminId"],[1,1412,129,34,"AsyncStorage"],[1,1414,129,46,"default"],[1,1422,129,47,"getItem"],[1,1430,129,55,"SANDBOX_ADMIN_ID_KEY"],[1,1433,136,6],[1,1448,131,29,"api"],[1,1450,131,32,"default"],[1,1458,131,33,"post"],[1,1463,131,38],[1,1483,131,58,"sandboxSession"],[1,1485,131,73,"id"],[1,1502,131,91],[1,1503,132,8,"admin_id"],[1,1512,132,18,"storedAdminId"],[1,1515,132,35],[1,1523,133,8,"new_role"],[1,1532,133,18,"newRole"],[1,1537,136,19,"data"],[1,1542,136,24,"success"],[1,1558,138,14,"checkSandboxSession"],[1,1563,139,15],[1,1565,142,4],[1,1566,142,6],[1,1572,142,13,"error"],[1,1575,144,6],[1,1582,143,6,"console"],[1,1590,143,14,"error"],[1,1596,143,20],[1,1621,143,46,"error"],[1,1625,144,13],[1,1626,145,4],[1,1629,146,5],[1,1630,146,6,"sandboxSession"],[1,1634,148,8,"refreshSession"],[1,1637,148,25],[1,1639,148,25,"useCallback"],[1,1641,148,36,"useCallback"],[1,1654,148,37,"async"],[1,1670,149,10,"checkSandboxSession"],[1,1675,150,5],[1,1679,152,8,"value"],[1,1681,152,36],[1,1682,153,4,"isSandboxMode"],[1,1698,154,4,"sandboxSession"],[1,1715,155,4,"sandboxRole"],[1,1727,155,17,"sandboxSession"],[1,1730,155,33,"role"],[1,1736,155,41],[1,1741,156,4,"sandboxUserId"],[1,1755,156,19,"sandboxSession"],[1,1758,156,35,"sandbox_user_id"],[1,1775,156,54],[1,1780,157,4,"timeOffset"],[1,1791,157,16,"sandboxSession"],[1,1794,157,32,"simulated_time_offset_hours"],[1,1823,157,63],[1,1825,158,4,"isLoading"],[1,1837,159,4,"enterSandbox"],[1,1852,160,4,"exitSandbox"],[1,1866,161,4,"switchRole"],[1,1879,162,4,"refreshSession"],[1,1897,165,2],[1,1904,166,4],[1,1906,166,4,"_reactJsxRuntime"],[1,1908,166,4,"jsx"],[1,1913,166,5,"SandboxContext"],[1,1915,166,20,"Provider"],[1,1924,166,28],[1,1925,166,29,"value"],[1,1931,166,36,"value"],[1,1933,166,42,"children"],[1,1942,167,7,"children"],[1,1945,170,0],[1,1947,172,0,"_e"],[1,1950,172,0,"useSandbox"],[1,1961,172,7],[1,1972,173,2],[1,1978,173,8,"context"],[1,1981,173,18],[1,1983,173,18,"useContext"],[1,1985,173,28,"useContext"],[1,1997,173,29,"SandboxContext"],[1,2000,174,2],[1,2008,174,18,"undefined"],[1,2012,174,6,"context"],[1,2014,175,4],[1,2020,175,10],[1,2024,175,14,"Error"],[1,2030,175,20],[1,2082,177,2],[1,2089,177,9,"context"],[1,2090,178,0],[1,2092,8,0],[1,2096,8,0,"_react"],[1,2098,8,0,"r"],[1,2100,8,0,"d"],[1,2102,8,0],[1,2106,10,0,"AsyncStorage"],[1,2108,10,0,"_interopDefault"],[1,2110,10,0,"r"],[1,2112,10,0,"d"],[1,2114,10,0],[1,2119,11,0,"api"],[1,2121,11,0,"_interopDefault"],[1,2123,11,0,"r"],[1,2125,11,0,"d"],[1,2127,11,0],[1,2132,11,24,"_reactJsxRuntime"],[1,2134,11,24,"r"],[1,2136,11,24,"d"],[1,2138,11,24],[1,2142,36,0],[1,2148,36,6,"SandboxContext"],[1,2151,36,23],[1,2153,36,23,"createContext"],[1,2155,36,36,"createContext"],[1,2175,36,69,"undefined"],[1,2178,38,6,"SANDBOX_SESSION_KEY"],[1,2180,38,28],[1,2198,39,6,"SANDBOX_ADMIN_ID_KEY"],[1,2200,39,29],[1,2219,180,0],[1,2223,180,0,"_default"],[1,2225,180,15,"SandboxContext"],[1,2226,180,30],[1,2229]],"functionMap":{"names":["<global>","SandboxProvider","useEffect$argument_0","checkSandboxSession","enterSandbox","exitSandbox","switchRole","refreshSession","useSandbox"],"mappings":"AAA;OCwC;YCM;GDE;8BEE;GFyB;mCGE;GH2B;kCIE;GJgB;iCKE;GLqB;qCME;GNE;CDoB;OQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}