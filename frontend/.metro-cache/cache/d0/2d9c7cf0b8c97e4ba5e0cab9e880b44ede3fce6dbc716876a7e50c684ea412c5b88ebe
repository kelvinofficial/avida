{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":145},"end":{"line":7,"column":65,"index":210}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../utils/cacheManager","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":211},"end":{"line":8,"column":82,"index":293}}],"key":"khlnndGTcOlkIW6B06Jlcfzuf30=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){\"use strict\";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,\"default\",{enumerable:!0,get:function(){return s}}),e.useCacheFirst=n,e.useCacheFirstList=function({cacheKey:t,fetcher:c,deps:s=[],enabled:u=!0}){return n({cacheKey:t,fetcher:c,fallbackData:[],deps:s,enabled:u})};var t=r(d[0]),c=r(d[1]);function n({cacheKey:n,fetcher:s,fallbackData:u,deps:l=[],enabled:h=!0,onFreshData:f}){const o=(0,c.getCachedSync)(n),[C,y]=(0,t.useState)(o??u),[b,F]=(0,t.useState)(!1),[S,p]=(0,t.useState)(null!==o),[k,D]=(0,t.useState)(null),M=(0,t.useRef)(!0),_=(0,t.useRef)(!1),v=(0,t.useCallback)(async()=>{if(h){F(!0),D(null);try{const t=await s();M.current&&(y(t),p(!1),(0,c.setCacheSync)(n,t),c.CacheManager.setCache(n,t),f?.(t))}catch(t){M.current&&(D(t),console.warn('[useCacheFirst] Fetch error:',t))}finally{M.current&&F(!1)}}},[n,s,h,f]),w=(0,t.useCallback)(async()=>{await v()},[v]),K=(0,t.useCallback)(t=>{y(s=>{const u='function'==typeof t?t(s):t;return(0,c.setCacheSync)(n,u),c.CacheManager.setCache(n,u),u})},[n]);return(0,t.useEffect)(()=>(M.current=!0,h&&v(),()=>{M.current=!1}),[h,...l]),(0,t.useEffect)(()=>{!o&&h&&c.CacheManager.getCached(n,{}).then(t=>{t&&M.current&&!_.current&&(y(t.data),p(!0))})},[]),{data:C,isFetching:b,isFromCache:S,error:k,refresh:w,setData:K}}var s=n});","lineCount":1,"map":[[1,90,172,0,"Object"],[1,97,172,0,"defineProperty"],[1,112,172,0,"e"],[1,114,172,0],[1,125,172,0,"enumerable"],[1,137,172,0],[1,139,172,0,"get"],[1,143,172,0],[1,161,172,0,"_default"],[1,162,172,0],[1,166,40,0,"e"],[1,168,40,0,"useCacheFirst"],[1,184,152,0,"e"],[1,186,152,0,"useCacheFirstList"],[1,204,152,7],[1,214,152,37,"cacheKey"],[1,223,153,2,"cacheKey"],[1,225,153,10,"fetcher"],[1,233,154,2,"fetcher"],[1,235,154,9,"deps"],[1,240,155,2,"deps"],[1,242,155,9],[1,245,155,11,"enabled"],[1,253,156,2,"enabled"],[1,256,156,12],[1,260,163,2],[1,267,163,9,"useCacheFirst"],[1,269,163,28],[1,270,164,4,"cacheKey"],[1,281,165,4,"fetcher"],[1,291,166,4,"fallbackData"],[1,304,166,18],[1,307,167,4,"deps"],[1,314,168,4,"enabled"],[1,325,170,0],[1,327,7,0],[1,331,7,0,"_react"],[1,333,7,0,"r"],[1,335,7,0,"d"],[1,337,7,0],[1,341,8,0,"_utilsCacheManager"],[1,343,8,0,"r"],[1,345,8,0,"d"],[1,347,8,0],[1,351,40,7],[1,360,40,16,"useCacheFirst"],[1,363,40,33,"cacheKey"],[1,372,41,2,"cacheKey"],[1,374,41,10,"fetcher"],[1,382,42,2,"fetcher"],[1,384,42,9,"fallbackData"],[1,397,43,2,"fallbackData"],[1,399,43,14,"deps"],[1,404,44,2,"deps"],[1,406,44,9],[1,409,44,11,"enabled"],[1,417,45,2,"enabled"],[1,420,45,12],[1,422,45,16,"onFreshData"],[1,434,46,2,"onFreshData"],[1,438,49,2],[1,444,49,8,"cachedData"],[1,447,49,21],[1,449,49,21,"getCachedSync"],[1,451,49,34,"getCachedSync"],[1,466,49,38,"cacheKey"],[1,470,52,9,"data"],[1,472,52,15,"setDataState"],[1,476,52,31],[1,478,52,31,"useState"],[1,480,52,39,"useState"],[1,490,52,43,"cachedData"],[1,493,52,57,"fallbackData"],[1,497,53,9,"isFetching"],[1,499,53,21,"setIsFetching"],[1,503,53,38],[1,505,53,38,"useState"],[1,507,53,46,"useState"],[1,518,53,47],[1,522,54,9,"isFromCache"],[1,524,54,22,"setIsFromCache"],[1,528,54,40],[1,530,54,40,"useState"],[1,532,54,48,"useState"],[1,542,54,64],[1,549,54,49,"cachedData"],[1,553,55,9,"error"],[1,555,55,16,"setError"],[1,559,55,28],[1,561,55,28,"useState"],[1,563,55,36,"useState"],[1,573,55,51],[1,579,58,8,"isMounted"],[1,582,58,20],[1,584,58,20,"useRef"],[1,586,58,26,"useRef"],[1,595,58,27],[1,598,61,8,"hasInitialFetch"],[1,601,61,26],[1,603,61,26,"useRef"],[1,605,61,32,"useRef"],[1,614,61,33],[1,617,64,8,"fetchFreshData"],[1,620,64,25],[1,622,64,25,"useCallback"],[1,624,64,36,"useCallback"],[1,637,64,37,"async"],[1,647,65,4],[1,650,65,9,"enabled"],[1,652,65,4],[1,653,67,4,"setIsFetching"],[1,656,67,18],[1,659,68,4,"setError"],[1,661,68,13],[1,667,70,4],[1,671,71,6],[1,677,71,12,"freshData"],[1,685,71,30,"fetcher"],[1,689,73,10,"isMounted"],[1,691,73,20,"current"],[1,701,74,8,"setDataState"],[1,703,74,21,"freshData"],[1,706,75,8,"setIsFromCache"],[1,709,75,23],[1,713,77,8],[1,715,77,8,"setCacheSync"],[1,717,77,20,"setCacheSync"],[1,731,77,21,"cacheKey"],[1,733,77,31,"freshData"],[1,736,79,8,"CacheManager"],[1,738,79,20,"CacheManager"],[1,751,79,21,"setCache"],[1,760,79,30,"cacheKey"],[1,762,79,40,"freshData"],[1,765,81,8,"onFreshData"],[1,769,81,22,"freshData"],[1,772,83,4],[1,773,83,6],[1,779,83,13,"err"],[1,782,84,10,"isMounted"],[1,784,84,20,"current"],[1,794,85,8,"setError"],[1,796,85,17,"err"],[1,799,87,8,"console"],[1,807,87,16,"warn"],[1,812,87,21],[1,843,87,53,"err"],[1,846,89,4],[1,847,89,5],[1,855,90,10,"isMounted"],[1,857,90,20,"current"],[1,866,91,8,"setIsFetching"],[1,869,91,22],[1,871,93,4],[1,872,65,18],[1,875,94,5],[1,876,94,6,"cacheKey"],[1,878,94,16,"fetcher"],[1,880,94,25,"enabled"],[1,882,94,34,"onFreshData"],[1,886,97,8,"refresh"],[1,889,97,18],[1,891,97,18,"useCallback"],[1,893,97,29,"useCallback"],[1,906,97,30,"async"],[1,922,98,10,"fetchFreshData"],[1,927,99,5],[1,928,99,6,"fetchFreshData"],[1,932,102,8,"setData"],[1,935,102,18],[1,937,102,18,"useCallback"],[1,939,102,29,"useCallback"],[1,952,102,31,"update"],[1,956,103,4,"setDataState"],[1,958,103,17,"prev"],[1,962,104,6],[1,968,104,12,"newData"],[1,970,104,40],[1,989,104,29,"update"],[1,991,104,54,"update"],[1,993,104,80,"prev"],[1,996,104,88,"update"],[1,998,108,6],[1,1005,106,6],[1,1007,106,6,"setCacheSync"],[1,1009,106,18,"setCacheSync"],[1,1023,106,19,"cacheKey"],[1,1025,106,29,"newData"],[1,1028,107,6,"CacheManager"],[1,1030,107,18,"CacheManager"],[1,1043,107,19,"setCache"],[1,1052,107,28,"cacheKey"],[1,1054,107,38,"newData"],[1,1057,108,13,"newData"],[1,1062,110,5],[1,1063,110,6,"cacheKey"],[1,1067,139,2],[1,1074,113,2],[1,1076,113,2,"useEffect"],[1,1078,113,11,"useEffect"],[1,1089,113,12],[1,1094,114,4,"isMounted"],[1,1096,114,14,"current"],[1,1105,114,24],[1,1107,118,8,"enabled"],[1,1110,119,6,"fetchFreshData"],[1,1114,122,11],[1,1119,123,6,"isMounted"],[1,1121,123,16,"current"],[1,1130,123,26],[1,1134,125,5],[1,1135,125,6,"enabled"],[1,1140,125,18,"deps"],[1,1145,128,2],[1,1147,128,2,"useEffect"],[1,1149,128,11,"useEffect"],[1,1160,128,12],[1,1166,129,9,"cachedData"],[1,1169,129,23,"enabled"],[1,1172,130,6,"CacheManager"],[1,1174,130,18,"CacheManager"],[1,1187,130,19,"getCached"],[1,1197,130,32,"cacheKey"],[1,1199,130,42],[1,1200,130,43],[1,1203,130,46,"then"],[1,1208,130,51,"result"],[1,1212,131,12,"result"],[1,1215,131,22,"isMounted"],[1,1217,131,32,"current"],[1,1227,131,44,"hasInitialFetch"],[1,1229,131,60,"current"],[1,1239,132,10,"setDataState"],[1,1241,132,23,"result"],[1,1243,132,30,"data"],[1,1249,133,10,"setIsFromCache"],[1,1252,133,25],[1,1259,137,5],[1,1263,139,9],[1,1264,140,4,"data"],[1,1271,141,4,"isFetching"],[1,1284,142,4,"isFromCache"],[1,1298,143,4,"error"],[1,1306,144,4,"refresh"],[1,1316,145,4,"setData"],[1,1326,147,0],[1,1327,172,0],[1,1331,172,0,"_default"],[1,1333,172,15,"useCacheFirst"],[1,1334,172,29],[1,1337]],"functionMap":{"names":["<global>","useCacheFirst","fetchFreshData","refresh","setData","setDataState$argument_0","useEffect$argument_0","<anonymous>","CacheManager.getCached.then$argument_0","useCacheFirstList"],"mappings":"AAA;OCuC;qCCwB;GD8B;8BEG;GFE;8BGG;iBCC;KDM;GHC;YKG;WCS;KDE;GLC;YKG;mDEE;OFK;GLE;CDU;OSK;CTkB"},"hasCjsExports":false},"type":"js/module"}]}