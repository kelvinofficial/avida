{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"useFeatureSettingsStore\", {\n    enumerable: true,\n    get: function () {\n      return useFeatureSettingsStore;\n    }\n  });\n  Object.defineProperty(exports, \"useInitializeFeatureSettings\", {\n    enumerable: true,\n    get: function () {\n      return useInitializeFeatureSettings;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _zustand = require(_dependencyMap[1], \"zustand\");\n  // Helper to get API URL at runtime\n  const getApiUrl = () => _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || '';\n\n  // Feature settings interface matching backend response\n\n  // Default settings (used as fallback)\n  const DEFAULT_SETTINGS = {\n    show_view_count: true,\n    show_save_count: true,\n    show_listing_stats: true,\n    show_seller_stats: true,\n    show_distance: true,\n    show_time_ago: true,\n    show_negotiable_badge: true,\n    show_featured_badge: true,\n    location_mode: 'region',\n    default_country: 'TZ',\n    allow_country_change: false,\n    currency: 'TZS',\n    currency_symbol: 'TSh',\n    currency_position: 'before'\n  };\n  // Cache duration: 2 minutes\n  const CACHE_DURATION = 2 * 60 * 1000;\n  const useFeatureSettingsStore = (0, _zustand.create)((set, get) => ({\n    settings: DEFAULT_SETTINGS,\n    isLoading: false,\n    error: null,\n    lastFetched: null,\n    fetchSettings: async () => {\n      const state = get();\n\n      // Don't fetch if already loading\n      if (state.isLoading) return;\n\n      // Check cache - don't refetch if recently fetched\n      if (state.lastFetched && Date.now() - state.lastFetched < CACHE_DURATION) {\n        return;\n      }\n      set({\n        isLoading: true,\n        error: null\n      });\n      try {\n        const response = await fetch(`${getApiUrl()}/api/feature-settings`);\n        if (!response.ok) {\n          throw new Error('Failed to fetch feature settings');\n        }\n        const data = await response.json();\n        console.log('[FeatureSettingsStore] Received data:', JSON.stringify(data));\n        console.log('[FeatureSettingsStore] location_mode:', data.location_mode);\n        const newSettings = {\n          ...DEFAULT_SETTINGS,\n          ...data\n        };\n        console.log('[FeatureSettingsStore] New settings:', JSON.stringify(newSettings));\n        set({\n          settings: newSettings,\n          isLoading: false,\n          lastFetched: Date.now()\n        });\n      } catch (error) {\n        console.error('Error fetching feature settings:', error);\n        set({\n          isLoading: false,\n          error: error instanceof Error ? error.message : 'Unknown error'\n          // Keep default settings on error\n        });\n      }\n    },\n    // Helper methods for common checks\n    shouldShowViewCount: () => get().settings.show_view_count,\n    shouldShowSaveCount: () => get().settings.show_save_count,\n    shouldShowDistance: () => get().settings.show_distance,\n    shouldShowTimeAgo: () => get().settings.show_time_ago,\n    shouldShowNegotiableBadge: () => get().settings.show_negotiable_badge,\n    shouldShowFeaturedBadge: () => get().settings.show_featured_badge,\n    formatPrice: price => {\n      const {\n        currency_symbol,\n        currency_position\n      } = get().settings;\n      const formattedNumber = price.toLocaleString();\n      if (currency_position === 'before') {\n        return `${currency_symbol} ${formattedNumber}`;\n      }\n      return `${formattedNumber} ${currency_symbol}`;\n    }\n  }));\n\n  // Export a hook for easy initialization\n  const useInitializeFeatureSettings = () => {\n    _s();\n    const fetchSettings = useFeatureSettingsStore(state => state.fetchSettings);\n    return fetchSettings;\n  };\n  _s(useInitializeFeatureSettings, \"e86dPHIW+8oHDQAi8m7qymTgkxY=\", false, function () {\n    return [useFeatureSettingsStore];\n  });\n});","lineCount":121,"map":[[8,2,63,0,"Object"],[8,8,63,0],[8,9,63,0,"defineProperty"],[8,23,63,0],[8,24,63,0,"exports"],[8,31,63,0],[9,4,63,0,"enumerable"],[9,14,63,0],[10,4,63,0,"get"],[10,7,63,0],[10,18,63,0,"get"],[10,19,63,0],[11,6,63,0],[11,13,63,0,"useFeatureSettingsStore"],[11,36,63,0],[12,4,63,0],[13,2,63,0],[14,2,131,0,"Object"],[14,8,131,0],[14,9,131,0,"defineProperty"],[14,23,131,0],[14,24,131,0,"exports"],[14,31,131,0],[15,4,131,0,"enumerable"],[15,14,131,0],[16,4,131,0,"get"],[16,7,131,0],[16,18,131,0,"get"],[16,19,131,0],[17,6,131,0],[17,13,131,0,"useInitializeFeatureSettings"],[17,41,131,0],[18,4,131,0],[19,2,131,0],[20,2,134,2],[20,6,134,2,"_expoVirtualEnv"],[20,21,134,2],[20,24,134,2,"require"],[20,31,134,2],[20,32,134,2,"_dependencyMap"],[20,46,134,2],[21,2,1,0],[21,6,1,0,"_zustand"],[21,14,1,0],[21,17,1,0,"require"],[21,24,1,0],[21,25,1,0,"_dependencyMap"],[21,39,1,0],[22,2,3,0],[23,2,4,0],[23,8,4,6,"getApiUrl"],[23,17,4,15],[23,20,4,18,"getApiUrl"],[23,21,4,18],[23,26,4,24,"_expoVirtualEnv"],[23,41,4,24],[23,42,4,24,"env"],[23,45,4,24],[23,46,4,24,"EXPO_PUBLIC_BACKEND_URL"],[23,69,4,24],[23,73,4,63],[23,75,4,65],[25,2,6,0],[27,2,25,0],[28,2,26,0],[28,8,26,6,"DEFAULT_SETTINGS"],[28,24,26,39],[28,27,26,42],[29,4,27,2,"show_view_count"],[29,19,27,17],[29,21,27,19],[29,25,27,23],[30,4,28,2,"show_save_count"],[30,19,28,17],[30,21,28,19],[30,25,28,23],[31,4,29,2,"show_listing_stats"],[31,22,29,20],[31,24,29,22],[31,28,29,26],[32,4,30,2,"show_seller_stats"],[32,21,30,19],[32,23,30,21],[32,27,30,25],[33,4,31,2,"show_distance"],[33,17,31,15],[33,19,31,17],[33,23,31,21],[34,4,32,2,"show_time_ago"],[34,17,32,15],[34,19,32,17],[34,23,32,21],[35,4,33,2,"show_negotiable_badge"],[35,25,33,23],[35,27,33,25],[35,31,33,29],[36,4,34,2,"show_featured_badge"],[36,23,34,21],[36,25,34,23],[36,29,34,27],[37,4,35,2,"location_mode"],[37,17,35,15],[37,19,35,17],[37,27,35,25],[38,4,36,2,"default_country"],[38,19,36,17],[38,21,36,19],[38,25,36,23],[39,4,37,2,"allow_country_change"],[39,24,37,22],[39,26,37,24],[39,31,37,29],[40,4,38,2,"currency"],[40,12,38,10],[40,14,38,12],[40,19,38,17],[41,4,39,2,"currency_symbol"],[41,19,39,17],[41,21,39,19],[41,26,39,24],[42,4,40,2,"currency_position"],[42,21,40,19],[42,23,40,21],[43,2,41,0],[43,3,41,1],[44,2,60,0],[45,2,61,0],[45,8,61,6,"CACHE_DURATION"],[45,22,61,20],[45,25,61,23],[45,26,61,24],[45,29,61,27],[45,31,61,29],[45,34,61,32],[45,38,61,36],[46,2,63,7],[46,8,63,13,"useFeatureSettingsStore"],[46,31,63,36],[46,34,63,39],[46,38,63,39,"create"],[46,46,63,45],[46,47,63,45,"create"],[46,53,63,45],[46,55,63,68],[46,56,63,69,"set"],[46,59,63,72],[46,61,63,74,"get"],[46,64,63,77],[46,70,63,83],[47,4,64,2,"settings"],[47,12,64,10],[47,14,64,12,"DEFAULT_SETTINGS"],[47,30,64,28],[48,4,65,2,"isLoading"],[48,13,65,11],[48,15,65,13],[48,20,65,18],[49,4,66,2,"error"],[49,9,66,7],[49,11,66,9],[49,15,66,13],[50,4,67,2,"lastFetched"],[50,15,67,13],[50,17,67,15],[50,21,67,19],[51,4,69,2,"fetchSettings"],[51,17,69,15],[51,19,69,17],[51,25,69,17,"fetchSettings"],[51,26,69,17],[51,31,69,29],[52,6,70,4],[52,12,70,10,"state"],[52,17,70,15],[52,20,70,18,"get"],[52,23,70,21],[52,24,70,22],[52,25,70,23],[54,6,72,4],[55,6,73,4],[55,10,73,8,"state"],[55,15,73,13],[55,16,73,14,"isLoading"],[55,25,73,23],[55,27,73,25],[57,6,75,4],[58,6,76,4],[58,10,76,8,"state"],[58,15,76,13],[58,16,76,14,"lastFetched"],[58,27,76,25],[58,31,76,29,"Date"],[58,35,76,33],[58,36,76,34,"now"],[58,39,76,37],[58,40,76,38],[58,41,76,39],[58,44,76,42,"state"],[58,49,76,47],[58,50,76,48,"lastFetched"],[58,61,76,59],[58,64,76,62,"CACHE_DURATION"],[58,78,76,76],[58,80,76,78],[59,8,77,6],[60,6,78,4],[61,6,80,4,"set"],[61,9,80,7],[61,10,80,8],[62,8,80,10,"isLoading"],[62,17,80,19],[62,19,80,21],[62,23,80,25],[63,8,80,27,"error"],[63,13,80,32],[63,15,80,34],[64,6,80,39],[64,7,80,40],[64,8,80,41],[65,6,82,4],[65,10,82,8],[66,8,83,6],[66,14,83,12,"response"],[66,22,83,20],[66,25,83,23],[66,31,83,29,"fetch"],[66,36,83,34],[66,37,83,35],[66,40,83,38,"getApiUrl"],[66,49,83,47],[66,50,83,48],[66,51,83,49],[66,74,83,72],[66,75,83,73],[67,8,85,6],[67,12,85,10],[67,13,85,11,"response"],[67,21,85,19],[67,22,85,20,"ok"],[67,24,85,22],[67,26,85,24],[68,10,86,8],[68,16,86,14],[68,20,86,18,"Error"],[68,25,86,23],[68,26,86,24],[68,60,86,58],[68,61,86,59],[69,8,87,6],[70,8,89,6],[70,14,89,12,"data"],[70,18,89,16],[70,21,89,19],[70,27,89,25,"response"],[70,35,89,33],[70,36,89,34,"json"],[70,40,89,38],[70,41,89,39],[70,42,89,40],[71,8,90,6,"console"],[71,15,90,13],[71,16,90,14,"log"],[71,19,90,17],[71,20,90,18],[71,59,90,57],[71,61,90,59,"JSON"],[71,65,90,63],[71,66,90,64,"stringify"],[71,75,90,73],[71,76,90,74,"data"],[71,80,90,78],[71,81,90,79],[71,82,90,80],[72,8,91,6,"console"],[72,15,91,13],[72,16,91,14,"log"],[72,19,91,17],[72,20,91,18],[72,59,91,57],[72,61,91,59,"data"],[72,65,91,63],[72,66,91,64,"location_mode"],[72,79,91,77],[72,80,91,78],[73,8,93,6],[73,14,93,12,"newSettings"],[73,25,93,23],[73,28,93,26],[74,10,93,28],[74,13,93,31,"DEFAULT_SETTINGS"],[74,29,93,47],[75,10,93,49],[75,13,93,52,"data"],[76,8,93,57],[76,9,93,58],[77,8,94,6,"console"],[77,15,94,13],[77,16,94,14,"log"],[77,19,94,17],[77,20,94,18],[77,58,94,56],[77,60,94,58,"JSON"],[77,64,94,62],[77,65,94,63,"stringify"],[77,74,94,72],[77,75,94,73,"newSettings"],[77,86,94,84],[77,87,94,85],[77,88,94,86],[78,8,96,6,"set"],[78,11,96,9],[78,12,96,10],[79,10,97,8,"settings"],[79,18,97,16],[79,20,97,18,"newSettings"],[79,31,97,29],[80,10,98,8,"isLoading"],[80,19,98,17],[80,21,98,19],[80,26,98,24],[81,10,99,8,"lastFetched"],[81,21,99,19],[81,23,99,21,"Date"],[81,27,99,25],[81,28,99,26,"now"],[81,31,99,29],[81,32,99,30],[82,8,100,6],[82,9,100,7],[82,10,100,8],[83,6,101,4],[83,7,101,5],[83,8,101,6],[83,15,101,13,"error"],[83,20,101,18],[83,22,101,20],[84,8,102,6,"console"],[84,15,102,13],[84,16,102,14,"error"],[84,21,102,19],[84,22,102,20],[84,56,102,54],[84,58,102,56,"error"],[84,63,102,61],[84,64,102,62],[85,8,103,6,"set"],[85,11,103,9],[85,12,103,10],[86,10,104,8,"isLoading"],[86,19,104,17],[86,21,104,19],[86,26,104,24],[87,10,105,8,"error"],[87,15,105,13],[87,17,105,15,"error"],[87,22,105,20],[87,34,105,32,"Error"],[87,39,105,37],[87,42,105,40,"error"],[87,47,105,45],[87,48,105,46,"message"],[87,55,105,53],[87,58,105,56],[88,10,106,8],[89,8,107,6],[89,9,107,7],[89,10,107,8],[90,6,108,4],[91,4,109,2],[91,5,109,3],[92,4,111,2],[93,4,112,2,"shouldShowViewCount"],[93,23,112,21],[93,25,112,23,"shouldShowViewCount"],[93,26,112,23],[93,31,112,29,"get"],[93,34,112,32],[93,35,112,33],[93,36,112,34],[93,37,112,35,"settings"],[93,45,112,43],[93,46,112,44,"show_view_count"],[93,61,112,59],[94,4,113,2,"shouldShowSaveCount"],[94,23,113,21],[94,25,113,23,"shouldShowSaveCount"],[94,26,113,23],[94,31,113,29,"get"],[94,34,113,32],[94,35,113,33],[94,36,113,34],[94,37,113,35,"settings"],[94,45,113,43],[94,46,113,44,"show_save_count"],[94,61,113,59],[95,4,114,2,"shouldShowDistance"],[95,22,114,20],[95,24,114,22,"shouldShowDistance"],[95,25,114,22],[95,30,114,28,"get"],[95,33,114,31],[95,34,114,32],[95,35,114,33],[95,36,114,34,"settings"],[95,44,114,42],[95,45,114,43,"show_distance"],[95,58,114,56],[96,4,115,2,"shouldShowTimeAgo"],[96,21,115,19],[96,23,115,21,"shouldShowTimeAgo"],[96,24,115,21],[96,29,115,27,"get"],[96,32,115,30],[96,33,115,31],[96,34,115,32],[96,35,115,33,"settings"],[96,43,115,41],[96,44,115,42,"show_time_ago"],[96,57,115,55],[97,4,116,2,"shouldShowNegotiableBadge"],[97,29,116,27],[97,31,116,29,"shouldShowNegotiableBadge"],[97,32,116,29],[97,37,116,35,"get"],[97,40,116,38],[97,41,116,39],[97,42,116,40],[97,43,116,41,"settings"],[97,51,116,49],[97,52,116,50,"show_negotiable_badge"],[97,73,116,71],[98,4,117,2,"shouldShowFeaturedBadge"],[98,27,117,25],[98,29,117,27,"shouldShowFeaturedBadge"],[98,30,117,27],[98,35,117,33,"get"],[98,38,117,36],[98,39,117,37],[98,40,117,38],[98,41,117,39,"settings"],[98,49,117,47],[98,50,117,48,"show_featured_badge"],[98,69,117,67],[99,4,119,2,"formatPrice"],[99,15,119,13],[99,17,119,16,"price"],[99,22,119,29],[99,26,119,34],[100,6,120,4],[100,12,120,10],[101,8,120,12,"currency_symbol"],[101,23,120,27],[102,8,120,29,"currency_position"],[103,6,120,47],[103,7,120,48],[103,10,120,51,"get"],[103,13,120,54],[103,14,120,55],[103,15,120,56],[103,16,120,57,"settings"],[103,24,120,65],[104,6,121,4],[104,12,121,10,"formattedNumber"],[104,27,121,25],[104,30,121,28,"price"],[104,35,121,33],[104,36,121,34,"toLocaleString"],[104,50,121,48],[104,51,121,49],[104,52,121,50],[105,6,123,4],[105,10,123,8,"currency_position"],[105,27,123,25],[105,32,123,30],[105,40,123,38],[105,42,123,40],[106,8,124,6],[106,15,124,13],[106,18,124,16,"currency_symbol"],[106,33,124,31],[106,37,124,35,"formattedNumber"],[106,52,124,50],[106,54,124,52],[107,6,125,4],[108,6,126,4],[108,13,126,11],[108,16,126,14,"formattedNumber"],[108,31,126,29],[108,35,126,33,"currency_symbol"],[108,50,126,48],[108,52,126,50],[109,4,127,2],[110,2,128,0],[110,3,128,1],[110,4,128,2],[110,5,128,3],[112,2,130,0],[113,2,131,7],[113,8,131,13,"useInitializeFeatureSettings"],[113,36,131,41],[113,39,131,44,"useInitializeFeatureSettings"],[113,40,131,44],[113,45,131,50],[114,4,131,50,"_s"],[114,6,131,50],[115,4,132,2],[115,10,132,8,"fetchSettings"],[115,23,132,21],[115,26,132,24,"useFeatureSettingsStore"],[115,49,132,47],[115,50,132,48,"state"],[115,55,132,53],[115,59,132,57,"state"],[115,64,132,62],[115,65,132,63,"fetchSettings"],[115,78,132,76],[115,79,132,77],[116,4,133,2],[116,11,133,9,"fetchSettings"],[116,24,133,22],[117,2,134,0],[117,3,134,1],[118,2,134,2,"_s"],[118,4,134,2],[118,5,131,13,"useInitializeFeatureSettings"],[118,33,131,41],[119,4,131,41],[119,12,132,24,"useFeatureSettingsStore"],[119,35,132,47],[120,2,132,47],[121,0,132,47],[121,3]],"functionMap":{"names":["<global>","getApiUrl","create$argument_0","fetchSettings","shouldShowViewCount","shouldShowSaveCount","shouldShowDistance","shouldShowTimeAgo","shouldShowNegotiableBadge","shouldShowFeaturedBadge","formatPrice","useInitializeFeatureSettings","useFeatureSettingsStore$argument_0"],"mappings":"AAA;kBCG,+CD;oEE2D;iBCM;GDwC;uBEG,oCF;uBGC,oCH;sBIC,kCJ;qBKC,kCL;6BMC,0CN;2BOC,wCP;eQE;GRQ;EFC;4CWG;gDCC,4BD;CXE"},"hasCjsExports":false},"type":"js/module"}]}